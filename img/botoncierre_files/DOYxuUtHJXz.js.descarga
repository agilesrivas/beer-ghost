if (self.CavalryLogger) { CavalryLogger.start_js(["szKr+"]); }

__d("AlbumUploaderContributor",["immutable"],(function a(b,c,d,e,f,g){f.exports=c("immutable").Record({id:null,title:null})}),null);
__d("SharedAlbumContributorsTokenizer.react",["fbt","AlbumUploaderContributor","React","SearchableEntry","XUITokenizer.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onAddEntryAttempt=function(r){var s=this.hasEntry(r);if(s)return;this.props.onContributorAdded(new(c("AlbumUploaderContributor"))({id:r.getUniqueID(),title:r.getTitle()}))}.bind(this),this.onRemoveEntryAttempt=function(r){var s=this.hasEntry(r);if(!s)return;this.props.onContributorRemoved(new(c("AlbumUploaderContributor"))({id:r.getUniqueID(),title:r.getTitle()}))}.bind(this),n}l.prototype.render=function(){"use strict";var m={};m[this.props.ownerID]=true;var n=this.props.entries.map(function(o){return new(c("SearchableEntry"))({uniqueID:o.id,title:o.title})});return c("React").createElement(c("XUITokenizer.react"),{className:this.props.className,placeholder:this.props.placeholder,entries:n,searchSource:this.props.dataSource,onAddEntryAttempt:this.onAddEntryAttempt,onRemoveEntryAttempt:this.onRemoveEntryAttempt,excludedEntries:m,focusedOnInit:this.props.focusedOnInit,disabled:this.props.disabled})};l.prototype.hasEntry=function(m){"use strict";var n=m.getUniqueID(),o=this.props.entries;return o.some(function(m){return m.id===n})};l.propTypes={className:k.string,dataSource:k.object.isRequired,disabled:k.bool,entries:k.array.isRequired,focusedOnInit:k.bool,onContributorAdded:k.func.isRequired,onContributorRemoved:k.func.isRequired,ownerID:k.oneOfType([k.number,k.string]).isRequired,placeholder:k.string};l.defaultProps={disabled:false,focusedOnInit:true,placeholder:h._("Indica los nombres de tus amigos")};f.exports=l}),null);
__d("AlbumUploaderAlbumActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({MAKE_SHARED_ALBUM:null,UNMAKE_SHARED_ALBUM:null,ADD_CONTRIBUTOR:null,REMOVE_CONTRIBUTOR:null})}),null);
__d("AlbumUploaderAlbumActions",["invariant","AlbumUploaderAlbumActionType","immutable"],(function a(b,c,d,e,f,g,h){var i={makeSharedAlbum:function j(k){k===undefined||c("immutable").Map.isMap(k)||h(0);return{action:c("AlbumUploaderAlbumActionType").MAKE_SHARED_ALBUM,tags:k}},unmakeSharedAlbum:function j(){return{action:c("AlbumUploaderAlbumActionType").UNMAKE_SHARED_ALBUM}},addContributor:function j(k){return{action:c("AlbumUploaderAlbumActionType").ADD_CONTRIBUTOR,entry:k}},removeContributor:function j(k){return{action:c("AlbumUploaderAlbumActionType").REMOVE_CONTRIBUTOR,entry:k}}};f.exports=i}),null);
__d("AlbumUploaderDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("Dispatcher_DEPRECATED"));i=h&&h.prototype;j.prototype.handleUpdate=function(k){"use strict";if(!Array.isArray(k))k=[k];this.dispatch({payloads:k})};function j(){"use strict";h.apply(this,arguments)}f.exports=new j()}),null);
__d("XPhotoActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({CREATE_PHOTO_DATA:null,RECOGNIZING_FACES:null,SET_RECOGNIZING:null,ADD_FACEBOX:null,CONFIRM_SUGGESTION:null,REJECT_SUGGESTION:null,ADD_TAG:null,REMOVE_TAG:null,REMOVE_ALL_SUBJECT_TAGS:null,UPDATE_CAPTION:null,REMOVE_PHOTO:null,BACKDATE_PHOTO:null,CHANGE_PLACE:null,ROTATE_PHOTO:null,REMOVE_ALL_LOCATION_TAGS:null,PHOTO_RECOGNITION_ALL_FINISHED:null})}),null);
__d("XMediaElementType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({ALBUM_PHOTO_ELEMENT:null,ALBUM_VIDEO_ELEMENT:null})}),null);
__d("XPhotoLocationSources",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({ALBUM:null,MAGIC_TAGS:null,USER_SELECTION:null,NO_PLACE:null})}),null);
__d("XPhotoUploadActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({CREATE_UPLOAD_DATA:null,SET_UPLOADING:null,SET_UPLOADED:null,SET_FAILED:null,SET_ESTIMATED_REMAINING_TIME:null,CANCEL:null,REMOVE:null,SET_PHOTO_DATA:null})}),null);
__d("XMediaUploadState",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({ENQUEUED:null,UPLOADING:null,UPLOADED:null,FAILED:null})}),null);
__d("XPhotoUploadStore",["XPhotoUploadActionType","AlbumUploaderDispatcher","EventEmitter","immutable","XMediaUploadState","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("immutable").Record({id:undefined,filename:"",state:undefined,estimatedRemainingTime:undefined,resolution:undefined,photoID:undefined,photoData:{},error:{},mediaType:c("XMediaElementType").ALBUM_PHOTO_ELEMENT}),k=c("immutable").Record({ENQUEUED:0,UPLOADING:0,UPLOADED:0,FAILED:0});h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){"use strict";__p&&__p();i.constructor.call(this);this.$XPhotoUploadStore1=c("immutable").Map();this.$XPhotoUploadStore2=new k();this.$XPhotoUploadStore3=c("AlbumUploaderDispatcher").register(function(m){__p&&__p();var n=false;m.payloads.forEach(function(o){__p&&__p();if(c("XPhotoUploadActionType")[o.action]!==undefined)n=true;switch(o.action){case c("XPhotoUploadActionType").CREATE_UPLOAD_DATA:this.$XPhotoUploadStore4(o);break;case c("XPhotoUploadActionType").SET_UPLOADING:this.$XPhotoUploadStore5(o);break;case c("XPhotoUploadActionType").SET_ESTIMATED_REMAINING_TIME:this.$XPhotoUploadStore6(o);break;case c("XPhotoUploadActionType").SET_UPLOADED:this.$XPhotoUploadStore7(o);break;case c("XPhotoUploadActionType").SET_PHOTO_DATA:this.$XPhotoUploadStore8(o);break;case c("XPhotoUploadActionType").CANCEL:this.$XPhotoUploadStore9(o);break;case c("XPhotoUploadActionType").REMOVE:this.$XPhotoUploadStore10(o);break;case c("XPhotoUploadActionType").SET_FAILED:this.$XPhotoUploadStore11(o);break;default:}}.bind(this));if(n)this.emit("change",{uploads:this.$XPhotoUploadStore1,stats:this.$XPhotoUploadStore2})}.bind(this))}l.prototype.$XPhotoUploadStore4=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,["id","filename"]),o=n[0],p=n[1];if(!this.$XPhotoUploadStore1.get(o))this.$XPhotoUploadStore1=this.$XPhotoUploadStore1.set(o,new j({id:o,state:c("XMediaUploadState").ENQUEUED,filename:p}));else this.$XPhotoUploadStore13(o,function(q){return q.set("state",c("XMediaUploadState").ENQUEUED)});this.$XPhotoUploadStore2=this.$XPhotoUploadStore2.update(c("XMediaUploadState").ENQUEUED,function(q){return q+1})};l.prototype.$XPhotoUploadStore5=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,["id","resolution"]),o=n[0],p=n[1],q=this.$XPhotoUploadStore1.get(o);this.$XPhotoUploadStore14(q.state,c("XMediaUploadState").UPLOADING);this.$XPhotoUploadStore13(o,function(r){return r.set("state",c("XMediaUploadState").UPLOADING).set("resolution",p)})};l.prototype.$XPhotoUploadStore6=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,"id");this.$XPhotoUploadStore13(n,function(o){return o.set("estimatedRemainingTime",m.estimatedRemainingTime)})};l.prototype.$XPhotoUploadStore7=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,"id"),o=this.$XPhotoUploadStore1.get(n);this.$XPhotoUploadStore14(o.state,c("XMediaUploadState").UPLOADED);this.$XPhotoUploadStore13(n,function(p){return p.set("state",c("XMediaUploadState").UPLOADED).remove("estimatedRemainingTime")})};l.prototype.$XPhotoUploadStore11=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,"id");this.$XPhotoUploadStore13(n,function(o){return o.set("state",c("XMediaUploadState").FAILED).set("error",{code:m.errorCode,summary:m.errorSummary,description:m.errorDescription}).remove("estimatedRemainingTime")});this.$XPhotoUploadStore14(c("XMediaUploadState").UPLOADING,c("XMediaUploadState").FAILED)};l.prototype.$XPhotoUploadStore8=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,["id","photoID","photoData"]),o=n[0],p=n[1],q=n[2];this.$XPhotoUploadStore13(o,function(r){return r.set("photoID",p).set("photoData",q)})};l.prototype.$XPhotoUploadStore9=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,"id"),o=this.$XPhotoUploadStore1.get(n);this.$XPhotoUploadStore10(m);this.$XPhotoUploadStore2=this.$XPhotoUploadStore2.update(o.state,function(p){return p-1})};l.prototype.$XPhotoUploadStore10=function(m){"use strict";var n=this.$XPhotoUploadStore12(m,"id");this.$XPhotoUploadStore1=this.$XPhotoUploadStore1.remove(n)};l.prototype.$XPhotoUploadStore13=function(m,n){"use strict";this.$XPhotoUploadStore1=this.$XPhotoUploadStore1.update(m,n)};l.prototype.$XPhotoUploadStore14=function(m,n){"use strict";this.$XPhotoUploadStore2=this.$XPhotoUploadStore2.withMutations(function(o){return o.update(m,function(p){return p-1}).update(n,function(p){return p+1})})};l.prototype.$XPhotoUploadStore12=function(m,n){"use strict";__p&&__p();if(!Array.isArray(n))n=[n];var o=n.map(function(p){if(m[p]===undefined)throw new Error("Payload missing field: "+p);return m[p]});if(n.length===1)return o[0];return o};l.prototype.getDispatchToken=function(){"use strict";return this.$XPhotoUploadStore3};l.prototype.getUpload=function(m){"use strict";return this.$XPhotoUploadStore1.get(m)};f.exports=new l()}),null);
__d("XPhotoStore",["XPhotoActionType","AlbumUploaderDispatcher","EventEmitter","immutable","XPhotoLocationSources","XPhotoUploadActionType","XPhotoUploadStore","PhotoUploadFacerecWaterfallTypedLogger","FacerecWaterfallEvent","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=new Date(),k=j.getFullYear(),l=j.getMonth()+1,m=j.getDate(),n=c("immutable").Record({id:null,pid:null,thumbSrc:null,thumbDimensions:{},timeTaken:{year:k,month:l,day:m},exifTimeTaken:null,place:null,locationSource:c("XPhotoLocationSources").NO_SOURCE,tags:c("immutable").List(),faceboxes:c("immutable").List(),mentionsInput:null,initialCaption:{},encodedCaption:"",placeInput:null,reUploaded:false,isRecognizing:false,isSpherical:false,mediaType:c("XMediaElementType").ALBUM_PHOTO_ELEMENT}),o=c("immutable").Record({id:null,top:null,left:null,width:null,height:null,bestSubjectID:null,bestValue:null,bestProfilePictureURI:null,taggedSubjectID:null,taggedValue:null,suggestionProcessed:null,recognitions:c("immutable").List()}),p=c("immutable").Record({subjectID:null,value:null,facebox:null,fromSuggestion:false}),q=c("immutable").Record({value:null,count:0,profilePictureURI:null}),r=c("immutable").Record({locationID:null,name:null,count:0}),s=1e-4;function t(v,w){return Math.abs(w-v)<s}h=babelHelpers.inherits(u,c("EventEmitter"));i=h&&h.prototype;function u(){"use strict";__p&&__p();i.constructor.call(this);this.$XPhotoStore1=c("immutable").Map();this.$XPhotoStore2=c("immutable").Map();this.$XPhotoStore3=c("immutable").Set();this.$XPhotoStore4=c("immutable").Map();this.$XPhotoStore5=c("immutable").Map();this.$XPhotoStore6=false;this.$XPhotoStore7=c("AlbumUploaderDispatcher").register(function(v){__p&&__p();var w=false;v.payloads.forEach(function(x){__p&&__p();if(c("XPhotoActionType")[x.action]!==undefined||x.action===c("XPhotoUploadActionType").REMOVE)w=true;switch(x.action){case c("XPhotoActionType").CREATE_PHOTO_DATA:this.$XPhotoStore8(x);break;case c("XPhotoActionType").RECOGNIZING_FACES:this.$XPhotoStore9(x);break;case c("XPhotoActionType").SET_RECOGNIZING:this.$XPhotoStore10(x);break;case c("XPhotoActionType").PHOTO_RECOGNITION_ALL_FINISHED:this.$XPhotoStore11(x);break;case c("XPhotoActionType").ADD_FACEBOX:this.$XPhotoStore12(x);break;case c("XPhotoActionType").CONFIRM_SUGGESTION:this.$XPhotoStore13(x);break;case c("XPhotoActionType").REJECT_SUGGESTION:this.$XPhotoStore14(x);break;case c("XPhotoActionType").ADD_TAG:this.$XPhotoStore15(x);break;case c("XPhotoActionType").REMOVE_TAG:this.$XPhotoStore16(x);break;case c("XPhotoActionType").REMOVE_ALL_SUBJECT_TAGS:this.$XPhotoStore17(x);break;case c("XPhotoActionType").UPDATE_CAPTION:this.$XPhotoStore18(x);break;case c("XPhotoUploadActionType").REMOVE:c("AlbumUploaderDispatcher").waitFor([c("XPhotoUploadStore").getDispatchToken()]);this.$XPhotoStore19(x);break;case c("XPhotoActionType").BACKDATE_PHOTO:this.$XPhotoStore20(x);break;case c("XPhotoActionType").CHANGE_PLACE:this.$XPhotoStore21(x);break;case c("XPhotoActionType").ROTATE_PHOTO:this.$XPhotoStore22(x);break;case c("XPhotoActionType").REMOVE_ALL_LOCATION_TAGS:this.$XPhotoStore23(x);break;default:}}.bind(this));if(w)this.emit("change",{photos:this.$XPhotoStore1,tags:this.$XPhotoStore2,isRecognizingFaces:this.$XPhotoStore6,locationTags:this.$XPhotoStore4})}.bind(this))}u.prototype.getPhoto=function(v){"use strict";return this.$XPhotoStore1.get(v)};u.prototype.getPhotos=function(){"use strict";return this.$XPhotoStore1.toList()};u.prototype.getAlbumTags=function(){"use strict";return this.$XPhotoStore2};u.prototype.$XPhotoStore8=function(v){"use strict";this.$XPhotoStore24(v,"id","thumbSrc","thumbDimensions","placeInput");if(!this.$XPhotoStore1.has(v.id)){this.$XPhotoStore1=this.$XPhotoStore1.set(v.id,new n({id:v.id,initialCaption:v.initialCaption||{},pid:v.pid||null,thumbSrc:v.thumbSrc,thumbDimensions:v.thumbDimensions,exifTimeTaken:v.timeTaken,place:v.place,locationSource:!!v.place?c("XPhotoLocationSources").MAGIC_TAGS:c("XPhotoLocationSources").NO_PLACE,mentionsInput:v.mentionsInput,placeInput:v.placeInput,timeTaken:v.realTimeTaken||{year:k,month:l,day:m},encodedCaption:v.encodedCaption?v.encodedCaption:"",isSpherical:v.isSpherical}));if(v.place)this.$XPhotoStore25(v.place,v.id)}else this.$XPhotoStore26(v.id,function(w){return w.set("reUploaded",true)})};u.prototype.$XPhotoStore9=function(v){"use strict";this.$XPhotoStore24(v,"isRecognizingFaces");this.$XPhotoStore6=v.isRecognizingFaces};u.prototype.$XPhotoStore10=function(v){"use strict";this.$XPhotoStore24(v,"id","isRecognizing");this.$XPhotoStore26(v.id,function(w){return w.set("isRecognizing",v.isRecognizing)})};u.prototype.$XPhotoStore11=function(v){"use strict";this.$XPhotoStore24(v,"photoID","facerecWaterfallEvent");new(c("PhotoUploadFacerecWaterfallTypedLogger"))().setEvent(v.facerecWaterfallEvent).setPhotoFbid(v.photoID).log()};u.prototype.$XPhotoStore12=function(v){"use strict";__p&&__p();this.$XPhotoStore24(v,"id","faceboxID","top","left","width","height","recognitions");var w=this.$XPhotoStore1.get(v.id).faceboxes.toSeq().some(function(z){return t(z.top,v.top)&&t(z.left,v.left)&&t(z.width,v.width)&&t(z.height,v.height)});if(w)return;var x=null,y=null;if(!this.$XPhotoStore3.has(v.subjectID)){y=v.subjectID?v.subjectID:null;x=v.value?v.value:null}this.$XPhotoStore26(v.id,function(z){__p&&__p();var A=v.subjectID||null,B=new o({id:v.faceboxID,top:v.top,left:v.left,width:v.width,height:v.height,bestSubjectID:A,bestValue:v.value||null,bestProfilePictureURI:v.profilePictureURI,taggedSubjectID:y,taggedValue:x,recognitions:v.recognitions});z=z.update("faceboxes",function(C){return C.push(B)});if(v.facerecWaterfallEvent)new(c("PhotoUploadFacerecWaterfallTypedLogger"))().setEvent(c("FacerecWaterfallEvent").RECOGNITION_RECEIVED_BY_CLIENT).setPhotoFbid(v.id).setFaceBoxID(v.faceboxID).setRecognizedUser(A).log();if(x){z=z.update("tags",function(C){return C.push(new p({subjectID:v.subjectID,value:x,facebox:B,fromSuggestion:true}))});this.$XPhotoStore27(v.subjectID,v.value,v.profilePictureURI)}return z}.bind(this))};u.prototype.$XPhotoStore13=function(v){"use strict";this.$XPhotoStore24(v,"id","faceboxID");var w=this.$XPhotoStore28(v.id,v.faceboxID,function(w){return w.withMutations(function(x){return x.set("suggestionProcessed",true).set("taggedSubjectID",w.bestSubjectID).set("taggedValue",w.bestValue)})});this.$XPhotoStore26(v.id,function(x){return x.update("tags",function(y){return y.push(new p({subjectID:w.bestSubjectID,value:w.bestValue,facebox:w,fromSuggestion:true}))})})};u.prototype.$XPhotoStore14=function(v){"use strict";this.$XPhotoStore24(v,"id","faceboxID");this.$XPhotoStore28(v.id,v.faceboxID,function(w){return w.set("suggestionProcessed",true)})};u.prototype.$XPhotoStore15=function(v){"use strict";__p&&__p();this.$XPhotoStore24(v,"id","subjectID","value","profilePictureURI");var w=v.id,x=v.facebox;if(x.id)x=this.$XPhotoStore28(w,x.id,function(x){return x.withMutations(function(y){return y.set("taggedSubjectID",v.subjectID).set("taggedValue",v.value)})});else x=new o({top:x.top,left:x.left,width:x.width,height:x.height,taggedSubjectID:v.subjectID,taggedValue:v.value});this.$XPhotoStore26(w,function(y){return y.update("tags",function(z){return z.push(new p({subjectID:v.subjectID,value:v.value,facebox:x}))})});this.$XPhotoStore27(v.subjectID,v.value,v.profilePictureURI)};u.prototype.$XPhotoStore27=function(v,w,x){"use strict";var y=this.$XPhotoStore2.get(v);if(!y)this.$XPhotoStore2=this.$XPhotoStore2.set(v,new q({value:w,profilePictureURI:x}));this.$XPhotoStore2=this.$XPhotoStore2.update(v,function(z){return z.set("count",z.count+1)})};u.prototype.$XPhotoStore16=function(v){"use strict";__p&&__p();this.$XPhotoStore24(v,"id","subjectID");this.$XPhotoStore26(v.id,function(x){return x.withMutations(function(y){return y.update("tags",function(z){return z.filter(function(y){return y.subjectID!==v.subjectID})}).update("faceboxes",function(z){return z.map(function(A){return A.taggedSubjectID===v.subjectID?A.remove("taggedSubjectID").remove("taggedValue"):A})})})});if(this.$XPhotoStore3.has(v.subjectID))return;var w=this.$XPhotoStore2.get(v.subjectID);if(w)if(w.count===1)this.$XPhotoStore2=this.$XPhotoStore2.remove(v.subjectID);else this.$XPhotoStore2=this.$XPhotoStore2.set(v.subjectID,w.update("count",function(x){return x-1}))};u.prototype.$XPhotoStore23=function(v){"use strict";__p&&__p();this.$XPhotoStore24(v,"locationID");var w=v.locationID,x=this.$XPhotoStore1.filter(function(D){return!!D.place&&this.$XPhotoStore29(D.place)===w}.bind(this));for(var y=x,z=Array.isArray(y),A=0,y=z?y:y[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var B;if(z){if(A>=y.length)break;B=y[A++]}else{A=y.next();if(A.done)break;B=A.value}var C=B;this.$XPhotoStore5=this.$XPhotoStore5["delete"](C.id)}this.$XPhotoStore1=this.$XPhotoStore1.map(function(D){var E=D.place;if(E===null)return D;var F=this.$XPhotoStore29(E);if(F!==w)return D;return this.$XPhotoStore30(D)}.bind(this));this.$XPhotoStore4=this.$XPhotoStore4["delete"](w)};u.prototype.$XPhotoStore30=function(v){"use strict";return v.withMutations(function(w){return w.set("place",null).set("locationSource",c("XPhotoLocationSources").NO_PLACE)})};u.prototype.$XPhotoStore31=function(v,w,x){"use strict";return v.withMutations(function(y){return y.set("place",w).set("locationSource",x)})};u.prototype.$XPhotoStore17=function(v){"use strict";this.$XPhotoStore24(v,"subjectID");this.$XPhotoStore2=this.$XPhotoStore2.remove(v.subjectID);this.$XPhotoStore3=this.$XPhotoStore3.add(v.subjectID);this.$XPhotoStore1=this.$XPhotoStore1.map(function(w){return this.$XPhotoStore32(w,v.subjectID)}.bind(this))};u.prototype.$XPhotoStore18=function(v){"use strict";this.$XPhotoStore24(v,"id");this.$XPhotoStore24(v,"encodedCaption");this.$XPhotoStore26(v.id,function(w){return w.set("encodedCaption",v.encodedCaption)})};u.prototype.$XPhotoStore20=function(v){"use strict";this.$XPhotoStore24(v,"id");this.$XPhotoStore24(v,"timeTaken");this.$XPhotoStore26(v.id,function(w){return w.set("timeTaken",v.timeTaken)})};u.prototype.$XPhotoStore21=function(v){"use strict";__p&&__p();this.$XPhotoStore24(v,"id");var w=v.place;this.$XPhotoStore26(v.id,function(x){__p&&__p();if(!v.bulk){if(!!w)x=this.$XPhotoStore31(x,w,c("XPhotoLocationSources").USER_SELECTION);else x=this.$XPhotoStore30(x);this.$XPhotoStore33(x.id,w,!!v.bulk)}else if(x.locationSource===c("XPhotoLocationSources").NO_PLACE||x.locationSource===c("XPhotoLocationSources").ALBUM){if(!!w.uid)x=this.$XPhotoStore31(x,w,c("XPhotoLocationSources").ALBUM);else x=this.$XPhotoStore30(x);this.$XPhotoStore33(x.id,w,!!v.bulk)}return x}.bind(this))};u.prototype.$XPhotoStore29=function(v){"use strict";return v.type==="freeform"?v.text:v.uid};u.prototype.$XPhotoStore33=function(v,w,x){"use strict";__p&&__p();if(x)if(!!w.uid){this.$XPhotoStore34(v);this.$XPhotoStore25(w,v)}else this.$XPhotoStore34(v);else if(w)this.$XPhotoStore25(w,v);else this.$XPhotoStore34(v)};u.prototype.$XPhotoStore34=function(v){"use strict";this.$XPhotoStore35(v);this.$XPhotoStore5=this.$XPhotoStore5["delete"](v)};u.prototype.$XPhotoStore25=function(v,w){"use strict";var x=this.$XPhotoStore29(v);this.$XPhotoStore36(x,v.text);this.$XPhotoStore5=this.$XPhotoStore5.set(w,x)};u.prototype.$XPhotoStore36=function(v,w){"use strict";var x=this.$XPhotoStore4.get(v);if(!x)this.$XPhotoStore4=this.$XPhotoStore4.set(v,new r({locationID:v,name:w,count:0}));this.$XPhotoStore4=this.$XPhotoStore4.update(v,function(y){return y.set("count",y.count+1)})};u.prototype.$XPhotoStore35=function(v){"use strict";var w=this.$XPhotoStore5.get(v),x=this.$XPhotoStore4.get(w);if(!x)return;if(x.count===1)this.$XPhotoStore4=this.$XPhotoStore4["delete"](w);else this.$XPhotoStore4=this.$XPhotoStore4.update(w,function(y){return y.set("count",y.count-1)})};u.prototype.$XPhotoStore22=function(v){"use strict";this.$XPhotoStore24(v,"id","thumbSrc","thumbDimensions");this.$XPhotoStore26(v.id,function(w){return w.withMutations(function(x){return x.set("id",v.id).set("thumbSrc",v.thumbSrc).set("thumbDimensions",v.thumbDimensions).update("faceboxes",function(y){return y.map(this.$XPhotoStore37)}.bind(this)).update("tags",function(y){return y.map(function(z){return z.update("facebox",function(x){return this.$XPhotoStore37(x)}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))};u.prototype.$XPhotoStore37=function(v){"use strict";return v.merge({left:v.top,top:100-(v.left+v.width),width:v.height,height:v.width})};u.prototype.$XPhotoStore19=function(v){"use strict";__p&&__p();var w=v.photoID;if(!w)return;var x=this.$XPhotoStore1.get(w).tags.map(function(z){return z.subjectID});this.$XPhotoStore1=this.$XPhotoStore1.remove(v.photoID);this.$XPhotoStore2=this.$XPhotoStore2.entrySeq().map(function(z){var A=z[0],B=z[1];return x.contains(A)?[A,B.update("count",function(z){return z-1})]:[A,B]}).filter(function(z){return z[1].count>0}).fromEntrySeq().toMap();var y=this.$XPhotoStore5.get(w);if(y)this.$XPhotoStore33(w,null,false)};u.prototype.$XPhotoStore32=function(v,w){"use strict";return v.withMutations(function(v){return v.update("tags",function(x){return x.filter(function(y){return y.subjectID!==w})}).update("faceboxes",function(x){return x.map(function(y){return y.taggedSubjectID===w?y.remove("taggedValue").remove("taggedSubjectID"):y})})})};u.prototype.$XPhotoStore26=function(v,w){"use strict";this.$XPhotoStore1=this.$XPhotoStore1.update(v,this.$XPhotoStore38(w))};u.prototype.$XPhotoStore38=function(v){"use strict";return function(w){if(!w)return w;return v(w)}};u.prototype.$XPhotoStore28=function(v,w,x){"use strict";return this.$XPhotoStore39(v,function(y){return y.findIndex(function(z){return z.id===w})},x)};u.prototype.$XPhotoStore40=function(v,w,x){"use strict";return this.$XPhotoStore39(v,function(y){return y.indexOf(w)},x)};u.prototype.$XPhotoStore39=function(v,w,x){"use strict";var y;this.$XPhotoStore26(v,function(z){var A=z.faceboxes,B=w(A);y=x(A.get(B));return z.update("faceboxes",function(C){return C.set(B,y)})});return y};u.prototype.$XPhotoStore41=function(v){"use strict";var w=this.$XPhotoStore1.get(v);if(w===undefined)throw new Error("Photo "+v+" hasn't been registered");return w};u.prototype.$XPhotoStore24=function(v){"use strict";Array.prototype.slice.call(arguments,1).forEach(function(w){if(v[w]===undefined)throw new Error("Payload missing field: "+w)})};u.prototype.getDispatchToken=function(){"use strict";return this.$XPhotoStore7};f.exports=new u()}),null);
__d("AlbumUploaderAlbumStore",["AlbumUploaderAlbumActionType","AlbumUploaderAlbumStoreConfig","AlbumUploaderDispatcher","AlbumUploaderContributor","EventEmitter","immutable","XPhotoActionType","XPhotoStore"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;c("XPhotoStore");var j=c("immutable").Record({subjectID:null,value:null});h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){"use strict";__p&&__p();i.constructor.call(this);this.$AlbumUploaderAlbumStore1=c("immutable").Set();this.$AlbumUploaderAlbumStore2=c("immutable").Set();this.$AlbumUploaderAlbumStore3=false;c("AlbumUploaderDispatcher").register(function(l){__p&&__p();l.payloads.forEach(function(m){__p&&__p();switch(m.action){case c("AlbumUploaderAlbumActionType").MAKE_SHARED_ALBUM:this.$AlbumUploaderAlbumStore4(m);break;case c("AlbumUploaderAlbumActionType").UNMAKE_SHARED_ALBUM:this.$AlbumUploaderAlbumStore5();break;case c("AlbumUploaderAlbumActionType").ADD_CONTRIBUTOR:this.$AlbumUploaderAlbumStore6(m);break;case c("AlbumUploaderAlbumActionType").REMOVE_CONTRIBUTOR:this.$AlbumUploaderAlbumStore7(m);break;case c("XPhotoActionType").ADD_TAG:this.$AlbumUploaderAlbumStore8(m);break;case c("XPhotoActionType").REMOVE_ALL_SUBJECT_TAGS:this.$AlbumUploaderAlbumStore9(m);break;case c("XPhotoActionType").ADD_FACEBOX:c("AlbumUploaderDispatcher").waitFor([c("XPhotoStore").getDispatchToken()]);this.$AlbumUploaderAlbumStore10(c("XPhotoStore").getAlbumTags());break;default:break}}.bind(this));this.emit("change",{contributors:this.$AlbumUploaderAlbumStore1,isSharedAlbum:this.$AlbumUploaderAlbumStore3})}.bind(this))}k.prototype.getOwnerID=function(){"use strict";return c("AlbumUploaderAlbumStoreConfig").ownerID};k.prototype.$AlbumUploaderAlbumStore4=function(l){"use strict";this.$AlbumUploaderAlbumStore3=true;var m=l.tags;if(m&&m.size>0)m.forEach(function(n,o){this.$AlbumUploaderAlbumStore8(new j({subjectID:o,value:n.value}))}.bind(this))};k.prototype.$AlbumUploaderAlbumStore5=function(){"use strict";this.$AlbumUploaderAlbumStore3=false;this.$AlbumUploaderAlbumStore1=this.$AlbumUploaderAlbumStore1.clear()};k.prototype.$AlbumUploaderAlbumStore6=function(l){"use strict";__p&&__p();this.$AlbumUploaderAlbumStore11(l,"entry");var m=l.entry;if(!this.$AlbumUploaderAlbumStore3)return;if(m.id===this.getOwnerID())return;if(this.$AlbumUploaderAlbumStore1.some(function(n){return n.id===m.id}))return;this.$AlbumUploaderAlbumStore1=this.$AlbumUploaderAlbumStore1.add(m)};k.prototype.$AlbumUploaderAlbumStore7=function(l){"use strict";this.$AlbumUploaderAlbumStore11(l,"entry");var m=l.entry.id;if(!this.$AlbumUploaderAlbumStore3)return;this.$AlbumUploaderAlbumStore2=this.$AlbumUploaderAlbumStore2.add(m);this.$AlbumUploaderAlbumStore1=this.$AlbumUploaderAlbumStore1.filterNot(function(n){return n.id===m})};k.prototype.$AlbumUploaderAlbumStore8=function(l){"use strict";if(!this.$AlbumUploaderAlbumStore3)return;this.$AlbumUploaderAlbumStore11(l,"subjectID","value");var m=l.subjectID,n=l.value;if(this.$AlbumUploaderAlbumStore2.has(m))return;var o=new(c("AlbumUploaderContributor"))({id:m,title:n});this.$AlbumUploaderAlbumStore6({entry:o})};k.prototype.$AlbumUploaderAlbumStore9=function(l){"use strict";if(!this.$AlbumUploaderAlbumStore3)return;this.$AlbumUploaderAlbumStore11(l,"subjectID");var m=l.subjectID,n=new(c("AlbumUploaderContributor"))({id:m});this.$AlbumUploaderAlbumStore7({entry:n})};k.prototype.$AlbumUploaderAlbumStore10=function(l){"use strict";l.map(function(m,n){var o=this.$AlbumUploaderAlbumStore1.some(function(p){return p.id===n});if(o)return;this.$AlbumUploaderAlbumStore8(new j({subjectID:n,value:m.value}))}.bind(this))};k.prototype.$AlbumUploaderAlbumStore11=function(l){"use strict";Array.prototype.slice.call(arguments,1).forEach(function(m){if(l[m]===undefined)throw new Error("Payload missing field: "+m)})};f.exports=new k()}),null);
__d("AlbumUploaderCancelDialog.react",["cx","fbt","LayerHideOnEscape","React","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onHide=function(){this.props.onCancel()}.bind(this),this.onCancel=function(){this.props.onCancel()}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.refs.dialog.layer.subscribe("hide",this.onHide)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("\u00bfDescartar cambios?"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.onCancel})),c("React").createElement(c("XUIDialogBody.react"),null,i._("Si descartas ahora, perder\u00e1s el progreso.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.props.onCancel,label:i._("Volver")}),c("React").createElement(c("XUIButton.react"),{use:"confirm",onClick:this.props.onConfirm,label:i._("Descartar")})))};m.propTypes={shown:l.bool.isRequired,onConfirm:l.func.isRequired,onCancel:l.func.isRequired};f.exports=m}),null);
__d("AlbumUploaderDateType",[],(function a(b,c,d,e,f,g){f.exports={FROM_EXIF:"from_exif",FROM_ALBUM:"from_album"}}),null);
__d("AlbumUploaderDimensions",["immutable"],(function a(b,c,d,e,f,g){f.exports=c("immutable").Map({HEADER_HEIGHT:45,MODAL_MARGIN:4,SIDEBAR_FOOTER_HEIGHT:49,SIDEBAR_CONTENT_PADDING:12,SIDEBAR_WIDTH:300})}),null);
__d("AlbumUploaderErrorDialog.react",["cx","fbt","React","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onCloseButtonClick=function(){this.props.onClose()}.bind(this),o}m.prototype.render=function(){"use strict";if(!this.props.shown)return null;return c("React").createElement(c("XUIDialog.react"),{shown:true,width:500,layerHideOnBlur:false,key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("Error de publicaci\u00f3n"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.onClose})),c("React").createElement(c("XUIDialogBody.react"),null,i._("Se ha producido un error al publicar tus fotos. Vuelve a intentarlo m\u00e1s tarde.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.props.onClose,label:i._("Cerrar")})))};m.propTypes={shown:l.bool.isRequired,onClose:l.func.isRequired};f.exports=m}),null);
__d("AlbumUploaderFooter.react",["cx","fbt","ix","DOMContainer.react","Image.react","React","XUIButton.react","XUIDialogFooter.react"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.getAudienceSelector=function(){if(this.props.audienceSelector===null)return null;return c("React").createElement("span",{className:"_2jtz"},c("React").createElement(c("DOMContainer.react"),null,this.props.audienceSelector))}.bind(this),this.getPublishButton=function(){var t=this.props.isPublishing?i._("Publicando..."):i._("Publicar"),u=this.props.isPublishing?c("React").createElement(c("Image.react"),{src:j("96568")}):null,v=!this.props.isPublishEnabled||this.props.isRecognizingFaces||this.props.isSphericalPhotoUpdating;return c("React").createElement(c("XUIButton.react"),{label:t,use:"confirm",disabled:v,depressed:this.props.isPublishing,className:"_2jt_",image:u,onClick:this.props.onPublishButtonClicked,"data-testid":"album-uploader-publish-button"})}.bind(this),p}n.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialogFooter.react"),{className:"_5s1y",fullBleedBorder:true},this.getAudienceSelector(),this.getPublishButton())};n.propTypes={audienceSelector:m.object,isPublishEnabled:m.bool.isRequired,isPublishing:m.bool.isRequired,isRecognizingFaces:m.bool,isSphericalPhotoUpdating:m.bool,onPublishButtonClicked:m.func.isRequired};f.exports=n}),null);
__d("AlbumUploaderLimitExceededDialog.react",["cx","fbt","React","LayerHideOnEscape","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onHide=function(){this.props.onClose()}.bind(this),this.$AlbumUploaderLimitExceededDialog1=function(){return this.props.isSessionLimit?i._("Se ha alcanzado el l\u00edmite de fotos"):i._("L\u00edmite del \u00e1lbum alcanzado")}.bind(this),this.$AlbumUploaderLimitExceededDialog2=function(){return this.props.isSessionLimit?i._("Has alcanzado el l\u00edmite de fotos por sesi\u00f3n. Si quieres subir m\u00e1s fotos, hazlo en otra sesi\u00f3n."):i._("Has seleccionado demasiadas fotos para este \u00e1lbum. Si quieres subir m\u00e1s fotos, crea otro \u00e1lbum.")}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.refs.dialog.layer.subscribe("hide",this.onHide)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},this.$AlbumUploaderLimitExceededDialog1(),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.props.onClose})),c("React").createElement(c("XUIDialogBody.react"),null,this.$AlbumUploaderLimitExceededDialog2()),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.props.onClose,label:i._("Cerrar")})))};m.propTypes={shown:l.bool.isRequired,onClose:l.func.isRequired,isSessionLimit:l.bool.isRequired};f.exports=m}),null);
__d("AlbumUploaderNetworkOfflineDialog.react",["cx","fbt","React","LayerHideOnEscape","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onHide=function(){this.props.onClose()}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.refs.dialog.layer.subscribe("hide",this.onHide)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("Comprueba la conexi\u00f3n a internet"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.props.onClose})),c("React").createElement(c("XUIDialogBody.react"),null,i._("No tienes conexi\u00f3n a internet. Comprueba la conexi\u00f3n antes de publicar tus fotos.")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.props.onClose,label:i._("Cerrar")})))};m.propTypes={shown:l.bool.isRequired,onClose:l.func.isRequired};f.exports=m}),null);
__d("AlbumUploaderNoPhotoView.react",["cx","fbt","DOMContainer.react","Link.react","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onBasicUploaderLinkClick=function(){this.props.onBasicUploaderLinkClicked()}.bind(this),o}m.prototype.render=function(){"use strict";var n="_553-"+(!this.props.shown?" _553_":"");return c("React").createElement("div",{className:n},c("React").createElement(c("DOMContainer.react"),null,this.props.addMoreButton),c("React").createElement("div",{className:"_5540"},c("React").createElement("span",{className:"_5d0"},i._("\u00bfTienes problemas para subir fotos?")),c("React").createElement(c("Link.react"),{onClick:this.onBasicUploaderLinkClick,className:"_5541"},i._("Prueba la herramienta b\u00e1sica para subir fotos."))))};m.propTypes={shown:l.bool.isRequired,addMoreButton:l.any.isRequired,onBasicUploaderLinkClicked:l.func.isRequired};f.exports=m}),null);
__d("AlbumUploaderOrderType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({MANUAL:null,ASCENDING:null,DESCENDING:null})}),null);
__d("AlbumUploaderAlbumDescriptionInput.react",["fbt","EditorState","MentionsInput.react","MentionsInputTypeaheadView.react","React","createEditorStateWithEntities","getMentionsInputDecorator","getMentionsTextForContentState"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onChange=function(r){this.setState({editorState:r})}.bind(this),this.onBlur=function(){var r=this.state.editorState.getCurrentContent(),s=c("getMentionsTextForContentState")(r);this.props.onBlur(null,s)}.bind(this),this.state={editorState:this.createEditorState()},n}l.prototype.createEditorState=function(){"use strict";var m=this.props.initialDescription;if(m)return c("createEditorStateWithEntities")({text:m.text,ranges:m.ranges,decorator:c("getMentionsInputDecorator")(),addEntityToContentStateFn:function n(o,p){return p.createEntity("MENTION","IMMUTABLE",{id:o.id,isWeak:o.weakreference})}});return c("EditorState").createEmpty(c("getMentionsInputDecorator")())};l.prototype.render=function(){"use strict";var m=h._("Descripci\u00f3n");return c("React").createElement(c("MentionsInput.react"),babelHelpers["extends"]({},this.props,{editorState:this.state.editorState,typeaheadView:c("MentionsInputTypeaheadView.react"),typeaheadViewProps:{},placeholder:m,onChange:this.onChange,onBlur:this.onBlur,spellCheck:true}))};l.propTypes={initialDescription:k.object,mentionsSource:k.object.isRequired,onBlur:k.func.isRequired,className:k.string};f.exports=l}),null);
__d("AlbumUploaderDateSelector.react",["cx","fbt","AlbumUploaderDateType","React","XUIButton.react","XUIProgressiveDatepicker.react","XUIRadioButtonGroup.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={today:new Date()},this.getRadioButtonGroup=function(){return c("React").createElement(c("XUIRadioButtonGroup.react"),{className:"_kjv",selectedValue:this.props.dateType,selectedDepressed:true,onValueChange:this.onDateTypeChange},this.getFromEXIFButton(),this.getFromPhotosButton())}.bind(this),this.getFromEXIFButton=function(){var s=i._("Usar fecha de las fotos"),t=i._("Actualiza la fecha de las fotos seg\u00fan la fecha de la c\u00e1mara");return c("React").createElement(c("XUIButton.react"),{value:c("AlbumUploaderDateType").FROM_EXIF,label:s,title:t,onClick:this.onFromEXIFButtonClicked})}.bind(this),this.getFromPhotosButton=function(){var s=i._("Elegir una fecha"),t=i._("Actualiza la fecha de las fotos seg\u00fan la fecha proporcionada");return c("React").createElement(c("XUIButton.react"),{value:c("AlbumUploaderDateType").FROM_ALBUM,label:s,title:t,onClick:this.onFromPhotosButtonClicked})}.bind(this),this.onDateTypeChange=function(s){this.props.onChange(s,this.props.date)}.bind(this),this.onDateChange=function(s){this.props.onChange(this.props.dateType,s)}.bind(this),this.getDatePicker=function(){if(this.props.dateType!==c("AlbumUploaderDateType").FROM_ALBUM)return null;return c("React").createElement(c("XUIProgressiveDatepicker.react"),{initialYear:this.props.date.year,initialMonth:this.props.date.month,initialDay:this.props.date.day,onDateChange:this.onDateChange,descendingYears:true,menuMaxHeight:250,maxTime:this.state.today.getTime()/1e3,minTime:this.props.minTime,minTimeUnit:"day"})}.bind(this),o}m.prototype.render=function(){"use strict";return c("React").createElement("div",null,this.getRadioButtonGroup(),this.getDatePicker())};m.propTypes={date:l.shape({year:l.number,month:l.number,day:l.number}).isRequired,dateType:l.oneOf([c("AlbumUploaderDateType").FROM_EXIF,c("AlbumUploaderDateType").FROM_ALBUM]),minTime:l.number.isRequired,onChange:l.func.isRequired};f.exports=m}),null);
__d("AlbumUploaderLegacyMentionsInput.react",["csx","DOM","DOMContainer.react","Event","MentionsInput","MentionsTypeaheadAreaView","React","SubscriptionsHandler","Typeahead","TypeaheadAreaCore"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onBlur=function(){this.props.onBlur(this.props.entID,this.mentionsInput.getRawValue())}.bind(this),n}l.prototype.componentDidMount=function(){"use strict";var m=this.props.xhp.markup,n=c("DOM").find(m,"._2-4p"),o=c("DOM").find(m,"._2-4q"),p={ctor:c("MentionsTypeaheadAreaView"),options:{autoSelect:true,disabletagcreation:true,autoflip:false,renderer:"compact",scrollarea:false,maxResults:5}},q={ctor:c("TypeaheadAreaCore"),options:{keepFocused:true,resetOnSelect:false,setValueOnSelect:false}};this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(c("Event").listen(o,"blur",this.onBlur));var r=new(c("Typeahead"))(this.props.xhp.dataSource,p,q,n);this.mentionsInput=new(c("MentionsInput"))(m,r,o,{},null);var s=c("Event").listen(o,"focus",function(){r.init();s.remove()})};l.prototype.componentWillUnmount=function(){"use strict";this.subscriptions.release()};l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:this.props.className},c("React").createElement(c("DOMContainer.react"),null,this.props.xhp.markup))};l.propTypes={entID:k.string,xhp:k.object.isRequired,onBlur:k.func.isRequired,className:k.string};f.exports=l}),null);
__d("AlbumUploaderContextualTagToken.react",["ix","xuiglyph","cx","fbt","Image.react","React"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n=c("React").PropTypes;l=babelHelpers.inherits(o,c("React").PureComponent);m=l&&l.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.onTagRemoved=function(){this.props.onTagRemoved(this.props.subjectID)}.bind(this),q}o.prototype.render=function(){"use strict";var p=this.props.count>1?k._({"*":"etiquetado {count} veces"},[k.param("count",this.props.count,[0])]):k._("etiquetado una vez");return c("React").createElement("div",{className:"_5jvh"},c("React").createElement(c("Image.react"),{className:"_5jvi",src:this.props.profilePictureURI}),c("React").createElement("span",{className:"_zz2"},this.props.value),c("React").createElement("span",{className:"_5jvk"},p),c("React").createElement(c("Image.react"),{src:h("88982"),className:"_zz4",onClick:this.onTagRemoved}))};o.propTypes={subjectID:n.string,value:n.string.isRequired,count:n.number.isRequired,profilePictureURI:n.string.isRequired,onTagRemoved:n.func.isRequired};f.exports=o}),null);
__d("AlbumUploaderTagRemovalIntent",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({REMOVE_PERSON_TAG:null,REMOVE_LOCATION_TAG:null})}),null);
__d("AlbumUploaderTagToken.react",["cx","fbt","ix","AlbumUploaderTagRemovalIntent","Image.react","React","Tooltip"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.onTokenRemoved=function(){if(this.props.type==="location")this.props.onTokenRemoved(c("AlbumUploaderTagRemovalIntent").REMOVE_LOCATION_TAG,{locationID:this.props.locationID,entID:this.props.entID});else if(this.props.type==="tag")this.props.onTokenRemoved(c("AlbumUploaderTagRemovalIntent").REMOVE_PERSON_TAG,{subjectID:this.props.subjectID,entID:this.props.entID});else throw new Error("Unknown Tag type")}.bind(this),this.onMouseEnter=function(){this.props.onMouseEnter&&this.props.onMouseEnter(this.props.subjectID)}.bind(this),this.onMouseLeave=function(){this.props.onMouseLeave&&this.props.onMouseLeave()}.bind(this),p}n.prototype.render=function(){"use strict";var o="_zy_"+(this.props.type==="location"?" _zz0":"")+(this.props.type==="tag"?" _zz1":""),p={};if(this.props.type==="tag"&&this.props.count!==undefined){var q=this.props.count>1?i._({"*":"Etiquetado {count} veces en este \u00e1lbum"},[i.param("count",this.props.count,[0])]):i._("Etiquetado una vez en este \u00e1lbum");p=c("Tooltip").propsFor(q);p["data-tooltip-alignh"]="right"}return c("React").createElement("span",babelHelpers["extends"]({className:o,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},p),c("React").createElement("span",{className:"_zz2"},this.props.value),c("React").createElement(c("Image.react"),{src:j("29130"),className:"_zz4",onClick:this.onTokenRemoved}))};n.propTypes={type:m.oneOf(["location","tag"]).isRequired,entID:m.string,subjectID:m.string,value:m.string.isRequired,count:m.number,onTokenRemoved:m.func.isRequired,onMouseEnter:m.func,onMouseLeave:m.func,locationID:m.string};f.exports=n}),null);
__d("AlbumUploaderTagsInput.react",["cx","fbt","ix","AlbumUploaderContextualTagToken.react","Image.react","immutable","LayerHideOnBlur","LayerHideOnEscape","React","ReactComponentWithPureRenderMixin","ReactLayeredComponentMixin_DEPRECATED","AlbumUploaderTagToken.react","XUIContextualDialog.react","XUIContextualDialogBody.react","WorkModeConfig"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l={SMALL:15,MEDIUM:25,LARGE:40,EXTRA_LARGE:55},m=c("React").createClass({displayName:"AlbumUploaderTagsInput",mixins:[c("ReactComponentWithPureRenderMixin"),c("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{tags:k.instanceOf(c("immutable").Map).isRequired,onTagRemoved:k.func.isRequired,isRecognizingFaces:k.bool.isRequired,className:k.string,viewportSize:k.string,showAllTags:k.bool,prependThrobber:k.bool,locationTags:k.instanceOf(c("immutable").Map).isRequired},getDefaultProps:function n(){return{showAllTags:false,prependThrobber:false}},getInitialState:function n(){return{dialogShown:false}},componentDidUpdate:function n(o,p){var q=this.getSliceIndex(o.tags.toKeyedSeq().toArray());if(q>=o.tags.size)this.setState({dialogShown:false})},onTagRemoved:function n(o){this.props.onTagRemoved(null,o)},getSliceIndex:function n(o){var p=0,q=0;while(p<o.length&&q+o[p].value.length<l[this.props.viewportSize]){q+=o[p].value.length;p+=1}return p},getContextualDialogEntries:function n(){var o=this.getSliceIndex(this.props.tags.toKeyedSeq().toArray());return this.props.tags.toKeyedSeq().takeLast(this.props.tags.size-o).mapEntries(function(p){var q=p[0],r=p[1];return[q,c("React").createElement(c("AlbumUploaderContextualTagToken.react"),{key:q,subjectID:q,value:r.value,count:r.count,profilePictureURI:r.profilePictureURI,onTagRemoved:this.onTagRemoved})]}.bind(this))},onRemainingTagsTokenClick:function n(){this.setState({dialogShown:true})},onToggleDialog:function n(o){if(!o)this.setState({dialogShown:false})},renderLayers:function n(){if(!this.refs.remainingTagsTrigger||!this.state.dialogShown)return null;return{dialog:c("React").createElement(c("XUIContextualDialog.react"),{shown:true,contextRef:function(){return this.refs.remainingTagsTrigger}.bind(this),position:"below",alignment:"right",onToggle:this.onToggleDialog,behaviors:{LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape")}},c("React").createElement(c("XUIContextualDialogBody.react"),null,c("React").createElement("div",{className:"_5rre"},this.getContextualDialogEntries())))}},render:function n(){__p&&__p();var o=this.props.showAllTags?this.props.tags.size:this.getSliceIndex(this.props.tags.toKeyedSeq().toArray()),p=this.props.tags.size-o,q,r,s=this.props.tags.toKeyedSeq().mapEntries(function(w){var x=w[0],y=w[1];return[x,c("React").createElement(c("AlbumUploaderTagToken.react"),{key:x,type:"tag",subjectID:x,value:y.value,count:y.count,onTokenRemoved:this.props.onTagRemoved})]}.bind(this)).take(o).toArray(),t=this.props.locationTags.toKeyedSeq().mapEntries(function(w){var x=w[0],y=w[1];return[x,c("React").createElement(c("AlbumUploaderTagToken.react"),{key:x,type:"location",value:y.name,count:y.count,locationID:x,onTokenRemoved:this.props.onTagRemoved})]}.bind(this)).toArray();if(this.props.tags.size===0&&!this.props.isRecognizingFaces)if(c("WorkModeConfig").is_work_user)q=c("React").createElement("div",{className:"_1t2a"},i._("Haz clic en tus fotos para etiquetar a un compa\u00f1ero de trabajo"));else q=c("React").createElement("div",{className:"_1t2a"},i._("Haz clic en tus fotos para etiquetar a un amigo"));if(p>0){var u;if(s.length>0)u=p===1?i._("y una persona m\u00e1s"):i._("y {count} personas m\u00e1s",[i.param("count",p)]);else u=i._({"*":"{count} personas"},[i.param("count",p,[0])]);r=c("React").createElement("span",{className:"_zy_ _5rrf",onClick:this.onRemainingTagsTokenClick,ref:"remainingTagsTrigger",role:"presentation"},c("React").createElement("span",{className:"_zz2"},u))}var v=this.props.isRecognizingFaces?c("React").createElement(c("Image.react"),{className:"_4p35",src:j("96569")}):null;return c("React").createElement("div",{className:this.props.className},this.props.prependThrobber?v:null,q,s,t,r,this.props.prependThrobber?null:v)}});f.exports=m}),null);
__d("extractLocationFromEvent",[],(function a(b,c,d,e,f,g){function h(event){if(event===undefined)return null;else if(event.type==="freeform")return{location:event.text};else return{location:event.text,location_data:event.uid}}f.exports=h}),null);
__d("AlbumUploaderSidebar.react",["cx","fbt","ix","AlbumUploaderAlbumDescriptionInput.react","AlbumUploaderAlbumStore","AlbumUploaderDimensions","Arbiter","AsyncRequest","CurrentUser","AlbumUploaderDateSelector.react","DOM","DOMContainer.react","Image.react","immutable","InputLabel_DEPRECATED.react","InputLabelLabel_DEPRECATED.react","Layout.react","AlbumUploaderLegacyMentionsInput.react","PhotosConst","PhotoUploadResolution","React","ReactDOM","SharedAlbumContributorsTokenizer.react","SubscriptionsHandler","AlbumUploaderTagsInput.react","Tooltip.react","XUIButton.react","XUICheckboxInput.react","XUIGrayText.react","XUITextInput.react","extractLocationFromEvent","getObjectValues"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Layout.react").Column,n=c("Layout.react").FillColumn,o=c("React").PropTypes;k=babelHelpers.inherits(p,c("React").PureComponent);l=k&&k.prototype;function p(q){__p&&__p();l.constructor.call(this,q);this.isLocationDefined=function(){return this.state.location&&(this.state.location.location||this.state.location.location_data)}.bind(this);this.onDataChanged=function(s){__p&&__p();this.props.onDataChanged(s,function(){__p&&__p();if(s.type!=="place"||this.props.isNewAlbum){var t={fbid:this.props.albumID,name:this.state.name,desc:this.state.description};t=babelHelpers["extends"]({},t,this.getLocation());s=babelHelpers["extends"]({},t,s);var u;if(this.props.setToken){s=babelHelpers["extends"]({},s,{set:this.props.setToken});u="/ajax/photos/sets/edit/"}else u="/ajax/photos/album/edit/";new(c("AsyncRequest"))(u).setMethod("POST").setData(s).send()}}.bind(this))}.bind(this);this.getTitleDescriptionFields=function(){return c("React").createElement("div",{className:"__5y"},c("React").createElement("div",{className:"_4p89"},this.getTitleInput()),this.getDescriptionInput())}.bind(this);this.getDescriptionInput=function(){if(this.props.descriptionMentionsInput)return c("React").createElement("div",{className:"_30kr"},c("React").createElement(c("AlbumUploaderLegacyMentionsInput.react"),{xhp:this.props.descriptionMentionsInput,onBlur:this.onBlurDescription}));return c("React").createElement("div",{className:"_4p8a"},c("React").createElement(c("AlbumUploaderAlbumDescriptionInput.react"),{initialDescription:this.props.description,mentionsSource:this.props.mentionsSource,onBlur:this.onBlurDescription,className:"_4p88"}))}.bind(this);this.getAudienceSelector=function(){if(this.props.audienceSelector===null)return null;return c("React").createElement("span",{className:"_2jtz"},c("React").createElement(c("DOMContainer.react"),null,this.props.audienceSelector))}.bind(this);this.getPublishButton=function(){var s=this.props.isPublishing?i._("Publicando..."):i._("Publicar"),t=this.props.isPublishing?c("React").createElement(c("Image.react"),{src:j("96568")}):null,u=!this.props.isPublishEnabled||this.props.isRecognizingFaces||this.props.isSphericalPhotoUpdating;return c("React").createElement(c("XUIButton.react"),{label:s,use:"confirm",disabled:u,depressed:this.props.isPublishing,className:"_2jt_",image:t,onClick:this.props.onPublishButtonClicked,"data-testid":"album-uploader-publish-button"})}.bind(this);this.getChangeDateSection=function(){if(this.props.noBackdate)return null;if(this.props.setToken)return null;return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",shade:"medium",size:"small",weight:"bold"},i._("Cambiar fecha")),c("React").createElement(c("AlbumUploaderDateSelector.react"),{dateType:this.state.dateType,date:this.state.date,onChange:this.onDateChanged,minTime:this.props.minTime}))}.bind(this);this.onDateChanged=function(s,t){this.setState({dateType:s,date:t});this.props.onDateChanged(s,t)}.bind(this);this.getAlbumTagsSection=function(){if(this.props.isPageAlbum)return null;return c("React").createElement("div",{className:"_4p8c"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",shade:"medium",size:"small",weight:"bold"},i._("Personas etiquetadas en este \u00e1lbum")),c("React").createElement("div",{className:"_4p36"},c("React").createElement(c("AlbumUploaderTagsInput.react"),{tags:this.props.tags,locationTags:this.props.locationTags,onTagRemoved:this.props.onTagRemoved,isRecognizingFaces:this.props.isRecognizingFaces,className:"_4p37",showAllTags:true})))}.bind(this);this.onBlurTitle=function(event){var s=event.target.value;if(s!==this.state.title){this.setState({title:s});this.onDataChanged({type:"title",name:s})}}.bind(this);this.onBlurDescription=function(s,t){if(t!==this.state.description){this.setState({description:t});this.onDataChanged({type:"description",desc:t})}}.bind(this);this.onChangeLocation=function(s){this.setState({location:s});var t={type:"place"};t=babelHelpers["extends"]({},t,s);this.onDataChanged(t)}.bind(this);this.getLocation=function(){if(!this.isLocationDefined()){if(!this.props.setToken)return null;return{location_data:0}}if(this.state.location.type==="freeform")return{location:this.state.location.text};else return{location_data:this.state.location.uid}}.bind(this);this.onQualityChange=function(){this.props.onQualityChanged(this.props.quality===c("PhotoUploadResolution").HIGH?c("PhotoUploadResolution").STANDARD:c("PhotoUploadResolution").HIGH)}.bind(this);this.$AlbumUploaderSidebar1=function(){if(!this.props.isPageAlbum)return null;return c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_3c0u"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.shouldHideFromNewsfeed,onChange:this.onHideFromNewsfeedChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_3c0v"},i._("Ocultar de la secci\u00f3n de noticias")))}.bind(this);this.onHideFromNewsfeedChange=function(){this.props.onHideFromNewsfeedChange()}.bind(this);this.canMakeSharedAlbum=function(){if(this.props.isGroupAlbum||this.props.isPageAlbum||!this.props.isNewAlbum||this.props.disableSharedAlbum)return false;return true}.bind(this);var r=q.description&&q.description.text||"";this.state={title:q.title,description:r,location:null,date:q.date}}p.prototype.componentDidMount=function(){__p&&__p();this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(c("Arbiter").subscribe(["PhotoAlbumPlacesTypeahead.SELECTED_PLACE","PhotoAlbumPlacesTypeahead.RESET_PLACE"],function(q,event){var r={type:"place"};r=babelHelpers["extends"]({},r,c("extractLocationFromEvent")(event));this.onChangeLocation(r)}.bind(this)),c("Arbiter").subscribe("PhotoAlbumPlacesTypeahead.FOCUSED",function(q,event){if(this.refs.albumPlace){var r=c("ReactDOM").findDOMNode(this.refs.albumPlace),s=c("DOM").find(r,".uiTypeaheadView");s.style.left=r.offsetLeft+"px";s.style.top=r.offsetTop+r.offsetHeight+"px"}}.bind(this)))};p.prototype.componentWillUnmount=function(){this.subscriptions.release()};p.prototype.render=function(){var q=i._("Almacenar im\u00e1genes grandes (m\u00e1s lento)"),r=this.props.sidebarHeight-c("AlbumUploaderDimensions").get("SIDEBAR_FOOTER_HEIGHT")-2*c("AlbumUploaderDimensions").get("SIDEBAR_CONTENT_PADDING"),s=this.props.hasNewFooter?null:c("React").createElement(c("Layout.react"),{className:"_3bg"},c("React").createElement(m,null,this.getAudienceSelector()),c("React").createElement(n,null,this.getPublishButton())),t=this.props.isVideoOnlyAlbum?null:c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",shade:"medium",size:"small",weight:"bold"},this.canMakeSharedAlbum()?i._("M\u00e1s opciones"):i._("Opciones")),c("React").createElement(c("Tooltip.react"),{className:"_2pic",tooltip:q},c("React").createElement(c("InputLabel_DEPRECATED.react"),{className:"_1e74"},c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.quality===c("PhotoUploadResolution").HIGH,aria:q,onChange:this.onQualityChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2jty"},i._("Alta resoluci\u00f3n")))),this.$AlbumUploaderSidebar1());if(this.props.isSharingParty)return c("React").createElement("div",{style:{height:this.props.sidebarHeight},className:"_7r2"},c("React").createElement("div",{style:{height:r},className:"_4ydr"},t,this.props.isVideoOnlyAlbum?null:this.getChangeDateSection()),s);return c("React").createElement("div",{style:{height:this.props.sidebarHeight},className:"_7r2"},c("React").createElement("div",{style:{height:r},className:"_4ydr"},this.getTitleDescriptionFields(),c("React").createElement("div",{ref:"albumPlace",className:"_4p8b"},c("React").createElement(c("DOMContainer.react"),null,this.props.placesTypeahead)),this.props.isVideoOnlyAlbum?null:this.getAlbumTagsSection(),this.getContributorsSection(),t,this.props.isVideoOnlyAlbum?null:this.getChangeDateSection()),s)};p.prototype.getTitleInput=function(){var q=i._("Nombre del \u00e1lbum");return c("React").createElement(c("XUITextInput.react"),{onBlur:this.onBlurTitle,className:"_4p87",placeholder:q,defaultValue:this.state.title,maxLength:c("PhotosConst").ALBUM_NAME_MAXLEN})};p.prototype.getContributorsSection=function(){if(!this.canMakeSharedAlbum())return null;var q=this.props.isSharedAlbum?c("React").createElement(c("SharedAlbumContributorsTokenizer.react"),{className:"_5p7t",dataSource:this.props.contributorSource,entries:this.props.contributors.toArray(),ownerID:c("AlbumUploaderAlbumStore").getOwnerID(),onContributorAdded:this.props.onContributorAdded,onContributorRemoved:this.props.onContributorRemoved}):null,r=this.props.isSharedAlbum?c("React").createElement(c("XUIGrayText.react"),{className:"_3-8w",display:"block",shade:"light",size:"small"},i._("A\u00f1ade amigos como colaboradores para que puedan incluir sus propias fotos, publicaciones con texto y m\u00e1s")):null,s=c("CurrentUser").isWorkUser()?i._("Permite que los compa\u00f1eros de trabajo a\u00f1adan fotos"):i._("Permitir que tus amigos a\u00f1adan fotos");return c("React").createElement("div",{className:"_3-8y"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-95",display:"block",shade:"medium",size:"small",weight:"bold"},s),c("React").createElement(c("InputLabel_DEPRECATED.react"),null,c("React").createElement(c("XUICheckboxInput.react"),{checked:this.props.isSharedAlbum,onChange:this.props.onMakeSharedAlbumChange}),c("React").createElement(c("InputLabelLabel_DEPRECATED.react"),{className:"_2jty"},i._("A\u00f1adir colaboradores"))),q,r)};p.propTypes={date:o.shape({year:o.number,month:o.number,day:o.number}).isRequired,minTime:o.number.isRequired,albumID:o.string.isRequired,title:o.string,description:o.object,mentionsSource:o.object,descriptionMentionsInput:o.object,placesTypeahead:o.object.isRequired,tags:o.instanceOf(c("immutable").Map).isRequired,isRecognizingFaces:o.bool,isSphericalPhotoUpdating:o.bool,setToken:o.string,onDataChanged:o.func.isRequired,onTagRemoved:o.func.isRequired,quality:o.oneOf(c("getObjectValues")(c("PhotoUploadResolution"))).isRequired,showQualitySelector:o.bool,onQualityChanged:o.func,sidebarHeight:o.number.isRequired,audienceSelector:o.object,isPublishEnabled:o.bool.isRequired,isPublishing:o.bool.isRequired,onPublishButtonClicked:o.func.isRequired,onDateChanged:o.func.isRequired,contributorSource:o.object.isRequired,contributors:o.object.isRequired,onContributorAdded:o.func.isRequired,onContributorRemoved:o.func.isRequired,isGroupAlbum:o.bool.isRequired,isNewAlbum:o.bool.isRequired,isSharedAlbum:o.bool.isRequired,isSharingParty:o.bool.isRequired,isPageAlbum:o.bool.isRequired,noBackdate:o.bool,onHideFromNewsfeedChange:o.func,shouldHideFromNewsfeed:o.bool,locationTags:o.instanceOf(c("immutable").Map).isRequired,disableSharedAlbum:o.bool,isVideoOnlyAlbum:o.bool};f.exports=p}),null);
__d("AlbumUploaderChangeOrderButton.react",["ix","cx","fbt","xuiglyph","Image.react","AlbumUploaderOrderType","React","XUIButton.react"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n=c("React").PropTypes,o=[c("AlbumUploaderOrderType").MANUAL,c("AlbumUploaderOrderType").ASCENDING,c("AlbumUploaderOrderType").DESCENDING];l=babelHelpers.inherits(p,c("React").Component);m=l&&l.prototype;function p(){var q,r;"use strict";for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=m.constructor).call.apply(q,[this].concat(t)),this.onChangeOrderButtonClick=function(){var v=(o.indexOf(this.props.orderType)+1)%o.length;this.props.onOrderChanged(o[v])}.bind(this),r}p.getButtonSize=function(q){"use strict";return"medium"};p.prototype.render=function(){"use strict";var q=null;if(this.props.orderType===c("AlbumUploaderOrderType").ASCENDING)q=h("89980");else if(this.props.orderType===c("AlbumUploaderOrderType").DESCENDING)q=h("89944");var r=q?c("React").createElement(c("Image.react"),{src:q}):null;return c("React").createElement(c("XUIButton.react"),{image:r,label:j._("Ordenar por fecha de captura"),onClick:this.onChangeOrderButtonClick,className:"_5sib",disabled:!this.props.isOrderByEnabled})};p.propTypes={isOrderByEnabled:n.bool.isRequired,orderType:n.oneOf(Object.keys(c("AlbumUploaderOrderType"))).isRequired,onOrderChanged:n.func.isRequired};f.exports=p}),null);
__d("AlbumUploaderSlimHeader.react",["cx","ix","fbt","AlbumUploaderChangeOrderButton.react","DOMContainer.react","Image.react","AlbumUploaderOrderType","React","XUIDialogTitle.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.isUploading||this.props.isPublishing?c("React").createElement(c("Image.react"),{className:"_264p",src:i("96569")}):null,p=this.props.isNewAlbum?j._("Crear \u00e1lbum"):j._("A\u00f1adir fotos");return c("React").createElement(c("XUIDialogTitle.react"),{className:"_yb2"},c("React").createElement("div",{className:"_264q"},c("React").createElement(c("XUIText.react"),{size:"medium",weight:"bold"}),p,o),c("React").createElement("div",{className:"_yb3"},c("React").createElement(c("DOMContainer.react"),null,this.props.addMoreButton),c("React").createElement(c("AlbumUploaderChangeOrderButton.react"),{isOrderByEnabled:this.props.isOrderByEnabled,orderType:this.props.orderType,onOrderChanged:this.props.onOrderChanged})))};function n(){k.apply(this,arguments)}n.propTypes={isNewAlbum:m.bool.isRequired,addMoreButton:m.any.isRequired,isUploading:m.bool.isRequired,isPublishing:m.bool.isRequired,isOrderByEnabled:m.bool.isRequired,orderType:m.oneOf(Object.keys(c("AlbumUploaderOrderType"))).isRequired,onOrderChanged:m.func.isRequired};f.exports=n}),null);
__d("AlbumUploaderViewportSize",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({SMALL:null,MEDIUM:null,LARGE:null,EXTRA_LARGE:null})}),null);
__d("AlbumVideoUploadController",["AlbumMediaUploadUtils","ArbiterMixin","SubscriptionsHandler","VideoUploader","VideoUploadFile","VideoUploadProgressBar","JSLogger","mixin","Set","Run"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k){__p&&__p();i.constructor.call(this);this.$AlbumVideoUploadController5=[];this.$AlbumVideoUploadController6=new(c("Set"))();this.$AlbumVideoUploadController7=false;this.$AlbumVideoUploadController3=k;this.$AlbumVideoUploadController1=k.uploadParams;this.$AlbumVideoUploadController2=new(c("SubscriptionsHandler"))();this.$AlbumVideoUploadController4=c("JSLogger").create("videosInAlbums");c("Run").onLeave(function(){return this.cancelUploads()}.bind(this));c("Run").onUnload(function(){return this.cancelUploads()}.bind(this))}j.prototype.uploadFiles=function(k){k.forEach(function(l){if(!c("AlbumMediaUploadUtils").hasVideos([l.name]))return;this.$AlbumVideoUploadController8(l)}.bind(this));if(!this.$AlbumVideoUploadController7)this.uploadNextVideo(k[0])};j.prototype.uploadNextVideo=function(k){__p&&__p();this.$AlbumVideoUploadController7=true;if(!k)return;var l=JSON.parse(JSON.stringify(this.$AlbumVideoUploadController1[0]));l.isMultiMediaPost=true;var m=new(c("VideoUploader"))(l);this.$AlbumVideoUploadController5[k.uploadID]=m;var n=c("VideoUploadFile").fromFile(k);this.$AlbumVideoUploadController2.addSubscriptions(m.subscribe("upload-started",this.$AlbumVideoUploadController9.bind(this,k)),m.subscribe("upload-progressed",this.$AlbumVideoUploadController10.bind(this,k)),m.subscribe("upload-failed",this.$AlbumVideoUploadController11.bind(this,k)),m.subscribe("upload-finished",this.$AlbumVideoUploadController12.bind(this,k)));try{m.upload(n)}catch(o){this.$AlbumVideoUploadController4.error("error_upload_album_video_file",o);throw o}};j.prototype.$AlbumVideoUploadController12=function(k,l,m){this.inform("video_upload_done",{uploadID:k.uploadID,videoFBID:m.video_id,fileURL:URL.createObjectURL(k)});this.$AlbumVideoUploadController7=false;this.$AlbumVideoUploadController6["delete"](k);if(this.$AlbumVideoUploadController6.size>0){var n=this.$AlbumVideoUploadController6.values().next().value;this.uploadNextVideo(n)}};j.prototype.cancelUpload=function(k){__p&&__p();var l=this.$AlbumVideoUploadController5[k];if(l){l.cancel();if(this.$AlbumVideoUploadController6.size>0){var m=this.$AlbumVideoUploadController6.values().next().value;this.uploadNextVideo(m)}else this.$AlbumVideoUploadController7=false}this.deleteUpload(k)};j.prototype.deleteUpload=function(k){this.$AlbumVideoUploadController6.forEach(function(l){if(l.uploadID===k)this.$AlbumVideoUploadController6["delete"](l)}.bind(this))};j.prototype.cancelUploads=function(){this.$AlbumVideoUploadController6.forEach(function(k){var l=k.uploadID;this.$AlbumVideoUploadController6["delete"](k);var m=this.$AlbumVideoUploadController5[l];if(m)m.abandon()}.bind(this));this.$AlbumVideoUploadController7=false};j.prototype.$AlbumVideoUploadController8=function(k){this.$AlbumVideoUploadController6.add(k);this.inform("video_upload_queued",{uploadID:k.uploadID,name:k.name,fileURL:URL.createObjectURL(k),state:"VIDEO_UPLOAD_ENQUEUED"})};j.prototype.$AlbumVideoUploadController9=function(k,l){this.inform("video_upload_start",{uploadID:k.uploadID,uploadProgress:0})};j.prototype.$AlbumVideoUploadController10=function(k,l,m){var n=c("VideoUploadProgressBar").computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);this.inform("video_upload_progress",{uploadID:k.uploadID,uploadProgress:n})};j.prototype.$AlbumVideoUploadController11=function(k,l,m){var n={code:m.error_code,description:m.error_description,summary:m.error_summary,"transient":m.error_is_transient};this.inform("video_upload_failed",n)};f.exports=j}),null);
__d("XEditableFailedUpload.react",["ix","xuiglyph","cx","fbt","PhotosUploadWaterfallErrorCodes","Image.react","React","XUIButton.react"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n=c("React").PropTypes;l=babelHelpers.inherits(o,c("React").PureComponent);m=l&&l.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=m.constructor).call.apply(p,[this].concat(s)),this.onDismiss=function(){this.props.onDismissed(this.props.id)}.bind(this),this.onRetry=function(){this.props.onRetried(this.props.id)}.bind(this),this.getDescription=function(){if(!this.props.error.code)return null;var u=this.props.filename;switch(this.props.error.code){case c("PhotosUploadWaterfallErrorCodes").FILE_IO:return k._("No se ha podido abrir {filename}. Aseg\u00farate de que no se ha borrado de tu ordenador.",[k.param("filename",u)]);case c("PhotosUploadWaterfallErrorCodes").EMPTY_FILE_LOADED:case c("PhotosUploadWaterfallErrorCodes").IMAGE_IO:return k._("No hemos podido acceder al contenido de {filename}. Comprueba que sea una imagen con formato jpg, gif o png.",[k.param("filename",u)]);case c("PhotosUploadWaterfallErrorCodes").UPLOAD_IO:return k._("No podemos subir el archivo {filename}. Comprueba que tengas conexi\u00f3n a internet",[k.param("filename",u)]);default:return this.props.description}}.bind(this),q}o.prototype.render=function(){"use strict";var p;if(this.props.error.code===c("PhotosUploadWaterfallErrorCodes").UPLOAD_IO)p=c("React").createElement("div",null,c("React").createElement(c("XUIButton.react"),{label:k._("Cancelar"),onClick:this.onDismiss}),c("React").createElement(c("XUIButton.react"),{label:k._("Volver a intentar"),use:"confirm",onClick:this.onRetry}));else p=c("React").createElement(c("XUIButton.react"),{label:k._("OK"),onClick:this.onDismiss});return c("React").createElement("div",{className:"_1l-7"},c("React").createElement(c("Image.react"),{src:h("88985"),className:"_1l-8",onClick:this.onDismiss}),c("React").createElement(c("Image.react"),{src:"/images/photos/warning-glyph.png",className:"_1l-9"}),c("React").createElement("div",{className:"_1l-a"},this.props.error.summary),c("React").createElement("div",{className:"_1l-b"},this.getDescription()),c("React").createElement("div",{className:"_1l-c"},this.props.filename),p)};o.propTypes={id:n.string.isRequired,filename:n.string.isRequired,error:n.shape({code:n.number,summary:n.string,description:n.string}).isRequired,onDismissed:n.func.isRequired,onRetried:n.func.isRequired};f.exports=o}),null);
__d("XEditablePhotoFacebox.react",["cx","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getFaceboxStyle=function(){return{top:this.props.top+"%",left:this.props.left+"%",width:this.props.width+"%",height:this.props.height+"%"}}.bind(this),this.onClick=function(event){event.stopPropagation()},this.onMouseUp=function(event){event.stopPropagation();this.props.onClick(this.props.facebox,event.clientY)}.bind(this),n}l.prototype.render=function(){"use strict";var m="_21zc"+(this.props.isActive?" _340g":"");return c("React").createElement("div",{className:m,onClick:this.onClick,onMouseUp:this.onMouseUp,role:"presentation",style:this.getFaceboxStyle()})};l.propTypes={top:k.number.isRequired,left:k.number.isRequired,width:k.number.isRequired,height:k.number.isRequired,onClick:k.func.isRequired,isActive:k.bool.isRequired};f.exports=l}),null);
__d("XEditablePhotoTagbox.react",["cx","Image.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m={top:this.props.top+"%",left:this.props.left+"%",width:this.props.width+"%",height:this.props.height+"%"},n="fbPhotosPhotoTagboxBase"+(this.props.shown?" _334e":"");return c("React").createElement("div",{className:n,style:m,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},c("React").createElement("div",{className:"tag"},c("React").createElement("div",{className:"tagPointer"},c("React").createElement(c("Image.react"),{className:"tagArrow",src:"/images/light_pointer_padded_upward.png"}),c("React").createElement("div",{className:"tagName"},this.props.value))))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={top:k.number.isRequired,left:k.number.isRequired,width:k.number.isRequired,height:k.number.isRequired,value:k.string.isRequired,shown:k.bool.isRequired};f.exports=l}),null);
__d("XEditablePhotoTypeaheadPresenter",["cx","Map","React","TypeaheadViewPropTypes","XUITypeaheadView.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=-2e3,l=-1e3;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_363s"},c("React").createElement(c("XUITypeaheadView.react"),this.props))};function m(){"use strict";i.apply(this,arguments)}m.propTypes=c("TypeaheadViewPropTypes");function n(o,p){"use strict";__p&&__p();this.ViewRenderer=m;this.useLayer=false;this.maxEntries=p.maxEntries;this.$XEditablePhotoTypeaheadPresenter1=new(c("Map"))();this.$XEditablePhotoTypeaheadPresenter2=o.featuredTaggees.concat(o.friendTaggees,o.albumTags);this.$XEditablePhotoTypeaheadPresenter3=this.$XEditablePhotoTypeaheadPresenter2.slice(0);this.$XEditablePhotoTypeaheadPresenter3.forEach(function(q,r){return this.$XEditablePhotoTypeaheadPresenter1.set(q.toString(),l+r)}.bind(this));this.$XEditablePhotoTypeaheadPresenter4=new(c("Map"))();this.$XEditablePhotoTypeaheadPresenter5=""}n.prototype.setDynamicSuggestions=function(o){"use strict";this.$XEditablePhotoTypeaheadPresenter4=new(c("Map"))();o.forEach(function(p,q){return this.$XEditablePhotoTypeaheadPresenter4.set(p.toString(),k+q)}.bind(this));this.$XEditablePhotoTypeaheadPresenter3=o.concat(this.$XEditablePhotoTypeaheadPresenter2)};n.prototype.sortEntries=function(o,p,q){"use strict";__p&&__p();var r;if(q===""){this.$XEditablePhotoTypeaheadPresenter5=q;var s=[],t=new(c("Map"))();this.$XEditablePhotoTypeaheadPresenter3.forEach(function(y){return t.set(y.toString(),-1)});var u=0;for(r=0;r<o.length;r++){if(t.has(o[r].getUniqueID())){t.set(o[r].getUniqueID(),r);u++}if(u>=this.maxEntries)break}t.forEach(function(y,z){if(y!==-1)s.push(o[y])});for(r=0;r<o.length;r++){if(!t.has(o[r].getUniqueID()))s.push(o[r]);if(s.length>=this.maxEntries)break}return s}p=p||[];q=q||"";if(p.length===this.maxEntries)if(this.$XEditablePhotoTypeaheadPresenter5===q)return p;else{this.$XEditablePhotoTypeaheadPresenter5=q;return this.$XEditablePhotoTypeaheadPresenter6(o).slice(0,this.maxEntries)}var v={},w={};for(r=0;r<p.length&&r<this.maxEntries;r++)v[p[r].getUniqueID()]=true;o.forEach(function(y){return w[y.getUniqueID()]=true});var x=p.filter(function(y){return w[y.getUniqueID()]});o=o.filter(function(y){return!v[y.getUniqueID()]});o=this.$XEditablePhotoTypeaheadPresenter6(o);this.$XEditablePhotoTypeaheadPresenter5=q;return x.concat(o).slice(0,this.maxEntries)};n.prototype.$XEditablePhotoTypeaheadPresenter6=function(o){"use strict";var p={};o.forEach(function(q,r){return p[q.getUniqueID()]=r});return o.sort(function(q,r){return this.$XEditablePhotoTypeaheadPresenter7(q,p)-this.$XEditablePhotoTypeaheadPresenter7(r,p)}.bind(this))};n.prototype.$XEditablePhotoTypeaheadPresenter7=function(o,p){"use strict";var q=o.getUniqueID();return this.$XEditablePhotoTypeaheadPresenter4.get(q)||this.$XEditablePhotoTypeaheadPresenter1.get(q)||p[q]};f.exports=n}),null);
__d("AlbumUploaderPhotoTagger.react",["cx","fbt","ix","Image.react","immutable","LayerHideOnBlur","LayerHideOnEscape","Parent","React","ReactDOM","UserAgent","Vector","XEditablePhotoFacebox.react","XEditablePhotoTagbox.react","XEditablePhotoTypeaheadPresenter","XUIContextualDialog.react","XUIContextualDialogBody.react","XUITypeahead.react","clamp","getActiveElement"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k=c("React").PropTypes,l=60,m=210,n=5,o=42,p=60,q=n*o+p,r=c("React").createClass({displayName:"AlbumUploaderPhotoTagger",propTypes:{photoID:k.string.isRequired,thumbDimensions:k.object.isRequired,faceboxes:k.instanceOf(c("immutable").List).isRequired,tags:k.instanceOf(c("immutable").List).isRequired,onTagAdded:k.func.isRequired,taggingSource:k.object.isRequired,taggingData:k.object.isRequired,hoveredSubjectID:k.string,hideFaceboxes:k.bool,isDragging:k.bool.isRequired,isTaggingEnabled:k.bool.isRequired},getInitialState:function s(){var t=new(c("XEditablePhotoTypeaheadPresenter"))(this.props.taggingData,{maxEntries:n});return{activeFacebox:null,activeFaceboxContextualDialogPosition:null,typeaheadQuery:"",dimensions:null,presenter:t}},componentDidMount:function s(){this.setState({dimensions:c("Vector").getElementDimensions(c("ReactDOM").findDOMNode(this))})},componentWillReceiveProps:function s(t){if(!this.props.isDragging&&t.isDragging)this.closeTypeahead();if(this.props.thumbDimensions.width!==t.thumbDimensions.width||this.props.thumbDimensions.height!==t.thumbDimensions.height)this.setState({dimensions:c("Vector").getElementDimensions(c("ReactDOM").findDOMNode(this))})},onFaceboxSelected:function s(t,u,v){__p&&__p();if(this.props.isDragging)return;if(t.id!==undefined)this.state.presenter.setDynamicSuggestions(t.recognitions);var w=c("Vector").getViewportDimensions().y,x;if(u<=w/2)x="below";else x=u-v/2-q>0?"above":"below";this.setState({activeFacebox:t,activeFaceboxContextualDialogPosition:x});setTimeout(function(){return this.refs.typeahead.focusInput()}.bind(this),0)},closeTypeahead:function s(){this.setState({activeFacebox:null,activeFaceboxContextualDialogPosition:null,typeaheadQuery:""})},onTokenSelected:function s(t){this.props.onTagAdded(this.props.photoID,t.getUniqueID(),t.getTitle(),this.state.activeFacebox,t.getPhoto());this.setState({activeFacebox:null,activeFaceboxContextualDialogPosition:null,typeaheadQuery:""})},onTypeaheadChanged:function s(event){this.setState({typeaheadQuery:event.target.value})},onTypeaheadCleared:function s(){this.setState({typeaheadQuery:""})},stopPropagation:function s(t){t.stopPropagation()},createFacebox:function s(t,u,v){var w=this.state.dimensions,x=l/w.x*100,y=l/w.y*100;u=u/w.y*100;t=t/w.x*100;var z={x:t,y:u,top:c("clamp")(u-y/2,0,100-y),left:c("clamp")(t-x/2,0,100-x),width:x,height:y};this.onFaceboxSelected(z,v,l)},onTagSuggestionConfirm:function s(){this.props.onTagSuggestionConfirmed.apply(null,arguments);this.closeTypeahead()},onTagSuggestionReject:function s(t,u){this.props.onTagSuggestionRejected.apply(null,arguments);this.closeTypeahead();setTimeout(function(){var v=this.props.faceboxes.find(function(w){return w.id===u});if(v)this.onFaceboxSelected(v)}.bind(this),0)},renderTypeahead:function s(t){var u=i._("Empieza a escribir un nombre..."),v={};this.props.tags.forEach(function(w){return v[w.subjectID]=true});return c("React").createElement("div",{className:"_4cin",onBlur:this.onBlur,onClick:this.stopPropagation,role:"presentation"},c("React").createElement("div",{className:"_1h6p"},c("React").createElement(c("XUITypeahead.react"),{ref:"typeahead",queryString:this.state.typeaheadQuery,placeholder:u,onSelectAttempt:this.onTokenSelected,onChange:this.onTypeaheadChanged,onClear:this.onTypeaheadCleared,searchSource:this.props.taggingSource,presenter:this.state.presenter,highlightOnSelect:true,excludedEntries:v,showEntriesOnFocus:true,autoHighlight:true,selectOnTab:true})))},renderLayers:function s(){return c("React").createElement(c("XUIContextualDialog.react"),{contextRef:function(){return this.refs.activeFacebox}.bind(this),key:"dialog",shown:!!this.state.activeFacebox,position:this.state.activeFaceboxContextualDialogPosition,alignment:"center",width:m,behaviors:{LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape")}},c("React").createElement(c("XUIContextualDialogBody.react"),null,this.renderTypeahead()))},handleImageMouseDown:function s(){this.setState({activeFacebox:null,activeFaceboxContextualDialogPosition:null})},handleImageClick:function s(t){if(this.props.isDragging)return;t.stopPropagation();if(this.state.activeFacebox)this.closeTypeahead();var u=c("Vector").getScrollPosition().sub(c("Vector").getElementPosition(c("ReactDOM").findDOMNode(this))).add(t.clientX,t.clientY);this.createFacebox(u.x,u.y,t.clientY)},renderFacebox:function s(t){var u=function(x){return this.onFaceboxSelected(t,x,this.state.dimensions.height*t.height)}.bind(this),v=this.state.activeFacebox===t,w=v?"activeFacebox":undefined;return c("React").createElement(c("XEditablePhotoFacebox.react"),{key:t.id||"activeFacebox",ref:w,top:t.top,left:t.left,width:t.width,height:t.height,onClick:u,isActive:v})},renderTagbox:function s(t){var u=t.facebox;return c("React").createElement(c("XEditablePhotoTagbox.react"),{key:u.id,top:u.top,left:u.left,width:u.width,height:u.height,value:u.taggedValue,shown:true})},renderFaceboxes:function s(){if(this.props.hideFaceboxes)return null;var t=this.props.faceboxes.filter(function(v){return v.taggedValue==null}).map(function(v){return this.renderFacebox(v)}.bind(this)),u=this.state.activeFacebox;if(u&&u.id==null)t=t.concat([this.renderFacebox(u)]);return t},renderTagboxes:function s(){if(this.state.activeFacebox!==null)return null;return this.props.tags.filter(function(t){return t.subjectID===this.props.hoveredSubjectID}.bind(this)).map(function(t){return this.renderTagbox(t)}.bind(this))},hasParentWithClass:function s(t,u){for(var v=0;v<u.length;v++)if(c("Parent").byClass(t,u[v]))return true;return false},onBlur:function s(event){var t=this.hasParentWithClass(c("UserAgent").isBrowser("IE")?c("getActiveElement")():event.relatedTarget,["_1h6p","_47zu"]);if(!t){this.state.presenter.setDynamicSuggestions([]);this.closeTypeahead()}},render:function s(){if(!this.props.isTaggingEnabled)return c("React").createElement("div",{className:"_4cio"},c("React").createElement(c("Image.react"),{className:"_4yt-",src:j("96570")}));return c("React").createElement("div",{className:"_4cio",onBlur:this.onBlur,onClick:this.handleImageClick,onMouseDown:this.handleImageMouseDown,role:"presentation"},c("React").createElement("div",null,this.renderTagboxes(),this.renderFaceboxes()),this.renderLayers())}});f.exports=r}),null);
__d("SphericalPhotoEditThumbnailBootloaded.react",["cx","BootloadedComponent.react","JSResource","LoadingIndicator.react","React","SphericalMediaConstants"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SphericalMediaConstants").EDIT_VIEWPORT_SIZE,l=function l(n,o){return c("React").createElement("div",{className:n,style:o},c("React").createElement(c("LoadingIndicator.react"),{className:"_4qlq",size:"small",color:"white"}))};i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.render=function(){var n=l("_7d7",{width:this.props.width,height:this.props.height});return c("React").createElement(c("BootloadedComponent.react"),babelHelpers["extends"]({bootloadLoader:c("JSResource")("SphericalPhotoEditThumbnail.react").__setRef("SphericalPhotoEditThumbnailBootloaded.react"),bootloadPlaceholder:n},this.props))};function m(){i.apply(this,arguments)}m.defaultProps={disableEditing:false,hideThumbnail:false,hideProjectionSwitch:false,isSphericalDisabled:false,showOriginalImgThumbanail:false,viewportWidth:k.width,viewportHeight:k.height};f.exports=m}),null);
__d("SphericalPhotoIVSNUX",["fbt","BasicFBNux","DOM","React","ReactDOM","SphericalPhotoNUX","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("SphericalPhotoNUX").IVS,j=i.NUX_ID,k=i.SHOULD_SHOW_NUX,l=1,m=k,n=0,o=[],p=h._("\u00a1Nuevo! Selecciona la vista de tu foto de 360\u00b0 que ver\u00e1n primero las personas."),q={shouldShow:function r(){return m&&n<l},show:function r(s){__p&&__p();if(!q.shouldShow())return;c("BasicFBNux").onView(j);n++;var t=c("ReactDOM").findDOMNode(s.contextRef()),u=c("DOM").create("div");c("DOM").appendContent(t,u);c("ReactDOM").render(c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:s.contextRef,shown:true,position:s.position||"above",onCloseButtonClick:function v(){c("BasicFBNux").onDismiss(j);m=false;q.hideAll()}},p),u);o.push(u)},hideAll:function r(){if(o.length>0){c("BasicFBNux").onDismiss(j);o.forEach(function(s){c("ReactDOM").unmountComponentAtNode(s)});o=[]}}};f.exports=q}),null);
__d("XEditableMediaMentionsInput.react",["fbt","EditorState","XMediaElementType","MentionsInput.react","MentionsInputTypeaheadView.react","React","createEditorStateWithEntities","getMentionsInputDecorator","getMentionsTextForContentState"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onChange=function(r){this.setState({editorState:r})}.bind(this),this.onBlur=function(){var r=this.state.editorState.getCurrentContent(),s=c("getMentionsTextForContentState")(r);this.props.onBlur(this.props.mediaID,this.props.mediaType,s)}.bind(this),this.state={editorState:this.createEditorState()},n}l.prototype.createEditorState=function(){"use strict";var m=this.props.initialCaption;if(m)return c("createEditorStateWithEntities")({text:m.text,ranges:m.ranges,decorator:c("getMentionsInputDecorator")(),addEntityToContentStateFn:function n(o,p){return p.createEntity("MENTION","IMMUTABLE",{id:o.id,isWeak:o.weakreference})}});return c("EditorState").createEmpty(c("getMentionsInputDecorator")())};l.prototype.focus=function(){"use strict";this.refs.mentionInput.focus()};l.prototype.render=function(){"use strict";var m=this.props.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT?h._("Haz un comentario sobre este v\u00eddeo..."):h._("Haz un comentario sobre esta foto...");return c("React").createElement(c("MentionsInput.react"),babelHelpers["extends"]({},this.props,{ref:"mentionInput",editorState:this.state.editorState,onChange:this.onChange,typeaheadView:c("MentionsInputTypeaheadView.react"),typeaheadViewProps:{},placeholder:m,autoflip:true,onBlur:this.onBlur}))};l.propTypes={mediaID:k.string.isRequired,initialCaption:k.object.isRequired,mentionsSource:k.object.isRequired,onBlur:k.func.isRequired,mediaType:k.string.isRequired,className:k.string};f.exports=l}),null);
__d("XEditablePhotoPlaceInput.react",["csx","ClearableTypeahead","DOM","DOMContainer.react","Event","PlacesTypeaheadCore","PlacesTypeaheadView","React","Typeahead","TypeaheadMetrics"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.updateTypeaheadValue=function(r){if(!this.props.place||!this.props.place.text)r.getCore().reset();else r.getCore().select(this.props.place)}.bind(this),n}l.prototype.componentDidMount=function(){"use strict";__p&&__p();var m=this.props.xhp.markup,n=m,o=c("Typeahead").getInstance(n);if(o){this.updateTypeaheadValue(o);return}var p=c("DOM").find(m,"._2___"),q=c("DOM").find(m,"div.PlacesTypeaheadView"),r=c("DOM").find(m,".uiTypeaheadCloseButton"),s={ctor:c("PlacesTypeaheadView"),node:q,options:{allowPlaceCreation:false,allowFreeformOption:true,callbackID:n.getAttribute("id"),allowHomeCreation:true,autoSelect:true,renderer:"compact",maxResults:8,showBadges:true,autoflip:false}},t={ctor:c("PlacesTypeaheadCore"),options:{callbackID:n.getAttribute("id"),keepFocused:true,resetOnSelect:false,setValueOnSelect:true}};this.typeahead=new(c("Typeahead"))(this.props.xhp.dataSource,s,t,n);this.updateTypeaheadValue(this.typeahead);c("TypeaheadMetrics").register(p,new(c("TypeaheadMetrics"))(this.props.xhp.metrics),this.typeahead);this.typeahead.subscribe(["select","reset"],function(v,w){if(v=="reset"&&this.typeahead.getCore().getHiddenValue())return;this.props.onChanged(w&&w.selected)}.bind(this));c("ClearableTypeahead").resetOnCloseButtonClick(this.typeahead,r);var u=c("Event").listen(p,"focus",function(){this.typeahead.init();u.remove()}.bind(this));if(this.props.place&&this.props.place.text)this.typeahead.getCore().setValue(this.props.place.text)};l.prototype.render=function(){"use strict";return c("React").createElement("div",{className:this.props.className},c("React").createElement(c("DOMContainer.react"),null,this.props.xhp.markup))};l.propTypes={xhp:k.object.isRequired,place:k.object,onChanged:k.func.isRequired,className:k.string};f.exports=l}),null);
__d("XEditableSetAlbumCoverDialog.react",["cx","fbt","React","LayerHideOnEscape","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onConfirm=function(){this.props.onConfirm(this.props.photoID)}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.refs.dialog.layer.subscribe("hide",this.props.onCancel)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("Elegir como portada del \u00e1lbum"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.props.onCancel})),c("React").createElement(c("XUIDialogBody.react"),null,i._("\u00bfSeguro que quieres usar esta foto como portada del \u00e1lbum?")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.props.onCancel,label:i._("Cancelar")}),c("React").createElement(c("XUIButton.react"),{use:"confirm",onClick:this.onConfirm,label:i._("Aceptar")})))};m.propTypes={shown:l.bool.isRequired,photoID:l.string.isRequired,onConfirm:l.func.isRequired,onCancel:l.func.isRequired};f.exports=m}),null);
__d("XEditablePhoto.react",["cx","fbt","ix","AlbumUploaderPhotoTagger.react","AsyncRequest","Bootloader","immutable","LayerHideOnBlur","LayerHideOnEscape","LayerTabIsolation","AlbumUploaderLegacyMentionsInput.react","XMediaElementType","PhotosConst","PhotoResizeMath","XEditablePhotoPlaceInput.react","React","ReactDOM","Image.react","ReactFragment","ShimButton.react","SphericalMediaActions","SphericalPhotoEditThumbnailBootloaded.react","SphericalMediaGyroIcon.react","SphericalPhotoIVSNUX","SphericalPhotoTypedConfig","AlbumUploaderTagToken.react","TooltipLink.react","XEditableSetAlbumCoverDialog.react","XEditableMediaMentionsInput.react","XEditablePhotoRemoveDialog.react","XUIContextualDialog.react","XUIContextualDialogBody.react","XUIContextualDialogFooter.react","XUIDialogButton.react","XUIProgressiveDatepicker.react","fbglyph","intlList","SphericalMediaConstants"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n=c("SphericalMediaConstants").LOGGER_SURFACES,o=0,p="CHAGE_DATE",q="CHANGE_PLACE",r="PHOTO_MENU",s=290;k=babelHelpers.inherits(t,c("React").PureComponent);l=k&&k.prototype;function t(v){l.constructor.call(this,v);u.call(this);var w=new Date(),x,y;if(v.place){x=v.place.uid;y=v.place.text}this.state={removeDialogShown:false,hoveredSubjectID:null,photoWillBeRemoved:false,menuDialogShown:false,setAsAlbumCoverConfirmationDialogShown:false,menuDialogViewType:r,place:{uid:x,text:y},photoSphereMetadata:{},selectedPlace:{uid:x,text:y},date:v.date,selectedDate:v.date,today:w,isRotating:false,isTaggingEnabled:true,isImageLoaded:false,isIVSNuxShowing:false,spatialTags:[],isSphericalDisabled:false}}t.prototype.componentDidMount=function(){setTimeout(function(){this.props.draggable&&this.props.draggable.addHandle(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0);if(this.props.isSpherical&&this.refs.gear)if(c("SphericalPhotoIVSNUX").shouldShow()){this.setState({isIVSNuxShowing:true});c("SphericalPhotoIVSNUX").show({contextRef:function(){return this.refs.gear}.bind(this)})}};t.prototype.componentWillReceiveProps=function(v){__p&&__p();if(!this.props.isDragging&&v.isDragging)this.closeMenu();if(this.props.faceboxes!==v.faceboxes||this.props.tags!==v.tags)this.updateSpatialTags(v.faceboxes,v.tags);var w={};if(this.state.place!==v.place)w.place=v.place;if(this.state.date!==v.date){w.date=v.date;w.selectedDate=v.date}this.setState(w)};t.prototype.componentWillUnmount=function(){this.props.draggable&&this.props.draggable.removeHandle(c("ReactDOM").findDOMNode(this.refs.container))};t.prototype.getContainerDims=function(){var v=this.props.thumbDimensions;if(v.width<s&&v.height<s)return v;else return c("PhotoResizeMath").getScaledPhotoDimensions(v.width,v.height,s-1,s,"contain")};t.prototype.getLetterboxedImage=function(){var v=this.getContainerDims(),w={width:v.width,height:v.height};return c("React").createElement("div",{ref:"container",className:"_33_b"},c("React").createElement("div",{className:"scaledImage",style:w},c("React").createElement(c("Image.react"),{className:"_3hr7",src:this.props.thumbSrc,width:v.width,height:v.height,onLoad:this.onImageLoad}),c("React").createElement(c("AlbumUploaderPhotoTagger.react"),{photoID:this.props.photoID,thumbDimensions:this.props.thumbDimensions,faceboxes:this.props.faceboxes,tags:this.props.tags,onTagAdded:this.props.onTagAdded,taggingSource:this.props.taggingSource,taggingData:this.props.taggingData,isDragging:this.props.isDragging,hoveredSubjectID:this.state.hoveredSubjectID,isTaggingEnabled:this.isTaggingEnabled(),hideFaceboxes:!this.state.isImageLoaded})),this.renderMenuButton())};t.prototype.isTaggingEnabled=function(){return this.state.isTaggingEnabled&&!this.props.isRecognizing};t.prototype.getCaptionInput=function(){var v=this.props.mentionsInput?c("React").createElement(c("AlbumUploaderLegacyMentionsInput.react"),{ref:"mentionsInput",entID:this.props.photoID,xhp:this.props.mentionsInput,onBlur:this.props.onCaptionBlur,className:"_3108"}):c("React").createElement(c("XEditableMediaMentionsInput.react"),{ref:"mentionsInput",mediaID:this.props.photoID,initialCaption:this.props.initialCaption,mentionsSource:this.props.mentionsSource,className:"_33_j",onBlur:this.props.onCaptionBlur,mediaType:c("XMediaElementType").ALBUM_PHOTO_ELEMENT});return c("React").createElement("div",{className:"_33_i",onClick:this.onCaptionClick,role:"presentation"},c("React").createElement("div",{className:"_5ipj"},v,this.getCaptionTags()))};t.prototype.hasPlace=function(){return this.state.place&&this.state.place.text};t.prototype.getTaggingPrompt=function(){if(!(this.isTaggingEnabled()||this.props.isSpherical))return null;return c("React").createElement("div",{className:"_5nlo"+(!!this.props.gks.shouldShowTaggingPromptOnHover?" _4mk9":"")},i._("Haz clic en la foto para etiquetarla"))};t.prototype.getCaptionTags=function(){__p&&__p();if(!this.hasPlace()&&!this.props.tags.size)return null;var v=null,w=null;if(this.props.tags&&this.props.tags.size>0){var x=this.props.tags.map(function(z){return c("React").createElement("div",{className:"_cni"},c("React").createElement(c("AlbumUploaderTagToken.react"),{type:"tag",entID:this.props.photoID,subjectID:z.subjectID,value:z.value,onTokenRemoved:this.onTagTokenRemove,onMouseEnter:this.onTagTokenMouseEnter,onMouseLeave:this.onTagTokenMouseLeave}))}.bind(this)).toArray();v=i._("con {list of tagged people}",[i.param("list of tagged people",c("intlList")(x,c("intlList").CONJUNCTIONS.AND))])}if(this.state.place&&this.state.place.text){var y=c("React").createElement(c("AlbumUploaderTagToken.react"),{type:"location",entID:this.props.photoID,subjectID:this.state.place.uid,value:this.state.place.text,onTokenRemoved:this.onPlaceRemoved});w=i._("en {photo location}",[i.param("photo location",y)])}return c("React").createElement("div",{className:"_2cgd",onClick:this.onAdditionalInfoClick,role:"presentation"},i._("\u2014 {list of tagged people}{photo location}",[i.param("list of tagged people",v),i.param("photo location",w)]))};t.prototype.onAdditionalInfoClick=function(v){v.stopPropagation()};t.prototype.renderRotateButton=function(){var v=i._("Girar esta foto");return c("React").createElement(c("TooltipLink.react"),{alignH:"center",position:"below",href:"#",tooltip:v,className:"_2qp2",onClick:this.onRotateButtonClick},c("React").createElement(c("Image.react"),{src:j("29276"),"aria-label":v}))};t.prototype.renderRemoveButton=function(){var v=i._("Eliminar esta foto");return c("React").createElement(c("TooltipLink.react"),{alignH:"center",position:"below",href:"#",tooltip:v,className:"_1aas",onClick:this.onRemoveButtonClick},c("React").createElement(c("Image.react"),{src:j("141941"),"aria-label":v}))};t.prototype.renderMenuButton=function(){var v="_39wz"+(this.state.menuDialogShown?" _39w-":""),w=i._("Configuraci\u00f3n");return c("React").createElement(c("TooltipLink.react"),{ref:"gear",alignH:"center",position:"above",href:"#",tooltip:w,className:v,onClick:this.onMenuButtonClick},this.props.isSpherical?c("React").createElement(c("SphericalMediaGyroIcon.react"),{isEnabled:!this.state.isSphericalDisabled,className:"_3lu7"}):null,c("React").createElement(c("Image.react"),{className:"_3lu8",src:j("29278"),alt:"menu","aria-label":w}))};t.prototype.getContextualDialogContents=function(){switch(this.state.menuDialogViewType){case r:return this.getMenuContents();case q:return this.getChangePlaceMenuContents();case p:return this.getChangeDateMenuContents()}return null};t.prototype.getMenuContents=function(){return c("React").createElement(c("XUIContextualDialogBody.react"),null,c("React").createElement("div",{className:"_39w_"},this.getEditLocationButton(),this.getChangeDateButton(),this.getSetAlbumCoverButton(),this.getSphericalPhotoEditButton()))};t.prototype.getEditLocationButton=function(){return c("React").createElement(c("ShimButton.react"),{className:"_39x0",onClick:this.onChangePlaceButtonClick},i._("Editar ubicaci\u00f3n"))};t.prototype.getChangeDateButton=function(){return this.props.isGroupAlbum?null:c("React").createElement(c("ShimButton.react"),{className:"_39x0",onClick:this.onChangeDateButtonClick},i._("Cambiar fecha"))};t.prototype.getSetAlbumCoverButton=function(){return this.props.isGroupAlbum?null:c("React").createElement(c("ShimButton.react"),{className:"_39x0",onClick:this.onSetAlbumCoverButtonClick},i._("Elegir como portada del \u00e1lbum"))};t.prototype.getSphericalPhotoEditButton=function(){if(this.props.isSpherical)return c("React").createElement("div",{className:"_39x0",onClick:this.onSphericalPhotoEditButtonClick,ref:"sphericalPhotoEditButton",role:"menuitem",tabIndex:"0"},i._("Seleccionar vista inicial"));return null};t.prototype.getChangePlaceMenuContents=function(){return[c("React").createElement(c("XUIContextualDialogBody.react"),{key:"placeMenuBody"},c("React").createElement("div",null,c("React").createElement(c("XEditablePhotoPlaceInput.react"),{id:this.props.photoID,xhp:this.props.placeInput,place:this.props.place,onChanged:this.onPlaceChanged}))),c("React").createElement(c("XUIContextualDialogFooter.react"),{key:"placeMenuFooter"},c("React").createElement(c("XUIDialogButton.react"),{use:"default",action:"button",label:i._("Cancelar"),onClick:this.onChangePlaceCancelButtonClick}),c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Guardar"),use:"confirm",onClick:this.onChangePlaceSaveButtonClick}))]};t.prototype.getChangeDateMenuContents=function(){var v=this.state.selectedDate||{};return[c("React").createElement(c("XUIContextualDialogBody.react"),{key:"dateMenuBody"},c("React").createElement(c("XUIProgressiveDatepicker.react"),{initialYear:v.year,initialMonth:v.month,initialDay:v.day,onDateChange:this.onDateChange,descendingYears:true,menuMaxHeight:250,maxTime:this.state.today.getTime()/1e3,minTime:this.props.minTime,minTimeUnit:"day"})),c("React").createElement(c("XUIContextualDialogFooter.react"),{key:"dateMenuFooter"},c("React").createElement(c("XUIDialogButton.react"),{use:"default",action:"button",label:i._("Cancelar"),onClick:this.onChangeDateCancelButtonClick}),c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Guardar"),use:"confirm",onClick:this.onChangeDateSaveButtonClick,disabled:!(v&&v.year&&v.month&&v.day)}))]};t.prototype.closeSetAlbumCoverDialog=function(){this.setState({setAsAlbumCoverConfirmationDialogShown:false});this.closeMenu()};t.prototype.renderLayers=function(){return c("ReactFragment").create({menuDialog:c("React").createElement(c("XUIContextualDialog.react"),{onBlur:this.onMenuBlur,onToggle:this.onMenuToggle,shown:this.state.menuDialogShown,alignment:"right",behaviors:{LayerHideOnBlur:c("LayerHideOnBlur"),LayerHideOnEscape:c("LayerHideOnEscape"),LayerTabIsolation:c("LayerTabIsolation")},contextRef:function(){return this.refs.gear}.bind(this),position:"below",className:"_39x1"},this.getContextualDialogContents()),removeDialog:c("React").createElement(c("XEditablePhotoRemoveDialog.react"),{shown:this.state.removeDialogShown,onConfirm:this.onRemoved,onCancel:this.onRemoveDialogCancelled}),setAlbumCoverDialog:c("React").createElement(c("XEditableSetAlbumCoverDialog.react"),{shown:this.state.setAsAlbumCoverConfirmationDialogShown,photoID:this.props.photoID,onConfirm:this.onSetAlbumCover,onCancel:this.onCloseSetAlbumCoverDialog})})};t.prototype.updateSpatialTags=function(v,w){c("Bootloader").loadModules(["XPhotoEditableSphericalPhotoTaggingMiddlewareUtils"],function(x){var y=x.getSpatialTags(v,w,this.state.photoSphereMetadata);this.setState({spatialTags:y})}.bind(this),"XEditablePhoto.react")};t.prototype.renderSphericalPhoto=function(){var v=this.getContainerDims(),w=v.width,x=v.height,y=this.props.logger&&this.props.logger.getWaterfallID();return c("React").createElement("div",{ref:"container",className:"_33_b"},c("React").createElement(c("SphericalPhotoEditThumbnailBootloaded.react"),{actorID:this.props.actorID||"",editButtonRef:function(){return this.refs.sphericalPhotoEditButton}.bind(this),height:x,hideProjectionSwitch:!c("SphericalPhotoTypedConfig").spherical_photo_www_album_toggle,middlewares:[this.sphericalPhotoUpdateMiddleware],photoID:this.props.photoID,sessionID:y||"",showOriginalImgThumbanail:this.state.isSphericalDisabled,spatialTags:this.state.spatialTags,surface:n.albumComposer,tagButtonRef:function(){return this.$XEditablePhoto1}.bind(this),useLocalSphericalImage:false,width:w}),!this.state.isSphericalDisabled?c("React").createElement("div",{className:"_2pdr",ref:function(z){this.$XEditablePhoto1=z}.bind(this)},this.getTaggingPrompt()):null,this.renderMenuButton())};t.prototype.render=function(){var v="_33_l"+(this.props.isDragging?" _2fn0":"")+(this.state.photoWillBeRemoved?" _3rq5":"")+(this.state.isRotating?" _2qp3":"")+(!this.isTaggingEnabled()?" _z5a":"");if(!this.props.isSpherical)return c("React").createElement("div",{className:v,"data-photoid":this.props.photoID,tabIndex:0},this.getLetterboxedImage(),this.getTaggingPrompt(),this.getCaptionInput(),this.renderRotateButton(),this.renderRemoveButton(),this.renderLayers());else return c("React").createElement("div",{className:v,"data-photoid":this.props.photoID,tabIndex:0},this.renderSphericalPhoto(),this.getCaptionInput(),this.renderRemoveButton(),this.renderLayers())};t.propTypes={minTime:m.number.isRequired,photoID:m.string.isRequired,initialCaption:m.object,thumbDimensions:m.object.isRequired,thumbSrc:m.string.isRequired,date:m.object,place:m.object,faceboxes:m.instanceOf(c("immutable").List).isRequired,tags:m.instanceOf(c("immutable").List).isRequired,taggingSource:m.object.isRequired,taggingData:m.object.isRequired,mentionsSource:m.object,mentionsInput:m.object,placeInput:m.object.isRequired,isRecognizing:m.bool.isRequired,isSpherical:m.bool,onRotated:m.func,onRemoved:m.func.isRequired,onTagAdded:m.func.isRequired,onTagRemoved:m.func.isRequired,onCaptionBlur:m.func.isRequired,onPlaceChanged:m.func.isRequired,onDateChanged:m.func.isRequired,onSetAlbumCover:m.func.isRequired,isGroupAlbum:m.bool.isRequired,isDragging:m.bool.isRequired,draggable:m.object,gks:m.object.isRequired,actorID:m.string,logger:m.object,toggleSphericalPhotoUpdating:m.func};var u=function u(){__p&&__p();this.onImageLoad=function(){this.setState({isImageLoaded:true})}.bind(this);this.onCaptionClick=function(){this.refs.mentionsInput.focus()}.bind(this);this.onTagTokenRemove=function(v,w){this.onTagTokenMouseLeave();this.props.onTagRemoved(v,w)}.bind(this);this.onTagTokenMouseEnter=function(v){this.setState({hoveredSubjectID:v})}.bind(this);this.onTagTokenMouseLeave=function(){this.setState({hoveredSubjectID:null})}.bind(this);this.onRotateButtonClick=function(){__p&&__p();var v={fbid:this.props.photoID,cs_ver:c("PhotosConst").BULK_EDITOR_REACT,left:1};this.setState({isRotating:true,isTaggingEnabled:false});var w=function(){this.setState({isRotating:false,isTaggingEnabled:true})}.bind(this);new(c("AsyncRequest"))("/ajax/photos/photo/rotate/").setData(v).setHandler(function(x){var y=x.getPayload().editablePhotoProps,z=new Image();z.onload=function(){if(this.props.onRotated)this.props.onRotated(this.props.photoID,y.thumbDimensions,y.thumbSrc);w()}.bind(this);z.onerror=w;z.src=y.thumbSrc}.bind(this)).setErrorHandler(w).setMethod("POST").send()}.bind(this);this.onRemoveButtonClick=function(){this.setState({removeDialogShown:true})}.bind(this);this.onRemoved=function(){this.setState({photoWillBeRemoved:true,removeDialogShown:false,isTaggingEnabled:false});var v={fbid:this.props.photoID,version:c("PhotosConst").BULK_EDITOR,confirmed:true};new(c("AsyncRequest"))().setURI("/ajax/photos/photo/delete/dialog.php").setData(v).setHandler(function(){this.props.onRemoved()}.bind(this)).setErrorHandler(function(){this.setState({photoWillBeRemoved:false,isTaggingEnabled:true})}.bind(this)).send()}.bind(this);this.onRemoveDialogCancelled=function(){this.setState({removeDialogShown:false})}.bind(this);this.onMenuButtonClick=function(){this.setState({menuDialogShown:!this.state.menuDialogShown,menuDialogViewType:r});if(this.state.isIVSNuxShowing)c("SphericalPhotoIVSNUX").hideAll()}.bind(this);this.onMenuToggle=function(v){if(!v)this.closeMenu()}.bind(this);this.onMenuBlur=function(){setTimeout(this.closeMenu,0)}.bind(this);this.closeMenu=function(){this.setState({menuDialogShown:false,menuDialogViewType:r})}.bind(this);this.onPlaceChanged=function(v){this.setState({selectedPlace:v})}.bind(this);this.onPlaceRemoved=function(){this.setState({place:null});this.props.onPlaceChanged(this.props.photoID,null)}.bind(this);this.onChangePlaceCancelButtonClick=function(){this.setState({selectedPlace:this.state.place});this.closeMenu()}.bind(this);this.onChangePlaceSaveButtonClick=function(){this.setState({place:this.state.selectedPlace});this.props.onPlaceChanged(this.props.photoID,this.state.selectedPlace);this.closeMenu()}.bind(this);this.onDateChange=function(v){this.setState({selectedDate:v})}.bind(this);this.onChangeDateSaveButtonClick=function(){var v=this.state.selectedDate;if(v&&v.year&&v.month&&v.day){this.closeMenu();this.setState({date:v});this.props.onDateChanged(this.props.photoID,v)}}.bind(this);this.onChangeDateCancelButtonClick=function(){this.setState({selectedDate:this.state.date});this.closeMenu()}.bind(this);this.onSetAlbumCoverButtonClick=function(){this.closeMenu();this.setState({setAsAlbumCoverConfirmationDialogShown:true})}.bind(this);this.onSphericalPhotoEditButtonClick=function(){this.closeMenu()}.bind(this);this.onChangePlaceButtonClick=function(){this.setState({menuDialogViewType:q})}.bind(this);this.onSetAlbumCover=function(){this.props.onSetAlbumCover(this.props.photoID);this.closeSetAlbumCoverDialog()}.bind(this);this.onCloseSetAlbumCoverDialog=function(){this.closeSetAlbumCoverDialog()}.bind(this);this.onChangeDateButtonClick=function(){this.setState({menuDialogViewType:p})}.bind(this);this.sphericalPhotoUpdateMiddleware=function(v){__p&&__p();var w=v.getState,x=v.dispatch;return function(y){__p&&__p();return function(z){__p&&__p();var A,B=this;if(z.type===c("SphericalMediaActions").RECEIVE_PHOTO)this.setState({photoSphereMetadata:z.data.photoSphereMetadata});if(z.type===c("SphericalMediaActions").SAVE_DIALOG_TAGS)(function(){var D=z.data;c("Bootloader").loadModules(["XPhotoEditableSphericalPhotoTaggingMiddlewareUtils"],function(E){E.saveDialogTags(D,this.props)}.bind(B),"XEditablePhoto.react")})();var C=o;switch(z.type){case c("SphericalMediaActions").UPDATE_PHOTO:o++;break;case c("SphericalMediaActions").UPDATE_PHOTO_FAILED:o--;break;case c("SphericalMediaActions").UPDATE_PHOTO_DONE:this.setState({isSphericalDisabled:false});o--;break;case c("SphericalMediaActions").UPDATE_RENDERER_PROJECTION_TYPE:o++;this.setState({isSphericalDisabled:true});break;case c("SphericalMediaActions").UPDATE_RENDERER_PROJECTION_TYPE_DONE:o--;break;case c("SphericalMediaActions").UPDATE_RENDERER_PROJECTION_TYPE_FAILED:o--;this.setState({isSphericalDisabled:false});break}if(C!==o&&this.props.toggleSphericalPhotoUpdating)this.props.toggleSphericalPhotoUpdating(o>0);return y(z)}.bind(this)}.bind(this)}.bind(this)};f.exports=t}),null);
__d("XEditablePhotoPlaceholder.react",["cx","fbt","FBAnimatedProgressBar.react","LeftRight.react","PhotoUploadResolution","React","TooltipLink.react","XMediaUploadState","getObjectValues"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={isAnimating:false},this.onCancel=function(){this.props.onCancel(this.props.uploadID)}.bind(this),this.onProgressBarCompleted=function(){if(this.props.uploadState===c("XMediaUploadState").UPLOADING)this.props.onProgressBarCompleted(this.props.uploadID)}.bind(this),this.getStateLabel=function(){var s;if(this.props.uploadState===c("XMediaUploadState").ENQUEUED)s=i._("Esperando...");else if(this.props.resolution!=c("PhotoUploadResolution").HIGH)s=i._("Subiendo...");else{var t=i._("Desmarca la casilla de calidad alta para cambiar a una resoluci\u00f3n baja");s=c("React").createElement(c("TooltipLink.react"),{tooltip:t},i._("Subiendo en alta resoluci\u00f3n..."))}return c("React").createElement("div",{className:"_23k4"},s)}.bind(this),this.getCancelLink=function(){return c("React").createElement("a",{href:"#",className:"_55m_",onClick:this.onCancel},i._("Cancelar"))}.bind(this),this.getProgressBar=function(){var s=this.props.uploadState===c("XMediaUploadState").UPLOADING,t=this.state.isAnimating&&s,u=this.props.estimatedRemainingTime,v=typeof u==="number"&&u>0;return c("React").createElement(c("FBAnimatedProgressBar.react"),{animate:t,percent:t?95:0,className:"_3ijg",duration:t&&v?u:0,onComplete:this.onProgressBarCompleted})}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";if(this.props.uploadState===c("XMediaUploadState").UPLOADING)this.setState({isAnimating:true})};m.prototype.componentWillReceiveProps=function(n){"use strict";if(this.props.uploadState!==c("XMediaUploadState").UPLOADING&&n.uploadState===c("XMediaUploadState").UPLOADING)this.setState({isAnimating:true})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_3ijh"},c("React").createElement(c("LeftRight.react"),null,this.getStateLabel(),this.getCancelLink()),this.getProgressBar())};m.propTypes={uploadID:l.string.isRequired,uploadState:l.string.isRequired,estimatedRemainingTime:l.number,resolution:l.oneOf(c("getObjectValues")(c("PhotoUploadResolution"))),onCancel:l.func.isRequired,onProgressBarCompleted:l.func.isRequired};f.exports=m}),null);
__d("XEditablePhotoWrapper.react",["cx","Draggable","immutable","PhotoUploadResolution","React","ReactDOM","XMediaUploadState","Vector","XEditableFailedUpload.react","XEditablePhoto.react","XEditablePhotoPlaceholder.react","getObjectValues","throttle"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=200,m=5;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={isDragging:false},this.updateComponentPosition=function(){var t=c("ReactDOM").findDOMNode(this);this.props.updateComponentPosition(this.props.uploadID||this.props.photoID,c("Vector").getElementPosition(t),c("Vector").getElementDimensions(t))}.bind(this),this.onRemoved=function(){this.props.onRemoved(this.props.uploadID||this.props.photoID,this.props.photoID)}.bind(this),this.onGrab=function(){if(this.state.isDragging)return;this.grabbed=true;var t=c("ReactDOM").findDOMNode(this);this.props.onGrab(this.props.uploadID||this.props.photoID,t)}.bind(this),this.onDrag=function(t){if(!this.grabbed)return;this.setState({isDragging:true});this.props.onDrag(t)}.bind(this),this.onDrop=function(t){this.draggable.resetPosition();this.setState({isDragging:false});this.grabbed=false;this.props.onDrop(t)}.bind(this),this.onFaceboxSelected=function(){c("ReactDOM").findDOMNode(this).focus()}.bind(this),this.getInnerComponent=function(){var t=this.props;switch(this.props.state){case c("XMediaUploadState").FAILED:return c("React").createElement(c("XEditableFailedUpload.react"),{key:t.uploadID,id:t.uploadID,filename:t.uploadFilename,error:t.error,onDismissed:t.onFailedUploadDismissed,onRetried:t.onFailedUploadRetried});case c("XMediaUploadState").ENQUEUED:case c("XMediaUploadState").UPLOADING:return c("React").createElement(c("XEditablePhotoPlaceholder.react"),{key:t.uploadID,uploadID:t.uploadID,uploadState:t.state,estimatedRemainingTime:t.uploadEstimatedRemainingTime,resolution:t.resolution,onCancel:t.onCanceled,onProgressBarCompleted:t.onProgressBarCompleted});default:return c("React").createElement(c("XEditablePhoto.react"),{initialCaption:t.initialCaption,minTime:t.minTime,photoID:t.photoID,thumbDimensions:t.thumbDimensions,thumbSrc:t.thumbSrc,date:t.date,place:t.place,tags:t.tags,faceboxes:t.faceboxes,isRecognizing:t.isRecognizing,isSpherical:t.isSpherical,onRemoved:this.onRemoved,onRotated:t.onRotated,onTagAdded:t.onTagAdded,onTagRemoved:t.onTagRemoved,onCaptionBlur:t.onCaptionBlur,onPlaceChanged:t.onPlaceChanged,onDateChanged:t.onDateChanged,onSetAlbumCover:t.onSetAlbumCover,taggingSource:t.taggingSource,taggingData:t.taggingData,mentionsSource:t.mentionsSource,mentionsInput:t.mentionsInput,placeInput:t.placeInput,isGroupAlbum:t.isGroupAlbum,isDragging:this.state.isDragging,draggable:this.draggable,gks:t.gks,actorID:t.actorID,logger:t.logger,toggleSphericalPhotoUpdating:this.props.toggleSphericalPhotoUpdating})}}.bind(this),p}n.prototype.componentWillReceiveProps=function(o){if(this.props.index!==o.index&&o.index!==undefined)setTimeout(this.updateComponentPosition,0)};n.prototype.componentDidUpdate=function(o){if(this.props.canReorder)if(o.state!==c("XMediaUploadState").UPLOADED&&this.props.state===c("XMediaUploadState").UPLOADED)this.$XEditablePhotoWrapper1();else if(o.state===c("XMediaUploadState").UPLOADED&&this.props.state!==c("XMediaUploadState").UPLOADED)this.draggable.destroy()};n.prototype.componentDidMount=function(){if(this.props.state===c("XMediaUploadState").UPLOADED&&this.props.canReorder)this.$XEditablePhotoWrapper1();setTimeout(this.updateComponentPosition,0)};n.prototype.$XEditablePhotoWrapper1=function(){this.draggable=new(c("Draggable"))(c("ReactDOM").findDOMNode(this)).setNamespace("AlbumUploader").setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(m).setGrabHandler(this.onGrab).setDragHandler(c("throttle")(this.onDrag,l)).setDropHandler(this.onDrop);this.updateComponentPosition()};n.prototype.componentWillUnmount=function(){this.draggable&&this.draggable.destroy()};n.prototype.render=function(){return c("React").createElement("div",{className:(this.state.isDragging?"_2fn0":"")+" _p3w",key:this.props.photoID||this.props.uploadID},this.getInnerComponent())};n.propTypes={uploadID:k.string,uploadFilename:k.string,uploadEstimatedRemainingTime:k.number,error:k.object,onCanceled:k.func,onProgressBarCompleted:k.func,onFailedUploadDismissed:k.func,onFailedUploadRetried:k.func,resolution:k.oneOf(c("getObjectValues")(c("PhotoUploadResolution"))),state:k.string,minTime:k.number,photoID:k.string,initialCaption:k.object,thumbDimensions:k.object,thumbSrc:k.string,date:k.object,place:k.object,faceboxes:k.instanceOf(c("immutable").List),tags:k.instanceOf(c("immutable").List),taggingSource:k.object,taggingData:k.object,mentionsSource:k.object,mentionsInput:k.object,placeInput:k.object,isRecognizing:k.bool,isSpherical:k.bool,onRemoved:k.func,onRotated:k.func,onTagAdded:k.func.isRequired,onTagRemoved:k.func.isRequired,onCaptionBlur:k.func.isRequired,onPlaceChanged:k.func.isRequired,onDateChanged:k.func.isRequired,onSetAlbumCover:k.func.isRequired,canReorder:k.bool.isRequired,index:k.number,updateComponentPosition:k.func.isRequired,onGrab:k.func.isRequired,onDrag:k.func.isRequired,onDrop:k.func.isRequired,isGroupAlbum:k.bool.isRequired,gks:k.object.isRequired,actorID:k.string,logger:k.object,toggleSphericalPhotoUpdating:k.func};n.defaultProps={state:c("XMediaUploadState").UPLOADED};f.exports=n}),null);
__d("XEditableVideoRemoveDialog.react",["cx","fbt","LayerHideOnEscape","React","XUIButton.react","XUICloseButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onHide=function(){this.props.onCancel()}.bind(this),this.onCancel=function(){this.props.onCancel()}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.refs.dialog.layer.subscribe("hide",this.onHide)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:this.props.shown,width:500,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},i._("Eliminar v\u00eddeo"),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Cerrar"),onClick:this.onCancel})),c("React").createElement(c("XUIDialogBody.react"),null,i._("\u00bfSeguro que quieres eliminar este v\u00eddeo?")),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIButton.react"),{onClick:this.onCancel,label:i._("Cancelar")}),c("React").createElement(c("XUIButton.react"),{use:"confirm",onClick:this.props.onConfirm,label:i._("Aceptar")})))};m.propTypes={shown:l.bool.isRequired,onConfirm:l.func.isRequired,onCancel:l.func.isRequired};f.exports=m}),null);
__d("XEditableVideo.react",["ix","cx","fbt","XMediaElementType","React","Image.react","ReactFragment","ShimButton.react","AlbumUploaderTagToken.react","TooltipLink.react","XEditableMediaMentionsInput.react","XEditableVideoRemoveDialog.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.getLetterboxedImage=function(){return c("React").createElement("div",{className:"_1kvz"},c("React").createElement("div",{className:"scaledImage"},c("React").createElement("video",{controls:true,className:"_1kv-",src:this.props.fileURL})))}.bind(this),this.getCaptionInput=function(){var t=c("React").createElement(c("XEditableMediaMentionsInput.react"),{ref:"mentionsInput",mediaID:this.props.videoID,initialCaption:{},mentionsSource:this.props.mentionsSource,className:"_nq3",onBlur:this.props.onCaptionBlur,mediaType:c("XMediaElementType").ALBUM_VIDEO_ELEMENT});return c("React").createElement("div",{className:"_33_i",onClick:this.$XEditableVideo1,role:"presentation"},c("React").createElement("div",{className:"_5ipj"},t,this.getCaptionTags()))}.bind(this),this.hasPlace=function(){return this.props.place&&this.props.place.text}.bind(this),this.$XEditableVideo1=function(){this.refs.mentionsInput.focus()}.bind(this),this.$XEditableVideo2=function(t){t.stopPropagation()},this.getCaptionTags=function(){if(!this.hasPlace())return null;var t=null;if(this.hasPlace()){var u=c("React").createElement(c("AlbumUploaderTagToken.react"),{type:"location",entID:this.props.videoID,subjectID:this.props.place.uid,value:this.props.place.text,onTokenRemoved:this.props.onPlaceRemoved});t=j._("en {video location}",[j.param("video location",u)])}return c("React").createElement(c("ShimButton.react"),{className:"_2cgd",onClick:this.$XEditableVideo2},j._("\u2014 {video location}",[j.param("video location",t)]))}.bind(this),this.renderRemoveButton=function(){var t=j._("Eliminar este v\u00eddeo");return c("React").createElement(c("TooltipLink.react"),{alignH:"center",position:"below",href:"#",tooltip:t,className:"_1kw2",onClick:this.props.onRemoveButtonClick},c("React").createElement(c("Image.react"),{src:h("141941"),"aria-label":t}))}.bind(this),this.renderLayers=function(){return c("ReactFragment").create({removeDialog:c("React").createElement(c("XEditableVideoRemoveDialog.react"),{shown:this.props.removeDialogShown,onConfirm:this.props.onRemoved,onCancel:this.props.onRemoveDialogCancelled})})}.bind(this),p}n.prototype.render=function(){"use strict";var o="_1kw3"+(this.props.isDragging?" _2fn0":"")+(this.props.videoWillBeRemoved?" _1kw4":"");return c("React").createElement("div",{className:o,"data-photoid":this.props.videoID,tabIndex:0},this.getLetterboxedImage(),this.getCaptionInput(),this.renderRemoveButton(),this.renderLayers())};n.propTypes={videoID:m.string.isRequired,fileURL:m.string.isRequired,place:m.object,menuDialogViewType:m.string.isRequired,menuDialogShown:m.bool.isRequired,removeDialogShown:m.bool.isRequired,videoWillBeRemoved:m.bool.isRequired,onRemoved:m.func.isRequired,onRemoveButtonClick:m.func.isRequired,onRemoveDialogCancelled:m.func.isRequired,onMenuButtonClick:m.func.isRequired,onMenuToggle:m.func.isRequired,onMenuBlur:m.func.isRequired,onPlaceChanged:m.func.isRequired,onPlaceRemoved:m.func.isRequired,onChangePlaceButtonClick:m.func.isRequired,onChangePlaceCancelButtonClick:m.func.isRequired,onChangePlaceSaveButtonClick:m.func.isRequired,onCaptionBlur:m.func.isRequired,mentionsSource:m.object};f.exports=n}),null);
__d("XEditableVideoContainer.react",["XEditableVideo.react","React","ReactDOM"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes,k="CHANGE_PLACE",l="VIDEO_MENU";h=babelHelpers.inherits(m,c("React").PureComponent);i=h&&h.prototype;function m(n){"use strict";__p&&__p();i.constructor.call(this,n);this.hasPlace=function(){return this.state.place&&this.state.place.text}.bind(this);this.onAdditionalInfoClick=function(q){q.stopPropagation()};this.onRemoveButtonClick=function(){this.setState({removeDialogShown:true})}.bind(this);this.onRemoved=function(){this.setState({videoWillBeRemoved:true,removeDialogShown:false,taggingEnabled:false});this.props.onRemoved()}.bind(this);this.onRemoveDialogCancelled=function(){this.setState({removeDialogShown:false})}.bind(this);this.onMenuToggle=function(q){if(!q)this.closeMenu()}.bind(this);this.onMenuBlur=function(){setTimeout(this.closeMenu,0)}.bind(this);this.closeMenu=function(){this.setState({menuDialogShown:false,menuDialogViewType:l})}.bind(this);this.onPlaceChanged=function(q){this.setState({selectedPlace:q})}.bind(this);this.onPlaceRemoved=function(){this.setState({place:null});this.props.onPlaceChanged(this.props.videoID,null)}.bind(this);this.onChangePlaceCancelButtonClick=function(){this.setState({selectedPlace:this.state.place});this.closeMenu()}.bind(this);this.onChangePlaceSaveButtonClick=function(){this.setState({place:this.state.selectedPlace});this.props.onPlaceChanged(this.props.videoID,this.state.selectedPlace);this.closeMenu()}.bind(this);this.getContextualDialogContents=function(){switch(this.state.menuDialogViewType){case l:return this.getMenuContents();case k:return this.getChangePlaceMenuContents()}return null}.bind(this);this.onChangePlaceButtonClick=function(){this.setState({menuDialogViewType:k})}.bind(this);this.onSetAlbumCover=function(){this.props.onSetAlbumCover(this.props.videoID);this.closeSetAlbumCoverDialog()}.bind(this);this.onMenuButtonClick=function(){this.setState({menuDialogShown:!this.state.menuDialogShown,menuDialogViewType:l})}.bind(this);var o,p;if(n.place){o=n.place.uid;p=n.place.text}this.state={removeDialogShown:false,hoveredSubjectID:null,videoWillBeRemoved:false,menuDialogShown:false,setAsAlbumCoverConfirmationDialogShown:false,menuDialogViewType:l,place:{uid:o,text:p},selectedPlace:{uid:o,text:p}}}m.prototype.componentDidMount=function(){"use strict";setTimeout(function(){var n=this.props.dragHandler;n&&n.add(c("ReactDOM").findDOMNode(this.refs.container))}.bind(this),0)};m.prototype.componentWillReceiveProps=function(n){"use strict";if(!this.props.isDragging&&n.isDragging)this.closeMenu();var o={};if(this.state.place!==n.place)o.place=n.place;this.setState(o)};m.prototype.componentWillUnmount=function(){"use strict";setTimeout(function(){var n=this.props.dragHandler,o=c("ReactDOM").findDOMNode(this.refs.container);n&&o&&n.remove(o)}.bind(this),0)};m.prototype.render=function(){"use strict";return c("React").createElement(c("XEditableVideo.react"),{ref:"container",videoID:this.props.videoID,fileURL:this.props.fileURL,place:this.state.place,menuDialogViewType:this.state.menuDialogViewType,menuDialogShown:this.state.menuDialogShown,removeDialogShown:this.state.removeDialogShown,videoWillBeRemoved:this.state.videoWillBeRemoved,onRemoved:this.onRemoved,onRemoveButtonClick:this.onRemoveButtonClick,onRemoveDialogCancelled:this.onRemoveDialogCancelled,onMenuButtonClick:this.onMenuButtonClick,onMenuToggle:this.onMenuToggle,onMenuBlur:this.onMenuBlur,onPlaceChanged:this.onPlaceChanged,onPlaceRemoved:this.onPlaceRemoved,onChangePlaceButtonClick:this.onChangePlaceButtonClick,onChangePlaceCancelButtonClick:this.onChangePlaceCancelButtonClick,onChangePlaceSaveButtonClick:this.onChangePlaceSaveButtonClick,onCaptionBlur:this.props.onCaptionBlur,mentionsSource:this.props.mentionsSource})};m.propTypes={videoID:j.string.isRequired,fileURL:j.string.isRequired,onRemoved:j.func.isRequired,dragHandler:j.object.isRequired,onCaptionBlur:j.func.isRequired,mentionsSource:j.object};f.exports=m}),null);
__d("XEditableVideoPlaceholder.react",["cx","fbt","FBAnimatedProgressBar.react","LeftRight.react","React","XMediaUploadState"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={isAnimating:false},this.onCancel=function(){this.props.onCancel(this.props.uploadID)}.bind(this),this.onProgressBarCompleted=function(){if(this.props.uploadState===c("XMediaUploadState").UPLOADING)this.props.onProgressBarCompleted(this.props.uploadID)}.bind(this),this.getStateLabel=function(){var s;if(this.props.uploadState===c("XMediaUploadState").ENQUEUED)s=i._("Esperando...");else s=i._("Subiendo...");return c("React").createElement("div",{className:"_eq4"},s)}.bind(this),this.getCancelLink=function(){if(this.props.uploadState===c("XMediaUploadState").UPLOADING)return null;return c("React").createElement("a",{href:"#",className:"_eq5",onClick:this.onCancel},i._("Cancelar"))}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";if(this.props.uploadState===c("XMediaUploadState").UPLOADING)this.setState({isAnimating:true})};m.prototype.componentWillReceiveProps=function(n){"use strict";if(this.props.uploadState!==c("XMediaUploadState").UPLOADING&&n.uploadState===c("XMediaUploadState").UPLOADING)this.setState({isAnimating:true})};m.prototype.getProgressBar=function(){"use strict";var n=this.props.uploadState===c("XMediaUploadState").UPLOADING,o=this.state.isAnimating&&n,p=this.props.estimatedRemainingTime,q=typeof p==="number"&&p>0;return c("React").createElement(c("FBAnimatedProgressBar.react"),{animate:o,percent:50*Math.log10(Math.max(1,p)),duration:o&&q?p:0,className:"_eq6",onComplete:this.onProgressBarCompleted})};m.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_eq7"},c("React").createElement(c("LeftRight.react"),null,this.getStateLabel(),this.getCancelLink()),this.getProgressBar())};m.propTypes={uploadID:l.string.isRequired,uploadState:l.string.isRequired,estimatedRemainingTime:l.number.isRequired,onCancel:l.func.isRequired,onProgressBarCompleted:l.func.isRequired};m.defaultProps={estimatedRemainingTime:0};f.exports=m}),null);
__d("XEditableVideoWrapper.react",["cx","Draggable","React","ReactDOM","XMediaUploadState","Vector","XEditableFailedUpload.react","XEditableVideoContainer.react","XEditableVideoPlaceholder.react","throttle"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=200,m=5;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={isDragging:false},this.$XEditableVideoWrapper1=function(){this.draggable=new(c("Draggable"))(c("ReactDOM").findDOMNode(this)).setNamespace("AlbumUploader").setUseAbsolute(true).setAvoidKillingEvents(true).setGutter(m).setGrabHandler(this.onGrab).setDragHandler(c("throttle")(this.onDrag,l)).setDropHandler(this.onDrop);this.updateComponentPosition()}.bind(this),this.updateComponentPosition=function(){var t=c("ReactDOM").findDOMNode(this);this.props.updateComponentPosition(this.props.uploadID||this.props.videoID,c("Vector").getElementPosition(t),c("Vector").getElementDimensions(t))}.bind(this),this.onRemoved=function(){this.props.onRemoved(this.props.uploadID||this.props.videoID,this.props.videoID)}.bind(this),this.onGrab=function(){if(this.state.isDragging)return;this.grabbed=true;var t=c("ReactDOM").findDOMNode(this);this.props.onGrab(this.props.uploadID||this.props.videoID,t)}.bind(this),this.onDrag=function(t){if(!this.grabbed)return;this.setState({isDragging:true});this.props.onDrag(t)}.bind(this),this.onDrop=function(t){this.draggable.resetPosition();this.setState({isDragging:false});this.grabbed=false;this.props.onDrop(t)}.bind(this),this.onFaceboxSelected=function(){c("ReactDOM").findDOMNode(this).focus()}.bind(this),this.getInnerComponent=function(){var t=this.props;switch(this.props.state){case c("XMediaUploadState").FAILED:return c("React").createElement(c("XEditableFailedUpload.react"),{key:t.uploadID,id:t.uploadID,filename:t.uploadFilename,error:t.error,onDismissed:t.onFailedUploadDismissed,onRetried:t.onFailedUploadRetried});case c("XMediaUploadState").ENQUEUED:case c("XMediaUploadState").UPLOADING:return c("React").createElement(c("XEditableVideoPlaceholder.react"),{key:t.uploadID,uploadID:t.uploadID,uploadState:t.state,estimatedRemainingTime:t.uploadEstimatedRemainingTime,resolution:t.resolution,onCancel:t.onCanceled,onProgressBarCompleted:t.onProgressBarCompleted});default:var u=this,v={add:function w(x){u.draggable.addHandle(x)},remove:function w(x){u.draggable.removeHandle(x)}};return c("React").createElement(c("XEditableVideoContainer.react"),{videoID:t.videoID,fileURL:t.fileURL,onRemoved:this.onRemoved,dragHandler:v,onCaptionBlur:t.onCaptionBlur,mentionsSource:t.mentionsSource,mentionsInput:t.mentionsInput,initialCaption:t.initialCaption})}}.bind(this),p}n.prototype.componentWillReceiveProps=function(o){"use strict";if(this.props.index!==o.index&&o.index!==undefined)setTimeout(this.updateComponentPosition,0)};n.prototype.componentDidUpdate=function(o){"use strict";if(o.state!==c("XMediaUploadState").UPLOADED&&this.props.state===c("XMediaUploadState").UPLOADED)this.$XEditableVideoWrapper1();else if(o.state===c("XMediaUploadState").UPLOADED&&this.props.state!==c("XMediaUploadState").UPLOADED)this.draggable.destroy()};n.prototype.componentDidMount=function(){"use strict";if(this.props.state===c("XMediaUploadState").UPLOADED)this.$XEditableVideoWrapper1();setTimeout(this.updateComponentPosition,0)};n.prototype.componentWillUnmount=function(){"use strict";this.draggable&&this.draggable.destroy()};n.prototype.render=function(){"use strict";return c("React").createElement("div",{className:(this.state.isDragging?"_2fn0":"")+" _p3w",key:this.props.videoID||this.props.uploadID},this.getInnerComponent())};n.propTypes={uploadID:k.string,uploadFilename:k.string,uploadEstimatedRemainingTime:k.number,error:k.object,onCanceled:k.func,onProgressBarCompleted:k.func,onFailedUploadDismissed:k.func,onFailedUploadRetried:k.func,state:k.string,videoID:k.string,initialCaption:k.object,place:k.object,mentionsSource:k.object,mentionsInput:k.object,placeInput:k.object,onRemoved:k.func,onCaptionBlur:k.func.isRequired,onPlaceChanged:k.func.isRequired,index:k.number,updateComponentPosition:k.func.isRequired,onGrab:k.func.isRequired,onDrag:k.func.isRequired,onDrop:k.func.isRequired,isGroupAlbum:k.bool.isRequired};n.defaultProps={state:c("XMediaUploadState").UPLOADED};f.exports=n}),null);
__d("XEditableMediaContainer.react",["fbt","cx","DOMContainer.react","Event","immutable","Locale","React","ReactDOM","Rect","Style","XMediaUploadState","Vector","XMediaElementType","XEditablePhotoWrapper.react","XEditableVideoWrapper.react","XUIAmbientNUX.react","LayerFadeOnShow","throttle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={sourceIndex:null,sourceHeight:null,targetIndex:null,isRTL:c("Locale").isRTL(),visibleImages:18,showVideoNUX:this.props.showVideoNUX},this.$XEditableMediaContainer1=function(){if(this.state.visibleImages<this.props.medias.size){var s=c("ReactDOM").findDOMNode(this),t=c("Vector").getElementDimensions(s),u=c("Vector").getElementPosition(s),v=u.y+t.y,w=c("Vector").getViewportDimensions(),x=c("Vector").getScrollPosition(),y=x.y+w.y;if(v-y<600){var z=this.state.visibleImages+1;this.setState({visibleImages:z},function(){setTimeout(this.$XEditableMediaContainer1,0)}.bind(this))}}}.bind(this),this.getPhotoWrapper=function(s,t){var u=!s.filename?{photoID:s.id,initialCaption:s.initialCaption,faceboxes:s.faceboxes,thumbDimensions:s.thumbDimensions,thumbSrc:s.thumbSrc,date:s.timeTaken,place:s.place,tags:s.tags,mentionsSource:this.props.mentionsSource,taggingSource:this.props.taggingSource,taggingData:this.props.taggingData,mentionsInput:s.mentionsInput,placeInput:s.placeInput,isRecognizing:s.isRecognizing,isSpherical:s.isSpherical}:{uploadID:s.id,uploadFilename:s.filename,uploadEstimateTimeRemaining:s.estimatedRemainingTime};return c("React").createElement(c("XEditablePhotoWrapper.react"),babelHelpers["extends"]({key:s.id,onFailedUploadDismissed:this.props.onFailedUploadDismissed,onFailedUploadRetried:this.props.onFailedUploadRetried,error:s.error,onCanceled:this.props.onCanceled,onProgressBarCompleted:this.props.onProgressBarCompleted,resolution:s.resolution,minTime:this.props.minTime,state:s.state,isGroupAlbum:this.props.isGroupAlbum},u,{onRemoved:this.props.onRemoved,onRotated:this.props.onRotated,onTagAdded:this.props.onTagAdded,onTagRemoved:this.props.onTagRemoved,onCaptionBlur:this.props.onCaptionBlur,onDateChanged:this.props.onDateChanged,onPlaceChanged:this.props.onPlaceChanged,onSetAlbumCover:this.props.onSetAlbumCover,canReorder:this.props.canReorder,index:t,updateComponentPosition:this.updateComponentPosition,onGrab:this.onGrab,onDrag:this.onDrag,onDrop:this.onDrop,gks:this.props.gks,actorID:this.props.actorID,logger:this.props.logger,toggleSphericalPhotoUpdating:this.props.toggleSphericalPhotoUpdating}))}.bind(this),this.getComponents=function(){__p&&__p();var s=this.state.visibleImages,t=this.props.medias.slice(0,s).toSeq();t=t.map(function(w,z){if(z===this.state.sourceIndex)return null;if(w.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT)return this.getVideoWrapper(w,z);else return this.getPhotoWrapper(w,z)}.bind(this)).filter(function(z){return z!==null});if(this.state.targetIndex!==null){var u={height:this.state.sourceHeight},v=c("React").createElement("div",{key:"placeholder",style:u,className:"_1hxi"},c("React").createElement("div",{className:"_1hxj"}));t=t.splice(this.state.targetIndex,0,v)}if(this.state.sourceIndex!==null){var w=this.props.medias.get(this.state.sourceIndex),x;if(w.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT)x=this.getVideoWrapper(w);else x=this.getPhotoWrapper(w);t=t.splice(this.state.sourceIndex,0,x)}if(this.props.addMoreInlineButton){var y=c("React").createElement(c("XUIAmbientNUX.react"),{behaviors:{LayerFadeOnShow:c("LayerFadeOnShow")},contextRef:function(){return this.props.addMoreInlineButton}.bind(this),customwidth:300,onCloseButtonClick:function(){return this.$XEditableMediaContainer3()}.bind(this),position:"below",alignment:"center",shown:this.state.showVideoNUX,width:"custom",key:"notice"},h._("\u00a1Nuevo! Ahora puedes a\u00f1adir v\u00eddeos a tus \u00e1lbumes"));t=t.concat([c("React").createElement("div",{key:"inlineAddMore",className:"_4jo-"},y,c("React").createElement(c("DOMContainer.react"),null,this.props.addMoreInlineButton))])}return t.toArray()}.bind(this),this.updateComponentPosition=function(s,t,u){var v=new(c("Rect"))(c("ReactDOM").findDOMNode(this));this.componentsPosition[s]={top:t.y-v.t,left:t.x-v.l,right:t.x-v.l+u.x}}.bind(this),this.onGrab=function(s,t){this.props.onMediaDragStarted();var u=this.props.medias.findIndex(function(v){return v.id===s});this.setState({sourceIndex:u,sourceHeight:c("Vector").getElementDimensions(t).y,targetIndex:u})}.bind(this),this.getTargetID=function(s){__p&&__p();var t=this.props.medias;if(t.last().b<s.t)return t.size-1;var u=this.state.isRTL?function(z,s){return z.right>=s.x}:function(z,s){return z.left<=s.x},v=Math.min(t.size-1,this.state.visibleImages-1);for(var w=v;w>=0;w--){var x=t.get(w),y=x.id,z=this.componentsPosition[y];if((!x.state||x.state===c("XMediaUploadState").UPLOADED)&&z.top<=s.y&&u(z,s))return w}return 0}.bind(this),this.onDrag=function(s){var t=c("Vector").getElementPosition(c("ReactDOM").findDOMNode(this));s=s.sub(t);this.setState({targetIndex:this.getTargetID(s)})}.bind(this),this.onDrop=function(s){this.onDrag(s);if(this.state.sourceIndex!==this.state.targetIndex)this.props.onMediaDropped(this.state.sourceIndex,this.state.targetIndex);this.endDrag()}.bind(this),this.endDrag=function(){this.setState({sourceIndex:null,sourceHeight:null,targetIndex:null})}.bind(this),o}m.prototype.componentWillMount=function(){this.componentsPosition={}};m.prototype.componentDidMount=function(){var n=c("Style").getScrollParent(c("ReactDOM").findDOMNode(this));this.$XEditableMediaContainer1=c("throttle").withBlocking(this.$XEditableMediaContainer1,100/6);this.$XEditableMediaContainer2=c("Event").listen(n,"scroll",this.$XEditableMediaContainer1);this.$XEditableMediaContainer1()};m.prototype.componentWillUnmount=function(){this.$XEditableMediaContainer2.remove()};m.prototype.getVideoWrapper=function(n,o){var p=!n.filename?{videoID:n.id,fileURL:n.fileURL,mentionsSource:this.props.mentionsSource,initialCaption:{}}:{uploadID:n.id,uploadFilename:n.filename,uploadEstimatedRemainingTime:n.estimatedRemainingTime};return c("React").createElement(c("XEditableVideoWrapper.react"),babelHelpers["extends"]({key:n.id,onFailedUploadDismissed:this.props.onFailedUploadDismissed,onFailedUploadRetried:this.props.onFailedUploadRetried,error:n.error,onCanceled:this.props.onCanceled,onProgressBarCompleted:this.props.onProgressBarCompleted,state:n.state,isGroupAlbum:this.props.isGroupAlbum},p,{onRemoved:this.props.onRemoved,onCaptionBlur:this.props.onCaptionBlur,onPlaceChanged:this.props.onPlaceChanged,index:o,updateComponentPosition:this.updateComponentPosition,onGrab:this.onGrab,onDrag:this.onDrag,onDrop:this.onDrop,gks:this.props.gks}))};m.prototype.render=function(){return c("React").createElement("div",{className:"_2cq3 _2cq4"},this.getComponents())};m.prototype.$XEditableMediaContainer3=function(){this.setState({showVideoNUX:false})};m.propTypes={medias:l.instanceOf(c("immutable").List).isRequired,minTime:l.number.isRequired,mentionsSource:l.object.isRequired,taggingSource:l.object.isRequired,taggingData:l.object.isRequired,onRemoved:l.func.isRequired,onRotated:l.func.isRequired,onTagAdded:l.func.isRequired,onTagRemoved:l.func.isRequired,onCaptionBlur:l.func.isRequired,onPlaceChanged:l.func.isRequired,onDateChanged:l.func.isRequired,onSetAlbumCover:l.func.isRequired,isGroupAlbum:l.bool.isRequired,onFailedUploadDismissed:l.func,onFailedUploadRetried:l.func,onCanceled:l.func,onProgressBarCompleted:l.func,canReorder:l.bool,onMediaDragStarted:l.func.isRequired,onMediaDropped:l.func.isRequired,addMoreInlineButton:l.any,gks:l.object.isRequired,showVideoNUX:l.bool,actorID:l.string,logger:l.object,toggleSphericalPhotoUpdating:l.func};m.defaultProps={canReorder:true};f.exports=m}),null);
__d("XMediaSetActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({CREATE_SET_DATA:null,CHANGE_SET_ORDER_TYPE:null,MOVE_SET_PHOTO:null,REMOVE_SET:null})}),null);
__d("XMediaSetActions",["XMediaSetActionType","AlbumUploaderOrderType"],(function a(b,c,d,e,f,g){"use strict";var h={composeAction:function i(j,k){return babelHelpers["extends"]({setID:j},k)},createSetData:function i(j,k,l){return{id:j,imageIDs:k,action:c("XMediaSetActionType").CREATE_SET_DATA,orderType:l||c("AlbumUploaderOrderType").MANUAL}},changeOrderType:function i(j,k){return{id:j,action:c("XMediaSetActionType").CHANGE_SET_ORDER_TYPE,orderType:k}},move:function i(j,k,l){return{id:j,action:c("XMediaSetActionType").MOVE_SET_PHOTO,fromIndex:k,toIndex:l}},remove:function i(j,k){return{action:c("XMediaSetActionType").REMOVE_SET,id:j,index:k}}};f.exports=h}),null);
__d("XVideoActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({CREATE_VIDEO_DATA:null,UPDATE_VIDEO_CAPTION:null})}),null);
__d("XVideoUploadActionType",["keyMirror"],(function a(b,c,d,e,f,g){f.exports=c("keyMirror")({CREATE_VIDEO_UPLOAD_DATA:null,SET_VIDEO_DATA:null,SET_VIDEO_ESTIMATED_REMAINING_TIME:null,SET_VIDEO_FAILED:null,SET_VIDEO_UPLOADING:null,SET_VIDEO_UPLOADED:null,VIDEO_CANCEL:null,VIDEO_REMOVE:null})}),null);
__d("XVideoUploadStore",["XVideoUploadActionType","AlbumUploaderDispatcher","EventEmitter","immutable","XMediaUploadState","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("immutable").Record({id:undefined,filename:"",fileURL:"",state:undefined,estimatedRemainingTime:undefined,videoID:undefined,videoData:{},error:{},mediaType:c("XMediaElementType").ALBUM_VIDEO_ELEMENT}),k=c("immutable").Record({ENQUEUED:0,UPLOADING:0,UPLOADED:0,FAILED:0});h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){"use strict";__p&&__p();i.constructor.call(this);this.$XVideoUploadStore1=c("immutable").Map();this.$XVideoUploadStore2=new k();this.$XVideoUploadStore3=c("AlbumUploaderDispatcher").register(function(m){__p&&__p();var n=false;m.payloads.forEach(function(o){__p&&__p();if(c("XVideoUploadActionType")[o.action]!==undefined)n=true;switch(o.action){case c("XVideoUploadActionType").CREATE_VIDEO_UPLOAD_DATA:this.$XVideoUploadStore4(o);break;case c("XVideoUploadActionType").SET_VIDEO_UPLOADING:this.$XVideoUploadStore5(o);break;case c("XVideoUploadActionType").SET_VIDEO_ESTIMATED_REMAINING_TIME:this.$XVideoUploadStore6(o);break;case c("XVideoUploadActionType").SET_VIDEO_UPLOADED:this.$XVideoUploadStore7(o);break;case c("XVideoUploadActionType").SET_VIDEO_DATA:this.$XVideoUploadStore8(o);break;case c("XVideoUploadActionType").VIDEO_CANCEL:this.$XVideoUploadStore9(o);break;case c("XVideoUploadActionType").VIDEO_REMOVE:this.$XVideoUploadStore10(o);break;case c("XVideoUploadActionType").SET_VIDEO_FAILED:this.$XVideoUploadStore11(o);break;default:}}.bind(this));if(n)this.emit("change",{uploads:this.$XVideoUploadStore1,stats:this.$XVideoUploadStore2})}.bind(this))}l.prototype.$XVideoUploadStore4=function(m){"use strict";var n=this.$XVideoUploadStore12(m,["id","filename","fileURL"]),o=n[0],p=n[1],q=n[2];if(!this.$XVideoUploadStore1.get(o))this.$XVideoUploadStore1=this.$XVideoUploadStore1.set(o,new j({id:o,state:c("XMediaUploadState").ENQUEUED,filename:p,fileURL:q}));else this.$XVideoUploadStore13(o,function(r){return r.set("state",c("XMediaUploadState").ENQUEUED)});this.$XVideoUploadStore2=this.$XVideoUploadStore2.update(c("XMediaUploadState").ENQUEUED,function(r){return r+1})};l.prototype.$XVideoUploadStore5=function(m){"use strict";var n=this.$XVideoUploadStore12(m,["id"]),o=this.getUpload(n);this.$XVideoUploadStore14(o.state,c("XMediaUploadState").UPLOADING);this.$XVideoUploadStore13(n,function(p){return p.set("state",c("XMediaUploadState").UPLOADING)})};l.prototype.$XVideoUploadStore6=function(m){"use strict";var n=this.$XVideoUploadStore12(m,"id");this.$XVideoUploadStore13(n,function(o){return o.set("estimatedRemainingTime",m.estimatedRemainingTime)})};l.prototype.$XVideoUploadStore7=function(m){"use strict";var n=this.$XVideoUploadStore12(m,"id"),o=this.getUpload(n);this.$XVideoUploadStore14(o.state,c("XMediaUploadState").UPLOADED);this.$XVideoUploadStore13(n,function(p){return p.set("state",c("XMediaUploadState").UPLOADED).remove("estimatedRemainingTime")})};l.prototype.$XVideoUploadStore11=function(m){"use strict";var n=this.$XVideoUploadStore12(m,"id");this.$XVideoUploadStore13(n,function(o){return o.set("state",c("XMediaUploadState").FAILED).set("error",{code:m.errorCode,summary:m.errorSummary,description:m.errorDescription}).remove("estimatedRemainingTime")});this.$XVideoUploadStore14(c("XMediaUploadState").UPLOADING,c("XMediaUploadState").FAILED)};l.prototype.$XVideoUploadStore8=function(m){"use strict";var n=this.$XVideoUploadStore12(m,["id","videoID","videoData"]),o=n[0],p=n[1],q=n[2];this.$XVideoUploadStore13(o,function(r){return r.set("videoID",p).set("videoData",q)})};l.prototype.$XVideoUploadStore9=function(m){"use strict";var n=this.$XVideoUploadStore12(m,"id"),o=this.$XVideoUploadStore1.get(n);this.$XVideoUploadStore10(m);this.$XVideoUploadStore2=this.$XVideoUploadStore2.update(o.state,function(p){return p-1})};l.prototype.$XVideoUploadStore10=function(m){"use strict";var n=this.$XVideoUploadStore12(m,"id");this.$XVideoUploadStore1=this.$XVideoUploadStore1.remove(n)};l.prototype.$XVideoUploadStore13=function(m,n){"use strict";this.$XVideoUploadStore1=this.$XVideoUploadStore1.update(m,n)};l.prototype.$XVideoUploadStore14=function(m,n){"use strict";this.$XVideoUploadStore2=this.$XVideoUploadStore2.withMutations(function(o){return o.update(m,function(p){return p-1}).update(n,function(p){return p+1})})};l.prototype.$XVideoUploadStore12=function(m,n){"use strict";__p&&__p();if(!Array.isArray(n))n=[n];var o=n.map(function(p){if(m[p]===undefined)throw new Error("Payload missing field: "+p);return m[p]});if(n.length===1)return o[0];return o};l.prototype.getDispatchToken=function(){"use strict";return this.$XVideoUploadStore3};l.prototype.getUpload=function(m){"use strict";return this.$XVideoUploadStore1.get(m)};f.exports=new l()}),null);
__d("XVideoStore",["XVideoActionType","AlbumUploaderDispatcher","EventEmitter","immutable","XVideoUploadActionType","XVideoUploadStore","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("immutable").Record({id:null,pid:null,fileURL:null,initialCaption:{},encodedCaption:"",mediaType:c("XMediaElementType").ALBUM_VIDEO_ELEMENT});h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){"use strict";__p&&__p();i.constructor.call(this);this.$XVideoStore1=c("immutable").Map();this.$XVideoStore2=c("AlbumUploaderDispatcher").register(function(l){__p&&__p();var m=false;l.payloads.forEach(function(n){__p&&__p();if(c("XVideoActionType")[n.action]!==undefined||n.action===c("XVideoUploadActionType").VIDEO_REMOVE)m=true;switch(n.action){case c("XVideoActionType").CREATE_VIDEO_DATA:this.$XVideoStore3(n);break;case c("XVideoUploadActionType").VIDEO_REMOVE:c("AlbumUploaderDispatcher").waitFor([c("XVideoUploadStore").getDispatchToken()]);this.$XVideoStore4(n);break;case c("XVideoActionType").UPDATE_VIDEO_CAPTION:this.$XVideoStore5(n);break;default:}}.bind(this));if(m)this.emit("change",{videos:this.$XVideoStore1})}.bind(this))}k.prototype.getVideo=function(l){"use strict";return this.$XVideoStore1.get(l)};k.prototype.getVideos=function(){"use strict";return this.$XVideoStore1.toList()};k.prototype.$XVideoStore3=function(l){"use strict";this.$XVideoStore6(l,"id","fileURL");if(!this.$XVideoStore1.has(l.id))this.$XVideoStore1=this.$XVideoStore1.set(l.id,new j({id:l.id,pid:l.pid||null,fileURL:l.fileURL}))};k.prototype.$XVideoStore5=function(l){"use strict";this.$XVideoStore6(l,"id","encodedCaption");this.$XVideoStore7(l.id,function(m){return m.set("encodedCaption",l.encodedCaption)})};k.prototype.$XVideoStore4=function(l){"use strict";var m=l.videoID;if(!m)return;this.$XVideoStore1=this.$XVideoStore1.remove(m)};k.prototype.$XVideoStore7=function(l,m){"use strict";this.$XVideoStore1=this.$XVideoStore1.update(l,m)};k.prototype.$XVideoStore8=function(l){"use strict";var m=this.$XVideoStore1.get(l);if(m===undefined)throw new Error("Video "+l+" hasn't been registered");return m};k.prototype.$XVideoStore6=function(l){"use strict";Array.prototype.slice.call(arguments,1).forEach(function(m){if(l[m]===undefined)throw new Error("Payload missing field: "+m)})};k.prototype.getDispatchToken=function(){"use strict";return this.$XVideoStore2};f.exports=new k()}),null);
__d("XMediaSetStore",["AlbumUploaderDispatcher","EventEmitter","immutable","AlbumUploaderOrderType","XPhotoActionType","XVideoActionType","XMediaSetActionType","XPhotoStore","XVideoStore","Set","XPhotoUploadActionType","XVideoUploadActionType","XPhotoUploadStore","XVideoUploadStore","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;c("XPhotoStore");c("XVideoStore");c("XPhotoUploadStore");c("XVideoUploadStore");c("XMediaElementType");var j=c("immutable").Record({id:null,media:c("immutable").List(),orderType:c("AlbumUploaderOrderType").MANUAL}),k=Object.create(null),l=Object.create(null),m={};h=babelHelpers.inherits(n,c("EventEmitter"));i=h&&h.prototype;function n(){"use strict";__p&&__p();i.constructor.call(this);this.$XMediaSetStore1=c("immutable").Map();this.$XMediaSetStore2=c("AlbumUploaderDispatcher").register(function(r){__p&&__p();var s=false;r.payloads.forEach(function(t){__p&&__p();switch(t.action){case c("XMediaSetActionType").CREATE_SET_DATA:s=true;this.$XMediaSetStore3(t);break;case c("XPhotoActionType").CREATE_PHOTO_DATA:if(t.setID){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoStore").getDispatchToken()]);this.$XMediaSetStore4(t)}break;case c("XVideoActionType").CREATE_VIDEO_DATA:if(t.setID){s=true;c("AlbumUploaderDispatcher").waitFor([c("XVideoStore").getDispatchToken()]);this.$XMediaSetStore5(t)}break;case c("XPhotoUploadActionType").CREATE_UPLOAD_DATA:if(t.setID){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoUploadStore").getDispatchToken()]);this.$XMediaSetStore6(t)}break;case c("XPhotoUploadActionType").SET_PHOTO_DATA:if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoUploadStore").getDispatchToken()]);this.$XMediaSetStore7(t)}break;case c("XVideoUploadActionType").CREATE_VIDEO_UPLOAD_DATA:if(t.setID){s=true;c("AlbumUploaderDispatcher").waitFor([c("XVideoUploadStore").getDispatchToken()]);this.$XMediaSetStore8(t)}break;case c("XVideoUploadActionType").SET_VIDEO_DATA:if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XVideoUploadStore").getDispatchToken()]);this.$XMediaSetStore9(t)}break;case c("XPhotoUploadActionType").REMOVE:case c("XPhotoUploadActionType").CANCEL:case c("XPhotoActionType").REMOVE_PHOTO:t.id=t.photoID||t.id;if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoStore").getDispatchToken()]);this.$XMediaSetStore10(t)}break;case c("XPhotoUploadActionType").SET_UPLOADED:case c("XPhotoUploadActionType").SET_UPLOADING:case c("XPhotoUploadActionType").SET_ESTIMATED_REMAINING_TIME:case c("XPhotoUploadActionType").SET_FAILED:if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoUploadStore").getDispatchToken()]);this.$XMediaSetStore11(t)}break;case c("XVideoUploadActionType").SET_VIDEO_UPLOADED:case c("XVideoUploadActionType").SET_VIDEO_UPLOADING:case c("XVideoUploadActionType").SET_VIDEO_ESTIMATED_REMAINING_TIME:case c("XVideoUploadActionType").SET_VIDEO_FAILED:if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XVideoUploadStore").getDispatchToken()]);this.$XMediaSetStore11(t)}break;case c("XVideoUploadActionType").VIDEO_CANCEL:case c("XVideoUploadActionType").VIDEO_REMOVE:t.id=t.videoID||t.id;if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XVideoUploadStore").getDispatchToken()]);this.$XMediaSetStore10(t)}break;case c("XPhotoActionType").RECOGNIZING_FACES:case c("XPhotoActionType").SET_RECOGNIZING:case c("XPhotoActionType").ADD_FACEBOX:case c("XPhotoActionType").CONFIRM_SUGGESTION:case c("XPhotoActionType").REJECT_SUGGESTION:case c("XPhotoActionType").ADD_TAG:case c("XPhotoActionType").REMOVE_TAG:case c("XPhotoActionType").UPDATE_CAPTION:case c("XPhotoActionType").BACKDATE_PHOTO:case c("XPhotoActionType").CHANGE_PLACE:case c("XPhotoActionType").ROTATE_PHOTO:if(k[t.id]){s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoStore").getDispatchToken()]);this.$XMediaSetStore11(t)}break;case c("XPhotoActionType").REMOVE_ALL_SUBJECT_TAGS:case c("XPhotoActionType").REMOVE_ALL_LOCATION_TAGS:s=true;c("AlbumUploaderDispatcher").waitFor([c("XPhotoStore").getDispatchToken()]);this.$XMediaSetStore12();break;case c("XMediaSetActionType").CHANGE_SET_ORDER_TYPE:s=true;this.$XMediaSetStore13(t);break;case c("XMediaSetActionType").MOVE_SET_PHOTO:s=true;this.$XMediaSetStore14(t);break;case c("XMediaSetActionType").REMOVE_SET:s=true;this.$XMediaSetStore15(t);break;default:break}}.bind(this));if(s)this.emit("change",{mediasets:this.$XMediaSetStore1})}.bind(this))}n.prototype.$XMediaSetStore12=function(){"use strict";__p&&__p();var r=c("XPhotoStore").getPhotos();for(var s=r,t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v;this.updatePhoto(w)}};n.prototype.$XMediaSetStore3=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,["id","imageIDs","orderType"]),t=s[0],u=s[1],v=s[2];if(!this.$XMediaSetStore1.get(t)){this.$XMediaSetStore1.set(t,new j({id:t,media:c("immutable").List(),orderType:v}));l[t]=[]}u.forEach(function(w){var x=c("XPhotoStore").getPhoto(w)||c("XPhotoUploadStore").getUpload(w);if(!x){x=c("XVideoStore").getVideo(w)||c("XVideoUploadStore").getUpload(w);this.$XMediaSetStore17(x,t)}else this.$XMediaSetStore17(x,t)}.bind(this));this.$XMediaSetStore18(t,function(w){return w.set("orderType",v)})};n.prototype.$XMediaSetStore4=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","setID"]),t=s[0],u=s[1];this.$XMediaSetStore17(c("XPhotoStore").getPhoto(t),u)};n.prototype.$XMediaSetStore5=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","setID"]),t=s[0],u=s[1];this.$XMediaSetStore17(c("XVideoStore").getVideo(t),u)};n.prototype.$XMediaSetStore6=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","setID"]),t=s[0],u=s[1];this.$XMediaSetStore17(c("XPhotoUploadStore").getUpload(t),u)};n.prototype.$XMediaSetStore8=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","setID"]),t=s[0],u=s[1];this.$XMediaSetStore17(c("XVideoUploadStore").getUpload(t),u)};n.prototype.$XMediaSetStore17=function(r,s){"use strict";__p&&__p();var t=this.$XMediaSetStore1.get(s),u=k[r.id];if(!u||!u.has(s)){if(t)this.$XMediaSetStore18(s,function(t){t=t.set("media",t.media.push(r));return t.set("orderType",c("AlbumUploaderOrderType").MANUAL)});else{this.$XMediaSetStore1=this.$XMediaSetStore1.set(s,new j({id:s,media:c("immutable").List([r]),orderType:c("AlbumUploaderOrderType").MANUAL}));l[s]=[]}l[s].push(r);k[r.id]=k[r.id]||new(c("Set"))();k[r.id].add(s)}};n.prototype.$XMediaSetStore7=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,["id","photoID"]),t=s[0],u=s[1],v=c("XPhotoStore").getPhoto(u);k[u]=k[u]||new(c("Set"))();for(var w=k[t].values(),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z;this.$XMediaSetStore18(A,function(C){var D=C.media.findIndex(function(E){return E.id===t});return C.set("media",C.media.splice(D,1,v))});k[u].add(A);var B=l[A].indexOf(t);l[A].splice(B,1,u)}delete k[t];m[u]=t};n.prototype.$XMediaSetStore9=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,["id","videoID"]),t=s[0],u=s[1],v=c("XVideoStore").getVideo(u);k[u]=k[u]||new(c("Set"))();for(var w=k[t].values(),x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z;this.$XMediaSetStore18(A,function(C){var D=C.media.findIndex(function(E){return E.id===t});return C.set("media",C.media.splice(D,1,v))});k[u].add(A);var B=l[A].indexOf(t);l[A].splice(B,1,u)}delete k[t];m[u]=t};n.prototype.$XMediaSetStore10=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,"id");for(var t=k[s].values(),u=Array.isArray(t),v=0,t=u?t:t[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var w;if(u){if(v>=t.length)break;w=t[v++]}else{v=t.next();if(v.done)break;w=v.value}var x=w;this.$XMediaSetStore18(x,function(y){var z=y.media.findIndex(function(B){return B.id===s}),A=l[x].indexOf(s);l[x]=l[x].splice(A,1);return y.set("media",y.media.splice(z,1))})}delete k[s]};n.prototype.$XMediaSetStore11=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,"id"),t=c("XPhotoStore").getPhoto(s)||c("XPhotoUploadStore").getUpload(s);if(t){this.updatePhoto(t);return}var u=c("XVideoStore").getVideo(s)||c("XVideoUploadStore").getUpload(s);if(u){this.updateVideo(u);return}};n.prototype.updatePhoto=function(r){"use strict";__p&&__p();for(var s=k[r.id],t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v;this.$XMediaSetStore18(w,function(x){var y=x.media.findIndex(function(z){return z.id==r.id});return x.set("media",x.media.splice(y,1,r))})}};n.prototype.updateVideo=function(r){"use strict";__p&&__p();for(var s=k[r.id],t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v;this.$XMediaSetStore18(w,function(x){var y=x.media.findIndex(function(z){return z.id==r.id});return x.set("media",x.media.splice(y,1,r))})}};n.prototype.$XMediaSetStore13=function(r){"use strict";__p&&__p();var s=this.$XMediaSetStore16(r,["id","orderType"]),t=s[0],u=s[1];this.$XMediaSetStore18(t,function(v){__p&&__p();if(v.orderType===c("AlbumUploaderOrderType").MANUAL)l[t]=v.media.map(function(w){return w.id}).toArray();v=v.set("orderType",u);switch(u){case c("AlbumUploaderOrderType").ASCENDING:v=v.set("media",v.media.sort(p));break;case c("AlbumUploaderOrderType").DESCENDING:v=v.set("media",v.media.sort(q));break;case c("AlbumUploaderOrderType").MANUAL:v=v.set("media",c("immutable").List(l[t].map(function(t){return c("XPhotoUploadStore").getUpload(t)||c("XPhotoStore").getPhoto(t)||c("XVideoUploadStore").getUpload(t)||c("XVideoStore").getVideo(t)})));break}return v})};n.prototype.$XMediaSetStore14=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","fromIndex","toIndex"]),t=s[0],u=s[1],v=s[2];this.$XMediaSetStore18(t,function(w){w=w.set("media",w.media.splice(u,1,w.media.get(v)).splice(v,1,w.media.get(u)));return w.set("orderType",c("AlbumUploaderOrderType").MANUAL)});l[t]=this.$XMediaSetStore1.get(t).toArray().map(function(w){return w.id})};n.prototype.$XMediaSetStore15=function(r){"use strict";var s=this.$XMediaSetStore16(r,["id","index"]),t=s[0],u=s[1];this.$XMediaSetStore18(t,function(v){var w=v.media.get(u);k[w.id]["delete"](t);return v.set("media",v.media.splice(u,1))})};n.prototype.$XMediaSetStore16=function(r,s){"use strict";__p&&__p();if(!Array.isArray(s))s=[s];var t=s.map(function(u){if(r[u]===undefined)throw new Error("Payload missing field: "+u);return r[u]});if(s.length===1)return t[0];return t};n.prototype.getDispatchToken=function(){"use strict";return this.$XMediaSetStore2};n.prototype.getMediaUploadID=function(r){"use strict";return m[r]};n.prototype.$XMediaSetStore18=function(r,s){"use strict";this.$XMediaSetStore1=this.$XMediaSetStore1.update(r,s)};function o(r){if(r.year&&r.month&&r.day)return new Date(r.year,r.month,r.day);else return r}function p(r,s){var t=r.mediaType==c("XMediaElementType").ALBUM_VIDEO_ELEMENT?1:0,u=s.mediaType==c("XMediaElementType").ALBUM_VIDEO_ELEMENT?1:0;if(t==0&&u==0){var v=o(r.exifTimeTaken||r.timeTaken),w=o(s.exifTimeTaken||s.timeTaken);return v-w}return t-u}function q(r,s){var t=r.mediaType==c("XMediaElementType").ALBUM_VIDEO_ELEMENT?1:0,u=s.mediaType==c("XMediaElementType").ALBUM_VIDEO_ELEMENT?1:0;if(t==0&&u==0){var v=o(r.exifTimeTaken||r.timeTaken),w=o(s.exifTimeTaken||s.timeTaken);return w-v}return t-u}f.exports=new n()}),null);
__d("XPhotoActions",["XPhotoActionType"],(function a(b,c,d,e,f,g){__p&&__p();var h={createPhotoData:function i(j,k,l,m,n,o,p,q,r,s){var t={id:j,action:c("XPhotoActionType").CREATE_PHOTO_DATA,thumbSrc:k,thumbDimensions:l,timeTaken:m,place:n,mentionsInput:q,placeInput:p,initialCaption:r,isSpherical:s};if(r&&r.text)t.encodedCaption=r.text;return t},recognizingFaces:function i(j){return{action:c("XPhotoActionType").RECOGNIZING_FACES,isRecognizingFaces:j}},setRecognizing:function i(j,k){return{id:j,action:c("XPhotoActionType").SET_RECOGNIZING,isRecognizing:k}},finishRecognizing:function i(j,k){return{action:c("XPhotoActionType").PHOTO_RECOGNITION_ALL_FINISHED,photoID:j,facerecWaterfallEvent:k}},addFacebox:function i(j,k,l,m,n,o,p,q,r,s,t){return{id:j,action:c("XPhotoActionType").ADD_FACEBOX,faceboxID:k,top:l,left:m,width:n,height:o,subjectID:p,value:q,profilePictureURI:r,recognitions:s,facerecWaterfallEvent:t}},addTag:function i(j,k,l,m,n){return{id:j,action:c("XPhotoActionType").ADD_TAG,subjectID:k,value:l,facebox:m,profilePictureURI:n}},backdatePhoto:function i(j,k){return{id:j,action:c("XPhotoActionType").BACKDATE_PHOTO,timeTaken:k}},changePlace:function i(j,k,l){return{id:j,action:c("XPhotoActionType").CHANGE_PLACE,place:k,bulk:l}},confirmSuggestion:function i(j,k){return{id:j,action:c("XPhotoActionType").CONFIRM_SUGGESTION,faceboxID:k}},rejectSuggestion:function i(j,k){return{id:j,action:c("XPhotoActionType").REJECT_SUGGESTION,faceboxID:k}},removeTag:function i(j,k){return{id:j,action:c("XPhotoActionType").REMOVE_TAG,subjectID:k}},removeAllLocationTags:function i(j){return{action:c("XPhotoActionType").REMOVE_ALL_LOCATION_TAGS,locationID:j}},removeAllSubjectTags:function i(j){return{action:c("XPhotoActionType").REMOVE_ALL_SUBJECT_TAGS,subjectID:j}},updateCaption:function i(j,k){return{id:j,action:c("XPhotoActionType").UPDATE_CAPTION,encodedCaption:k}},rotate:function i(j,k,l){return{id:j,action:c("XPhotoActionType").ROTATE_PHOTO,thumbDimensions:k,thumbSrc:l}}};f.exports=h}),null);
__d("XPhotoBatchBackdateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/photos/edit/batch/backdate/",{})}),null);
__d("XPhotoUploadActions",["XPhotoUploadActionType"],(function a(b,c,d,e,f,g){var h={uploadEnqueued:function i(j,k){return{id:j,action:c("XPhotoUploadActionType").CREATE_UPLOAD_DATA,filename:k}},uploadStart:function i(j,k,l){return[{id:j,action:c("XPhotoUploadActionType").SET_UPLOADING,resolution:l},{id:j,action:c("XPhotoUploadActionType").SET_ESTIMATED_REMAINING_TIME,estimatedRemainingTime:k}]},uploadDone:function i(j,k,l){return[{id:j,action:c("XPhotoUploadActionType").SET_PHOTO_DATA,photoID:k,photoData:l},{id:j,action:c("XPhotoUploadActionType").SET_UPLOADED}]},uploadProgress:function i(j,k){return{id:j,action:c("XPhotoUploadActionType").SET_ESTIMATED_REMAINING_TIME,estimatedRemainingTime:k}},uploadFailed:function i(j,k,l,m){return{id:j,action:c("XPhotoUploadActionType").SET_FAILED,errorCode:k,errorSummary:l,errorDescription:m}},cancel:function i(j){return{id:j,action:c("XPhotoUploadActionType").CANCEL}},remove:function i(j,k){return{id:j,photoID:k,action:c("XPhotoUploadActionType").REMOVE}}};f.exports=h}),null);
__d("XVideoActions",["XVideoActionType"],(function a(b,c,d,e,f,g){var h={createVideoData:function i(j,k){var l={id:j,action:c("XVideoActionType").CREATE_VIDEO_DATA,fileURL:k};return l},updateCaption:function i(j,k){return{id:j,action:c("XVideoActionType").UPDATE_VIDEO_CAPTION,encodedCaption:k}}};f.exports=h}),null);
__d("XVideoUploadActions",["XVideoUploadActionType"],(function a(b,c,d,e,f,g){var h={uploadEnqueued:function i(j,k,l){return{id:j,action:c("XVideoUploadActionType").CREATE_VIDEO_UPLOAD_DATA,filename:k,fileURL:l}},uploadStart:function i(j,k){return[{id:j,action:c("XVideoUploadActionType").SET_VIDEO_UPLOADING},{id:j,action:c("XVideoUploadActionType").SET_VIDEO_ESTIMATED_REMAINING_TIME,estimatedRemainingTime:k}]},uploadDone:function i(j,k,l){return[{id:j,action:c("XVideoUploadActionType").SET_VIDEO_DATA,videoID:k,videoData:l},{id:j,action:c("XVideoUploadActionType").SET_VIDEO_UPLOADED}]},uploadProgress:function i(j,k){return{id:j,action:c("XVideoUploadActionType").SET_VIDEO_ESTIMATED_REMAINING_TIME,estimatedRemainingTime:k}},uploadFailed:function i(j,k,l,m){return{id:j,action:c("XVideoUploadActionType").SET_VIDEO_FAILED,errorCode:k,errorSummary:l,errorDescription:m}},cancel:function i(j){return{id:j,action:c("XVideoUploadActionType").VIDEO_CANCEL}},remove:function i(j,k){return{id:j,videoID:k,action:c("XVideoUploadActionType").VIDEO_REMOVE}}};f.exports=h}),null);
__d("replaceJSMarkupMarkers",["HTML"],(function a(b,c,d,e,f,g){__p&&__p();function h(j){return j&&typeof j=="object"}function i(j){__p&&__p();if(!h(j))return j;loop:for(var k in j){if(h(j[k])&&Object.prototype.hasOwnProperty.call(j[k],"markup")){var l=j[k].markup;if(h(l)&&Object.prototype.hasOwnProperty.call(l,"__html")){j[k]=c("HTML").replaceJSONWrapper(l).getRootNode();continue loop}}j[k]=i(j[k])}return j}f.exports=i}),null);
__d("routeUploadControllerEventsToDispatcher",["DataSource","AlbumUploaderDispatcher","XPhotoActions","XVideoActions","XPhotoStore","XMediaSetActions","PlacesDataSource","XPhotoUploadActions","XVideoUploadActions","curry","replaceJSMarkupMarkers","FacerecWaterfallEvent","nullthrows","XMediaElementType"],(function a(b,c,d,e,f,g){__p&&__p();c("XMediaElementType");var h=100;function i(j,k,l,m){__p&&__p();var n=function n(q){if(!c("AlbumUploaderDispatcher").isDispatching())q();else setTimeout(c("curry")(n,q),h)},o=function o(q,r){var s=j.getEstimatedUploadTimeRemaining(q);c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").uploadStart(q,s,r))},p=function p(q,r){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").setRecognizing(q,false));c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").finishRecognizing(q,r))};l.subscribe("done",function(q,r){return n(function(){return r.unresolved.forEach(function(s){return p(s,c("nullthrows")(r.facerecWaterfallEvent))})})});l.subscribe("photo",function(q,r){__p&&__p();n(function(){__p&&__p();r.faceboxes.forEach(function(s){var t,u,v;if(s.recognitions.length>0){var w=s.recognitions[0].user;t=w.fbid;u=w.name;v=w.profile_picture}c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").addFacebox(r.photo,s.fbid,s.top,s.left,s.width,s.height,t,u,v,s.allRecognitions,c("FacerecWaterfallEvent").RECOGNITION_RECEIVED_BY_CLIENT))});c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").setRecognizing(r.photo,false))})});l.subscribe("done",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").recognizingFaces(false))})});j.subscribe("queued",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(r.files.map(function(s){return c("XMediaSetActions").composeAction(m,c("XPhotoUploadActions").uploadEnqueued(s.uploadID,s.name))}))})});j.subscribe("upload_start",function(q,r){n(function(){return o(r.uploadID,r.resolution)})});j.subscribe("upload_progress",function(q,r){n(function(){var s=j.getEstimatedUploadTimeRemaining(r.uploadID);c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").uploadProgress(r.uploadID,s))})});j.subscribe("upload_done",function(q,r){__p&&__p();n(function(){__p&&__p();var s=r.response.editablePhotoProps,t=s.xhp&&s.xhp.mentionsInput;if(t){c("replaceJSMarkupMarkers")(t.encoded);t.markup=t.encoded.markup;delete t.encoded;t.dataSource=new(c("DataSource"))(t.dataSource)}var u=s.xhp.placeInput;c("replaceJSMarkupMarkers")(u.encoded);u.markup=u.encoded.markup;delete u.encoded;u.dataSource=new(c("PlacesDataSource"))(u.dataSource);var v=r.response.fbid.toString();c("AlbumUploaderDispatcher").handleUpdate([c("XPhotoActions").createPhotoData(v,s.thumbSrc,s.thumbDimensions,s.timeTaken,s.location,null,u,s.xhp&&s.xhp.mentionsInput,s.caption,s.isSpherical),c("XPhotoActions").recognizingFaces(true)]);c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").uploadDone(r.uploadID,v,{timeTaken:s.timeTaken}));if(!c("XPhotoStore").getPhoto(v).reUploaded){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").setRecognizing(v,true));l.start([v])}})});j.subscribe("upload_failed",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").uploadFailed(r.uploadID,r.response.error,r.response.errorSummary,r.response.errorDescription))})});j.subscribe("upload_hires_attach",function(q,r){n(function(){return o(r.uploadID,r.resolution)})});k.subscribe("video_upload_queued",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XMediaSetActions").composeAction(m,c("XVideoUploadActions").uploadEnqueued(r.uploadID,r.name,r.fileURL)))})});k.subscribe("video_upload_start",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").uploadStart(r.uploadID,r.uploadProgress))})});k.subscribe("video_upload_progress",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").uploadProgress(r.uploadID,r.uploadProgress))})});k.subscribe("video_upload_done",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate([c("XVideoActions").createVideoData(r.videoFBID,r.fileURL)]);c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").uploadDone(r.uploadID,r.videoFBID,{}))})});k.subscribe("video_upload_failed",function(q,r){n(function(){c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").uploadFailed(r.uploadID,r.response.error,r.response.errorSummary,r.response.errorDescription))})})}f.exports=i}),null);
__d("AlbumUploaderRoot.react",["cx","errorCode","fbt","ActorURI","AlbumUploaderAlbumActions","AlbumUploaderAlbumStore","AlbumUploaderDimensions","AlbumUploaderNoPhotoView.react","AlbumUploaderSlimHeader.react","AlbumUploaderTagRemovalIntent","AsyncRequest","AlbumUploaderCancelDialog.react","AlbumUploaderDateType","AlbumUploaderDispatcher","AlbumUploaderErrorDialog.react","ErrorUtils","Event","FaceboxSourceConstants","FaceRecognitionController","FacerecWaterfallEvent","AlbumUploaderFooter.react","Form","immutable","LayerHideOnEscape","AlbumUploaderLimitExceededDialog.react","XMediaSetActions","XMediaSetStore","XMediaElementType","AlbumUploaderNetworkOfflineDialog.react","AlbumUploaderOrderType","XPhotoActions","PhotosConst","XPhotoStore","PhotosUploadWaterfall","PhotosUploadWaterfallMixin","XPhotoUploadActions","XPhotoUploadStore","PhotoUploadConnectionMonitor","PhotoUploadFacerecWaterfallTypedLogger","PhotoUploadResolution","React","ReactFragment","ReloadPage","Run","Set","AlbumUploaderSidebar.react","SubscriptionsHandler","XVideoActions","XVideoStore","XVideoUploadActions","UploadController","UploadSession","XVideoUploadStore","Vector","AlbumVideoUploadController","AlbumUploaderViewportSize","XEditableMediaContainer.react","XPhotoBatchBackdateController","XPhotoBatchEditLocationController","XUIDialog.react","XUIDialogBody.react","curry","goURI","mixin","routeUploadControllerEventsToDispatcher","throttle"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m,n,o=c("React").PropTypes,p="new-album-cancel",q="add-more-cancel",r=60;k=babelHelpers.inherits(s,c("mixin")(c("PhotosUploadWaterfallMixin")));l=k&&k.prototype;function s(v,w){l.constructor.call(this);this.$AlbumUploaderLogger1=v;this.$AlbumUploaderLogger2=w||{}}s.prototype.getUploaderApp=function(){return this.$AlbumUploaderLogger1.getUploaderApp()};s.prototype.getWaterfallID=function(){return this.$AlbumUploaderLogger1.getWaterfallID()};s.prototype.getAdditionalData=function(){return{scuba_tags:{is_set:this.$AlbumUploaderLogger2.isSet,is_page:this.$AlbumUploaderLogger2.isPage}}};m=babelHelpers.inherits(t,c("React").Component);n=m&&m.prototype;function t(v,w){n.constructor.call(this,v,w);u.call(this);var x=c("Vector").getViewportWithoutScrollbarDimensions(),y=new Date();this.state={shown:true,resolution:v.configs.uploader.resolution,albumDateType:null,albumDate:{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate()},medias:c("immutable").List(),photos:c("immutable").List(),tags:c("immutable").Map(),isUploading:false,isPublishing:false,isCancelling:false,isGrabbingPhoto:false,isNavigatingToBasicUploader:false,isRecognizingFaces:false,isSphericalPhotoUpdating:false,isDirty:false,cancelDialogShown:false,errorDialogShown:false,networkOfflineDialogShown:false,limitExceededDialogShown:false,sessionLimitExceeded:false,orderType:c("AlbumUploaderOrderType").MANUAL,viewportWidth:x.x,viewportHeight:x.y,modalHeight:this.getModalHeight(x.y),isSharedAlbum:v.isSharedAlbum,contributors:c("immutable").Set(),shouldHideFromNewsfeed:false,setID:"u"+(v.configs.setToken||v.albumID),locationTags:c("immutable").Map()}}t.prototype.getModalHeight=function(v){return v-2*c("AlbumUploaderDimensions").get("HEADER_HEIGHT")-2*c("AlbumUploaderDimensions").get("MODAL_MARGIN")-4-r};t.prototype.componentDidMount=function(){__p&&__p();this.uploadAdapter=this.props.configs.uploadAdapter;this.subscriptions=new(c("SubscriptionsHandler"))();this.$AlbumUploaderRoot1();this.$AlbumUploaderRoot2();this.$AlbumUploaderRoot3();this.subscriptions.addSubscriptions(c("XPhotoUploadStore").addListener("change",function(w){this.setState({isUploading:w.stats.ENQUEUED>0||w.stats.UPLOADING>0})}.bind(this)),c("XPhotoStore").addListener("change",function(w){return this.setState({tags:w.tags,isRecognizingFaces:w.isRecognizingFaces,locationTags:w.locationTags})}.bind(this)),c("XVideoStore").addListener("change",function(w){return this.setState({})}.bind(this)),c("XVideoUploadStore").addListener("change",function(w){this.setState({isUploading:w.stats.ENQUEUED>0||w.stats.UPLOADING>0})}.bind(this)),c("AlbumUploaderAlbumStore").addListener("change",function(w){return this.setState({contributors:w.contributors,isSharedAlbum:w.isSharedAlbum})}.bind(this)));var v=new(c("Set"))();this.subscriptions.addSubscriptions(c("XMediaSetStore").addListener("change",function(w){__p&&__p();var x=w.mediasets.get(this.state.setID),y=x.media.filter(function(H){return H.mediaType!=c("XMediaElementType").ALBUM_VIDEO_ELEMENT&&!H.filename&&!v.has(H.id)});if(y.size>0){for(var z=y.toArray(),A=Array.isArray(z),B=0,z=A?z:z[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var C;if(A){if(B>=z.length)break;C=z[B++]}else{B=z.next();if(B.done)break;C=B.value}var D=C;v.add(D.id)}if(!this.isGroupAlbum()){var E=this.state.albumDateType===c("AlbumUploaderDateType").FROM_EXIF;setTimeout(function(){return this.updateStoreTimeTakens(y,E,this.state.albumDate)}.bind(this),0)}}var F=x.media.filter(function(H){return H.mediaType===c("XMediaElementType").ALBUM_PHOTO_ELEMENT}),G=x.media.filter(function(H){return H.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT});this.setState({orderType:x.orderType,medias:x.media,photos:F,disableSharedAlbum:G.size>0&&!this.props.videosInSharedAlbums,isVideoOnlyAlbum:F.size==0})}.bind(this)));c("routeUploadControllerEventsToDispatcher")(this.uploadController,this.videoUploadController,this.faceRecController,this.state.setID);c("UploadSession").addControllerToSession(this.props.configs.uploader.sessionID,this.uploadController,this.videoUploadController);this.logger=new s(this.uploadController,{isSet:!!this.props.configs.uploadController.photoSetToken,isPage:!!this.props.configs.uploadController.isPage});this.connectionMonitor=new(c("PhotoUploadConnectionMonitor"))();this.subscriptions.addSubscriptions(c("Event").listen(window,"resize",c("throttle")(this.onWindowResized,200)),c("Event").listen(window,"scroll",this.onScroll,c("Event").Priority.URGENT),this.connectionMonitor.start(),this.connectionMonitor.addListener("online",this.handleNetworkOnline),this.connectionMonitor.addListener("offline",this.handleNetworkOffline),this.refs.dialog.layer.subscribe("beforehide",this.onBeforeHide));c("Run").onBeforeUnload(this.onBeforeUnload);c("Run").onLeave(this.onLeave)};t.prototype.componentWillUnmount=function(){this.subscriptions.release();this.uploadController&&delete this.uploadController;this.videoUploadController&&delete this.videoUploadController;this.faceRecController&&delete this.faceRecController;this.connectionMonitor&&delete this.connectionMonitor;this.logger&&delete this.logger};t.prototype.renderLayers=function(){if(!this.state.shown)return null;var v="_5ssz"+(!!this.props.configs.setToken?" _25j2":"")+(this.props.isPageAlbum?" _5rug":""),w=this.state.viewportWidth-r,x=this.getViewportSize(w),y=this.state.isPublishing?"_fxv":"",z=c("React").createElement(c("AlbumUploaderSlimHeader.react"),{isNewAlbum:this.isNewAlbum(),addMoreButton:this.props.xhpComponents.addMoreFooterButton,isUploading:this.state.isUploading,isPublishing:this.state.isPublishing,isOrderByEnabled:this.canPublish(),orderType:this.state.orderType,onOrderChanged:this.onOrderChanged}),A=!this.state.disableSharedAlbum&&(this.props.isSharedAlbum||this.state.contributors.size>0)?this.props.xhpComponents.sharedAlbumAudienceSelector:this.props.xhpComponents.audienceSelector,B=c("React").createElement(c("AlbumUploaderSidebar.react"),{date:this.state.albumDate,minTime:this.props.configs.parameters.albumMinTime,albumID:this.props.albumID,title:this.props.albumTitle,description:this.props.albumDescription,descriptionMentionsInput:this.props.xhpComponents.albumDescriptionMentionsInput,mentionsSource:this.props.datasources.mentionsSource,placesTypeahead:this.props.xhpComponents.placesTypeahead,tags:this.state.tags,onDataChanged:this.onAlbumDataChanged,isPublishing:this.state.isPublishing,hasNewFooter:this.props.configs.parameters.gks.newAlbumFooterGK,isRecognizingFaces:this.state.isRecognizingFaces,isSphericalPhotoUpdating:this.state.isSphericalPhotoUpdating,setToken:this.props.configs.setToken,onTagRemoved:this.onAlbumTagRemoved,quality:this.state.resolution,showQualitySelector:true,onQualityChanged:this.onQualityChanged,sidebarHeight:this.state.modalHeight,audienceSelector:A,isPublishEnabled:this.canPublish(),onPublishButtonClicked:this.onPublish,onDateChanged:this.onAlbumDateChanged,contributorSource:this.props.datasources.contributorSource,onContributorAdded:this.onContributorAdded,onContributorRemoved:this.onContributorRemoved,onMakeSharedAlbumChange:this.onMakeSharedAlbumChange,contributors:this.state.contributors,isGroupAlbum:this.isGroupAlbum(),isNewAlbum:this.isNewAlbum(),isSharedAlbum:this.state.isSharedAlbum,isSharingParty:this.props.isSharingParty,isPageAlbum:this.props.isPageAlbum,noBackdate:this.props.configs.parameters.gks.noBackdate,onHideFromNewsfeedChange:this.onHideFromNewsfeedChange,shouldHideFromNewsfeed:this.state.shouldHideFromNewsfeed,locationTags:this.state.locationTags,isVideoOnlyAlbum:this.state.isVideoOnlyAlbum,disableSharedAlbum:this.state.disableSharedAlbum}),C=this.props.configs.parameters.gks.newAlbumFooterGK?c("React").createElement(c("AlbumUploaderFooter.react"),{audienceSelector:A,isPublishing:this.state.isPublishing,isPublishEnabled:this.canPublish(),isRecognizingFaces:this.state.isRecognizingFaces,isSphericalPhotoUpdating:this.state.isSphericalPhotoUpdating,onPublishButtonClicked:this.onPublish}):null;return c("ReactFragment").create({overlay:c("React").createElement(c("XUIDialog.react"),{ref:"dialog",shown:true,width:w,layerHideOnBlur:false,behaviors:{LayerHideOnEscape:c("LayerHideOnEscape")},className:v},z,c("React").createElement("div",{className:y},c("React").createElement(c("XUIDialogBody.react"),{className:"_5s1w",useCustomPadding:true},B,this.getUploaderBodyContent(x)),C)),cancelDialog:c("React").createElement(c("AlbumUploaderCancelDialog.react"),{shown:this.state.cancelDialogShown,onConfirm:this.onDeleteMultimediaTriggered,onCancel:this.onContinueAlbumButtonClick}),errorDialog:c("React").createElement(c("AlbumUploaderErrorDialog.react"),{shown:this.state.errorDialogShown,onClose:this.onErrorDialogClosed}),networkOfflineDialog:c("React").createElement(c("AlbumUploaderNetworkOfflineDialog.react"),{shown:this.state.networkOfflineDialogShown,onClose:this.closeNetworkOfflineDialog}),limitExceededDialog:c("React").createElement(c("AlbumUploaderLimitExceededDialog.react"),{shown:this.state.limitExceededDialogShown,onClose:this.closeLimitExceededDialog,isSessionLimit:this.state.sessionLimitExceeded})})};t.prototype.render=function(){return c("React").createElement("span",null,this.renderLayers())};t.prototype.getActorID=function(){var v=this.props.actorID||c("AlbumUploaderAlbumStore").ownerID();if(!v)throw new Error("Undefined actor");return v};t.prototype.onScroll=function(event){return false};t.prototype.$AlbumUploaderRoot1=function(){__p&&__p();this.uploadController=new(c("UploadController"))(this.uploadAdapter,this.props.configs.uploadController);this.uploadController.setShouldUseReactComponent(true,true,!this.props.datasources.mentionsSource).setShouldCopyLocation(true);this.uploadController.setFBID(this.props.albumID);if(this.isGroupAlbum()){this.uploadController.addPostParam("set_token",this.props.configs.setToken);this.uploadController.addPostParam("album_type",this.props.configs.specialAlbum);this.uploadController.addPostParam("target_id",this.props.targetID);this.uploadController.addPostParam("upload_flow",this.props.configs.uploader.uploadFlow)}this.uploadController.subscribe("upload_failed",function(v,w){var x=w.response.error;if(x==1366049)this.logger.logWaterfallStep(c("PhotosUploadWaterfall").CLIENT_ERROR,{code:x,meta:{fbid:this.props.albumID,aid:this.props.albumID}})}.bind(this));this.uploadController.subscribe("album_limit_exceeded",function(){return this.setState({limitExceededDialogShown:true})}.bind(this));this.uploadController.subscribe("session_limit_exceeded",function(){return this.setState({limitExceededDialogShown:true,sessionLimitExceeded:true})}.bind(this))};t.prototype.$AlbumUploaderRoot3=function(){this.faceRecController=new(c("FaceRecognitionController"))({include_unrecognized_faceboxes:true,include_recognized_user_profile_picture:true,include_low_confidence_recognitions:true})};t.prototype.$AlbumUploaderRoot2=function(){this.videoUploadController=new(c("AlbumVideoUploadController"))(this.props.configs.videoUploadController);this.videoUploadController.subscribe("album_limit_exceeded",function(){return this.setState({limitExceededDialogShown:true})}.bind(this));this.videoUploadController.subscribe("session_limit_exceeded",function(){return this.setState({limitExceededDialogShown:true,sessionLimitExceeded:true})}.bind(this))};t.prototype.getUploaderBodyContent=function(v){var w=this.state.medias.size>0,x,y=c("React").createElement(c("AlbumUploaderNoPhotoView.react"),{shown:!w,onBasicUploaderLinkClicked:this.onBasicUploaderLinkClicked,addMoreButton:this.props.xhpComponents.addMoreEmptyStateButton});if(w)x=c("React").createElement(c("XEditableMediaContainer.react"),{viewportSize:this.getViewportSize(this.state.viewportWidth),taggingSource:this.props.datasources.taggingSource,taggingData:this.props.configs.taggingData,order:this.state.uploads,medias:this.state.medias,onCanceled:this.onUploadCanceled,minTime:this.props.configs.parameters.albumMinTime,onProgressBarCompleted:this.onProgressBarCompleted,onRemoved:this.onMediaRemoved,onRotated:this.onPhotoRotated,toggleSphericalPhotoUpdating:this.toggleSphericalPhotoUpdating,onTagAdded:this.onPhotoTagAdded,onTagRemoved:this.onPhotoTagRemoved,onCaptionBlur:this.onMediaCaptionBlur,onPlaceChanged:this.onMediaPlaceChanged,onDateChanged:this.onPhotoDateChanged,mentionsSource:this.props.datasources.mentionsSource,onFailedUploadDismissed:this.onFailedUploadDismissed,onFailedUploadRetried:this.onFailedUploadRetried,onMediaDragStarted:this.onMediaDragStarted,onMediaDropped:this.onMediaDropped,onSetAlbumCover:this.onSetAlbumCover,isGroupAlbum:this.isGroupAlbum(),addMoreInlineButton:this.props.xhpComponents.addMoreInlineButton,gks:this.props.configs.parameters.gks,showVideoNUX:this.props.showVideoNUX,logger:this.logger,actorID:this.getActorID()});return c("React").createElement("div",{className:"_172v uiContextualLayerParent",style:{height:this.state.modalHeight}},c("React").createElement("div",{className:"_14n0 _172w"},y,x))};t.prototype.canPublish=function(){return!this.state.isUploading&&!this.state.isPublishing&&this.state.medias.size>0};t.prototype.getWaterfallStats=function(){var v=this.uploadController.getStats();return{uploadTime:v.timeElapsedUploading,uploadNumTotal:v.numTotal,uploadBytes:v.sumBytesUploaded,uploadBandwidth:v.estimatedBandwidth,editorHasOrder:true,numFBIDs:v.numUploaded}};t.prototype.isDirty=function(){return this.state.isDirty||this.state.medias.size>0};t.prototype.getInOrderPhotoIDs=function(){return this.state.medias.map(function(v){return v.id}).toArray()};t.prototype.hasFaceboxes=function(){return this.state.photos.some(function(v){return v.faceboxes&&v.faceboxes.size>0})};t.prototype.isEveryFaceboxTagged=function(){return!this.state.photos.some(function(v){return v.faceboxes&&v.faceboxes.some(function(v){return v.taggedSubjectID==null})})};t.prototype.logPublishSent=function(v){var w=this.state.photos.valueSeq().map(function(y){return y.tags.size}).reduce(function(y,z){return y+z}),x={count:this.state.photos.size,scuba_ints:{tag_count:w,num_canceled:this.uploadController.getNumCanceled&&this.uploadController.getNumCanceled()}};this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PUBLISH_SENT,x,v);this.state.photos.forEach(function(y){return y.tags.forEach(function(z){return new(c("PhotoUploadFacerecWaterfallTypedLogger"))().setEvent(c("FacerecWaterfallEvent").CLIENT_PHOTO_PUBLISHED).setPhotoFbid(y.id).setFaceBoxID(z.facebox.id).setRecognizedUser(z.facebox.bestSubjectID).setTaggedUser(z.facebox.taggedSubjectID).log()})})};t.prototype.publishCaptions=function(){__p&&__p();var v=arguments.length<=0||arguments[0]===undefined?5:arguments[0],w=1,x=1,y={captions:{},source:c("PhotosConst").FLASH_UPLOADER,bulk:false,batch:true};this.state.medias.forEach(function(z){var A=z.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT?c("XVideoStore").getVideo(z.id):c("XPhotoStore").getPhoto(z.id);y.captions[A.id]=A.encodedCaption;if(w==v||x==this.state.medias.count()){new(c("AsyncRequest"))().setURI("/ajax/photos/metadata/save/").setData(y).setAllowCrossPageTransition(true).send();y.captions={};w=0}w++;x++}.bind(this))};t.prototype.getClusteringCandidates=function(){return this.state.photos.valueSeq().map(function(v){return v.tags.map(function(w){return w.subjectID})}).flatten().toSet().toArray()};t.prototype.onClose=function(){var v=this.state.medias&&this.state.medias.size>0;if(!this.isDirty()||!v){this.onDeleteMultimediaTriggered();return null}this.setState({cancelDialogShown:true})};t.prototype.deleteMultimediaAndAlbum=function(v){this.videoUploadController.cancelUploads();this.uploadController.cancelUpload();var w;if(this.isGroupAlbum())w=new(c("AsyncRequest"))().setURI("/ajax/photos/sets/delete/").setData({set:this.props.configs.setToken,id:this.getActorID()});else w=new(c("AsyncRequest"))().setURI("/ajax/photos/album/delete/").setData({album_fbid:this.props.albumID,id:this.getActorID()});w.setHandler(v).send()};t.prototype.deleteAlbumPost=function(v){this.videoUploadController.cancelUploads();new(c("AsyncRequest"))().setURI("/photos/album/draft/delete").setData({album_post_fbid:this.props.albumPostID}).setHandler(v).send()};t.prototype.deleteMultimedia=function(v){this.videoUploadController.cancelUploads();var w="a"+this.props.albumID;new(c("AsyncRequest"))().setURI("/ajax/photos/multi_delete").setData({set:w,photo_ids:this.state.photos.map(function(x){return x.id}).toArray()}).setHandler(v).send()};t.prototype.doDeleteMutlimedia=function(){var v=this.props.isNewAlbum,w=function(){this.onLeave()}.bind(this);if(v)this.deleteMultimediaAndAlbum(w);else if(this.props.albumPostID)this.deleteAlbumPost(w);else this.deleteMultimedia(w);this.setState({isCancelling:true,cancelDialogShown:false})};t.prototype.onAlbumTagRemoved=function(v,w){if(v===c("AlbumUploaderTagRemovalIntent").REMOVE_PERSON_TAG)c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").removeAllSubjectTags(w.subjectID));else if(v===c("AlbumUploaderTagRemovalIntent").REMOVE_LOCATION_TAG)c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").removeAllLocationTags(w.locationID));else throw new Error("Tag removal intent "+v+" is unknown")};t.prototype.onFailedUploadDismissed=function(v){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").remove(v))};t.prototype.onSetAlbumCover=function(v){new(c("AsyncRequest"))().setURI("/ajax/photos/album/setcover/").setData({fbid:v}).send()};t.prototype.onMediaCaptionBlur=function(v,w,x){var y=w===c("XMediaElementType").ALBUM_VIDEO_ELEMENT?c("XVideoStore").getVideo(v):c("XPhotoStore").getPhoto(v);if(y.encodedCaption===x)return;if(w===c("XMediaElementType").ALBUM_VIDEO_ELEMENT)c("AlbumUploaderDispatcher").handleUpdate(c("XVideoActions").updateCaption(v,x));else c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").updateCaption(v,x))};t.prototype.onMediaPlaceChanged=function(v,w){var x=c("XPhotoStore").getPhoto(v),y=x.place&&x.place.uid,z=w&&w.uid;if(y!=z){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").changePlace(v,w));var A={location:w&&w.text||"",location_data:z||0,fbid:v,source:c("PhotosConst").FLASH_UPLOADER,version:c("PhotosConst").BULK_EDITOR,bulk:false};new(c("AsyncRequest"))().setURI("/ajax/photos/metadata/save/").setData(A).send()}};t.prototype.onPhotoDateChanged=function(v,w){var x=c("XPhotoStore").getPhoto(v);if(x.timeTaken!==w){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").backdatePhoto(v,w));var y={backdated_date:w,fbid:v,source:c("PhotosConst").FLASH_UPLOADER,version:c("PhotosConst").BULK_EDITOR_REACT,bulk:false};new(c("AsyncRequest"))().setURI("/ajax/photos/photo/backdate/").setData(y).send()}};t.prototype.onContributorAdded=function(v){c("AlbumUploaderDispatcher").handleUpdate(c("AlbumUploaderAlbumActions").addContributor(v))};t.prototype.onContributorRemoved=function(v){c("AlbumUploaderDispatcher").handleUpdate(c("AlbumUploaderAlbumActions").removeContributor(v))};t.prototype.updateStoreTimeTakens=function(v,w,x){var y=v.map(function(z){return c("XPhotoActions").backdatePhoto(z.id,w&&z.exifTimeTaken?this.getTimeTakenObject(z.exifTimeTaken):x)}.bind(this)).toArray();c("AlbumUploaderDispatcher").handleUpdate(y)};t.prototype.backdatePhotosFromEXIF=function(v){__p&&__p();v=v.groupBy(function(y){return y.id}).toSeq().map(function(y){return y.first()}).filter(function(y){return!!y.exifTimeTaken}).toMap();if(v.size===0)return;var w=v.toSeq().map(function(y){return this.getTimeTakenObject(y.exifTimeTaken)}.bind(this)).toJS(),x=new(c("AsyncRequest"))(c("ActorURI").create(c("XPhotoBatchBackdateController").getURIBuilder().getURI(),this.getActorID()));x.setData({photo_ids:v.toSeq().map(function(y){return y.id}).toArray(),source:c("PhotosConst").BULK_EDITOR_REACT,backdate:w}).send()};t.prototype.getTimeTakenObject=function(v){var w=new Date(v*1e3);return{year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate(),hour:w.getHours(),minute:w.getMinutes()}};t.prototype.isGroupAlbum=function(){return!!(this.props.configs.setToken&&this.props.targetID&&this.props.configs.specialAlbum)};t.prototype.reorderGroupAlbum=function(){var v=this.state.medias.toSeq().filter(function(w){return!w.filename}).map(function(w){return w.id}).toArray();new(c("AsyncRequest"))().setURI("/ajax/photos/sets/static/reorder.php").setData({set:this.props.configs.setToken,owner:this.getActorID(),order:v}).send()};t.prototype.getViewportSize=function(v){v-=c("AlbumUploaderDimensions").get("SIDEBAR_WIDTH");var w=v>980&&v<1266,x=v>740&&v<980,y=v<=740;if(y)return c("AlbumUploaderViewportSize").SMALL;else if(x)return c("AlbumUploaderViewportSize").MEDIUM;else if(w)return c("AlbumUploaderViewportSize").LARGE;else return c("AlbumUploaderViewportSize").EXTRA_LARGE};t.prototype.isNewAlbum=function(){return this.props.isNewAlbum||this.props.configs.uploader.isNewGroupAlbum};t.propTypes={albumID:o.string.isRequired,albumTitle:o.string,albumDescription:o.object,isNewAlbum:o.bool,isPageAlbum:o.bool,isSharedAlbum:o.bool,isSharingParty:o.bool,actorID:o.string,targetID:o.string.isRequired,config:o.object,xhpComponents:o.object.isRequired,showVideoNUX:o.bool,videosInSharedAlbums:o.bool};var u=function u(){__p&&__p();this.onBeforeHide=function(){if(this.state.isGrabbingPhoto)return false;this.onClose();return false}.bind(this);this.onBeforeUnload=function(){if(this.state.isPublishing||this.state.isCancelling||this.state.isNavigatingToBasicUploader)return null;return j._("Si sales de esta p\u00e1gina, perder\u00e1s todo tu trabajo.")}.bind(this);this.onLeave=function(){this.setState({shown:false});this.state.medias.forEach(function(v){var w=v.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT?c("XVideoStore").getVideo(v.id):c("XPhotoStore").getPhoto(v.id);this.onMediaRemoved(w.id,w.id)}.bind(this));this.props.onLeave&&this.props.onLeave()}.bind(this);this.onWindowResized=function(){var v=c("Vector").getViewportWithoutScrollbarDimensions();this.setState({viewportWidth:v.x,viewportHeight:v.y,modalHeight:this.getModalHeight(v.y)})}.bind(this);this.handleNetworkOnline=function(){this.closeNetworkOfflineDialog()}.bind(this);this.closeNetworkOfflineDialog=function(){this.setState({networkOfflineDialogShown:false})}.bind(this);this.handleNetworkOffline=function(){this.setState({networkOfflineDialogShown:true})}.bind(this);this.closeLimitExceededDialog=function(){this.setState({limitExceededDialogShown:false})}.bind(this);this.toggleSphericalPhotoUpdating=function(v){this.setState({isSphericalPhotoUpdating:v})}.bind(this);this.onBasicUploaderLinkClicked=function(){this.setState({isNavigatingToBasicUploader:true});window.location.href=this.props.configs.basicUploaderURI}.bind(this);this.onPublish=function(){var v=this.state.albumDateType===c("AlbumUploaderDateType").FROM_EXIF;if(v)this.backdatePhotosFromEXIF(this.state.photos);if(this.connectionMonitor.isOnline()){this.setState({isPublishing:true});this.logger.logWaterfallStep(c("PhotosUploadWaterfall").POST_BUTTON_CLICKED,{});c("ErrorUtils").applyWithGuard(this.publish,null,null,this.logPostButtonError,"AlbumUploader: publish")}else this.setState({networkOfflineDialogShown:true})}.bind(this);this.publish=function(){if(this.hasFaceboxes()&&this.isEveryFaceboxTagged())this.logger.logWaterfallStep(c("PhotosUploadWaterfall").TAGGED_ALL_FACES,{});this.logPublishSent(this.doPublish)}.bind(this);this.doPublish=function(){__p&&__p();var v=this.state.photos.map(function(B){return B.tags.map(function(C){var D=C.facebox.x,E=C.facebox.y;if(!D||!E){D=C.facebox.left+C.facebox.width/2;E=C.facebox.top+C.facebox.height/2}return{fbid:B.id,x:D,y:E,subject:C.subjectID,name:C.value,source:C.fromSuggestion?c("FaceboxSourceConstants").UPLOADER_SUGGEST:"flash_uploader"}})}).flatten().toArray(),w={id:this.getActorID(),tags:v,qn:this.props.configs.uploader.qn,uploader:this.props.configs.uploader.application},x;if(this.isGroupAlbum()){w.set=this.props.configs.setToken;w.target=this.props.targetID;w.actor_id=this.getActorID();w.is_new=this.props.configs.uploader.isNewGroupAlbum;w.upload_flow=this.props.configs.uploader.uploadFlow;w.photo_order=this.getInOrderPhotoIDs();x=new(c("AsyncRequest"))("/ajax/photos/upload/flash/set/finish/")}else{var y,z=new Date();if(this.state.albumDate.year!==0&&(this.state.albumDate.year!==z.getFullYear()||this.state.albumDate.month!==z.getMonth()+1||this.state.albumDate.day!==z.getDate()))y=this.state.albumDate;w.album_fbid=this.props.albumID;w.photo_order=this.getInOrderPhotoIDs();w.is_retry=false;w.ref=this.props.configs.uploader.ref;w.waterfallStats=this.getWaterfallStats();w.backdated_date=y;w.skipClustering=true;w.upload_flow=this.props.configs.uploader.uploadFlow;w.hide_from_newsfeed=this.state.shouldHideFromNewsfeed;if(!this.state.disableSharedAlbum)w.contributor_ids=this.state.contributors.map(function(B){return B.id}).toArray();if(this.props.xhpComponents.audienceSelector){var A=c("Form").serialize(this.props.xhpComponents.audienceSelector);w.audience=A.audience;w.privacyx=A.privacyx}if(this.props.xhpComponents.sharedAlbumAudienceSelector)w.shared_album_privacy=c("Form").serialize(this.props.xhpComponents.sharedAlbumAudienceSelector).audience;x=new(c("AsyncRequest"))("/photos/publish/")}this.publishCaptions();x.setData(w).setMethod("POST").setErrorHandler(this.onPublishError).setHandler(this.onPublishSuccess).send()}.bind(this);this.logPostButtonError=function(v){this.logger.logWaterfallStep(c("PhotosUploadWaterfall").POST_BUTTON_ERROR,{code:0,errorSummary:v.message,errorDescription:JSON.stringify(v)})}.bind(this);this.continueToURI=function(v){this.onLeave();setTimeout(function(){return c("goURI")(v,true)},0)}.bind(this);this.onPublishError=function(v){this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PUBLISH_FAILURE,{code:v.error,errorDescription:v.errorDescription,errorSummary:v.errorSummary,count:this.uploadController.getNumTotal()},function(){return this.setState({isPublishing:false,errorDialogShown:true})}.bind(this))}.bind(this);this.onPublishSuccess=function(v){var w=this.isGroupAlbum()?this.props.configs.redirectURL:v.payload.redirect_url;this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PUBLISH_CLIENT_SUCCESS,{count:this.state.photos.size},c("curry")(this.continueToURI,w))}.bind(this);this.onMediaDragStarted=function(){this.setState({isGrabbingPhoto:true})}.bind(this);this.onMediaDropped=function(v,w){__p&&__p();this.setState({isGrabbingPhoto:false});var x=w,y=[];if(v>w)for(;x<v;x++)y.push(c("XMediaSetActions").move(this.state.setID,x,v));else for(;x>v;x--)y.push(c("XMediaSetActions").move(this.state.setID,x,v));c("AlbumUploaderDispatcher").handleUpdate(y);if(this.props.configs.setToken)setTimeout(function(){return this.reorderGroupAlbum()}.bind(this))}.bind(this);this.onQualityChanged=function(v){new(c("AsyncRequest"))().setURI("/ajax/photos/upload/settings/").setData({resolution:v}).send();this.uploadController.setHiRes(v===c("PhotoUploadResolution").HIGH);this.setState({resolution:v})}.bind(this);this.onHideFromNewsfeedChange=function(){this.setState({shouldHideFromNewsfeed:!this.state.shouldHideFromNewsfeed})}.bind(this);this.onDeleteMultimediaTriggered=function(){this.logger.logWaterfallStep(c("PhotosUploadWaterfall").CANCEL,{count:this.uploadController.getNumTotal(),scuba_ints:{num_unprocessed:this.uploadController.getNumTotal()-this.uploadController.getNumResized(),incomplete:this.uploadController.getNumTotal()-this.uploadController.getNumUploaded(),num_canceled:this.uploadController.getNumCanceled&&this.uploadController.getNumCanceled()},scuba_tags:{is_set:this.isGroupAlbum(),is_page:this.props.isPageAlbum},meta:{method:this.props.isNewAlbum?p:q}},this.doDeleteMutlimedia())}.bind(this);this.onContinueAlbumButtonClick=function(){this.setState({cancelDialogShown:false})}.bind(this);this.onErrorDialogClosed=function(){this.setState({errorDialogShown:false})}.bind(this);this.onUploadCanceled=function(v){var w=this.state.medias.find(function(x){return x.id===v});if(w.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT){this.videoUploadController.cancelUpload(v);c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").cancel(v))}else{this.uploadController.cancelIndividualUpload(v);c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").cancel(v))}}.bind(this);this.onProgressBarCompleted=function(v){this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PROGRESS_BAR_STOPPED,{meta:this.uploadController.getStats()})}.bind(this);this.onMediaRemoved=function(v,w){__p&&__p();this.uploadController.markDeleted(v);this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PHOTO_DELETED);var x=this.state.medias.find(function(y){return y.id===v||y.id===w});if(x.filename)v=x.id;else{w=x.id;v=c("XMediaSetStore").getMediaUploadID(w)}if(x.mediaType===c("XMediaElementType").ALBUM_VIDEO_ELEMENT)c("AlbumUploaderDispatcher").handleUpdate(c("XVideoUploadActions").remove(v,w));else c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoUploadActions").remove(v,w))}.bind(this);this.onPhotoRotated=function(v,w,x){this.logger.logWaterfallStep(c("PhotosUploadWaterfall").PHOTO_ROTATED,{fbid:v});c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").rotate(v,w,x));this.faceRecController.start([v])}.bind(this);this.onFailedUploadRetried=function(v){this.uploadController.retryFailedUpload(v)}.bind(this);this.onOrderChanged=function(v){c("AlbumUploaderDispatcher").handleUpdate(c("XMediaSetActions").changeOrderType(this.state.setID,v));if(this.isGroupAlbum())setTimeout(function(){return this.reorderGroupAlbum()}.bind(this))}.bind(this);this.onAlbumDataChanged=function(v,w){__p&&__p();this.setState({isDirty:true});if(v.type==="place"){var x=this.state.medias.filter(function(A){return!A.hasOwnPlace});if(x.size>0){var y=x.map(function(A){return c("XPhotoActions").changePlace(A.id,{text:v.location,uid:v.location_data},true)}).toArray();c("AlbumUploaderDispatcher").handleUpdate(y);var z=c("ActorURI").create(c("XPhotoBatchEditLocationController").getURIBuilder().getURI(),this.getActorID());new(c("AsyncRequest"))(z).setData({photo_ids:x.map(function(A){return A.id}).toArray(),location:v.location||"",location_data:v.location_data||0}).setFinallyHandler(w).send();return}}w()}.bind(this);this.onAlbumDateChanged=function(v,w){this.setState({isDirty:true,albumDateType:v,albumDate:w});var x=v===c("AlbumUploaderDateType").FROM_EXIF,y=this.state.medias.filter(function(z){return!z.filename});if(y.size===0)return;this.updateStoreTimeTakens(y,x,w)}.bind(this);this.onPhotoTagAdded=function(v,w,x,y,z){c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").addTag(v,w,x,y,z));this.logger.logWaterfallStep(c("PhotosUploadWaterfall").TAG_ADDED)}.bind(this);this.onPhotoTagRemoved=function(v,w){if(v!==c("AlbumUploaderTagRemovalIntent").REMOVE_PERSON_TAG)throw new Error("Invalid tag removal intent. Was expecting REMOVE_PERSON_TAG");c("AlbumUploaderDispatcher").handleUpdate(c("XPhotoActions").removeTag(w.entID,w.subjectID));this.logger.logWaterfallStep(c("PhotosUploadWaterfall").TAG_REMOVED)}.bind(this);this.onMakeSharedAlbumChange=function(){var v=!this.state.isSharedAlbum;if(!v)c("AlbumUploaderDispatcher").handleUpdate(c("AlbumUploaderAlbumActions").unmakeSharedAlbum());else c("AlbumUploaderDispatcher").handleUpdate(c("AlbumUploaderAlbumActions").makeSharedAlbum(this.state.tags))}.bind(this)};f.exports=t}),null);
__d("AlbumUploaderInit",["AlbumUploaderRoot.react","DataSource","DOM","React","ReactDOM","UploadSession"],(function a(b,c,d,e,f,g){__p&&__p();var h={_mountContainer:null,_sessionID:null,init:function i(j,k){this._mountContainer=c("DOM").create("div");this._sessionID=k;var l=j.xhp&&j.xhp.albumDescriptionMentionsInput;if(l)l.dataSource=new(c("DataSource"))(l.dataSource);j.datasources.taggingSource.bootstrap();var m=j.actorID||j.ownerID,n=c("React").createElement(c("AlbumUploaderRoot.react"),{xhpComponents:j.xhp,albumID:j.albumID,albumPostID:j.albumPostID,albumTitle:j.albumTitle,albumDescription:j.albumDescription,isNewAlbum:j.isNewAlbum,isPageAlbum:j.isPageAlbum,isSharedAlbum:j.isSharedAlbum,isSharingParty:j.isSharingParty,ownerID:m,actorID:m,targetID:j.targetID,configs:j.configs,datasources:j.datasources,showVideoNUX:j.showVideoNUX,onLeave:this._cleanup.bind(this),videosInSharedAlbums:j.videosInSharedAlbums});n=c("ReactDOM").render(n,this._mountContainer);c("DOM").appendContent(document.body,this._mountContainer)},_cleanup:function i(){this._mountContainer&&c("ReactDOM").unmountComponentAtNode(this._mountContainer);this._sessionID&&c("UploadSession").restartSessionPersistingFilePickers(this._sessionID)}};f.exports=h}),null);
if (self.CavalryLogger) { CavalryLogger.start_js(["VHVLd"]); }

__d("ReactComposerFunFactTaggerItem.react",["cx","Grid.react","Image.react","React","TextWithEmoticons.react","TypeaheadViewItem","XUIText.react"],(function a(b,c,d,e,f,g,h){var i=c("Grid.react").GridItem,j=32,k=c("React").createClass({displayName:"ReactComposerFunFactTaggerItem",mixins:[c("TypeaheadViewItem").Mixin],propTypes:babelHelpers["extends"]({},c("TypeaheadViewItem").propTypes),render:function l(){var m=this.props.entry.getAuxiliaryData();return c("React").createElement("li",{"aria-selected":this.props.highlighted,className:(this.props.highlighted?"_599n":"")+" _599m _5mne",onMouseDown:this._onSelect,onMouseEnter:this._onHighlight,role:this.props.role},c("React").createElement(c("Grid.react"),{cols:2},c("React").createElement(i,null,m.isCrowdsourced?c("React").createElement(c("Image.react"),{height:j,src:m.profilePic,style:{borderRadius:100},width:j}):c("React").createElement(c("TextWithEmoticons.react"),{size:j,text:this.props.entry.getSubtitle()})),c("React").createElement(i,{className:"_2pir"},c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{className:this.props.highlighted?"_4hh5":"",size:"medium"},this.props.entry.getTitle())),m.isCrowdsourced&&c("React").createElement(c("XUIText.react"),{className:"_4bhw",size:"small"},m.ownerName))))}});f.exports=k}),null);
__d("ReactComposerFunFactTaggerView.react",["React","ReactComposerFunFactTaggerItem.react","ReactComposerTaggerViewMixin"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"ReactComposerFunFactTaggerView",mixins:[c("ReactComposerTaggerViewMixin")],getItemImpl:function i(){return c("ReactComposerFunFactTaggerItem.react")}});f.exports=h}),null);
__d("ReactComposerFunFactTaggerPresenter",["ReactComposerFunFactTaggerView.react"],(function a(b,c,d,e,f,g){"use strict";f.exports={ViewRenderer:c("ReactComposerFunFactTaggerView.react"),maxEntries:20,useLayer:true}}),null);
__d("ReactComposerFunFactTaggerComponent.react",["cx","fbt","Grid.react","ReactComposerFunFactTaggerPresenter","React","ProfileFunFactsReactComposerTypedLogger","ProfileFunFactsEntryPoints","ProfileFunFactsComposerEvents","TextWithEmoticons.react","WebAsyncSearchSource","XUICloseButton.react","XUITypeahead.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Grid.react").GridItem;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={emoji:this.$ReactComposerFunFactTaggerComponent1()?this.props.taggerData.prompt.getSubtitle():"",query:this.$ReactComposerFunFactTaggerComponent1()?this.props.taggerData.prompt.getTitle():"",selected:this.$ReactComposerFunFactTaggerComponent1()},this.$ReactComposerFunFactTaggerComponent2=function(){if(!this.state.selected)this.setState({emoji:"",query:""});this.props.onBlur(this.state.selected)}.bind(this),this.$ReactComposerFunFactTaggerComponent3=function(s){this.setState({emoji:"",query:s.target.value,selected:false});new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").SEARCH).setSearchContent(s.target.value).log()}.bind(this),this.$ReactComposerFunFactTaggerComponent4=function(s){var t=s.getSubtitle();this.setState({emoji:t,query:s.getTitle(),selected:true});this.props.onSelect({prompt:s})}.bind(this),this.$ReactComposerFunFactTaggerComponent5=function(){__p&&__p();var event=null;switch(this.props.entryPoint){case c("ProfileFunFactsEntryPoints").NF_COMPOSER:event=c("ProfileFunFactsComposerEvents").FEED_SPROUT_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").TIMELINE_COMPOSER:event=c("ProfileFunFactsComposerEvents").TIMELINE_SPROUT_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").NF_CTA:event=c("ProfileFunFactsComposerEvents").CTA_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").NF_SELF_CTA:event=c("ProfileFunFactsComposerEvents").SELF_CTA_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").ASK_FRIEND_NOTIF:event=c("ProfileFunFactsComposerEvents").ASK_FRIENDS_NOTIF_TAP;break;case c("ProfileFunFactsEntryPoints").SELF_PROTILE:event=c("ProfileFunFactsComposerEvents").SELF_PROTILE_LAUNCH_PROMPTS;break;case c("ProfileFunFactsEntryPoints").COLLECTION:event=c("ProfileFunFactsComposerEvents").COLLECTION_LAUNCH_PROMPTS;break}if(event!==null)new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(event).log()}.bind(this),this.$ReactComposerFunFactTaggerComponent6=function(){this.setState({emoji:"",query:"",selected:false});this.props.onClose()}.bind(this),o}m.prototype.componentDidMount=function(){if(!this.$ReactComposerFunFactTaggerComponent1())this.refs.typeahead&&this.refs.typeahead.focusInput()};m.prototype.$ReactComposerFunFactTaggerComponent1=function(){return this.props.taggerData&&this.props.taggerData.prompt};m.prototype.render=function(){return c("React").createElement(c("Grid.react"),{className:"_5esl",cols:4,role:"presentation"},c("React").createElement(l,{className:"_5esm",key:"label",role:"presentation"},i._("Curiosidad")),c("React").createElement(l,null,c("React").createElement("div",{className:"_3-9a"},c("React").createElement(c("TextWithEmoticons.react"),{text:this.state.emoji}))),c("React").createElement(l,{className:"_5esw",key:"tokenizer",role:"presentation"},c("React").createElement(c("XUITypeahead.react"),{className:"_5esx",onBlur:this.$ReactComposerFunFactTaggerComponent2,onChange:this.$ReactComposerFunFactTaggerComponent3,onFocus:this.$ReactComposerFunFactTaggerComponent5,onSelectAttempt:this.$ReactComposerFunFactTaggerComponent4,placeholder:i._("Busca una pregunta para obtener la respuesta"),presenter:c("ReactComposerFunFactTaggerPresenter"),queryString:this.state.query,ref:"typeahead",searchSource:this.props.searchSource,showEntriesOnFocus:true})),c("React").createElement(l,null,c("React").createElement(c("XUICloseButton.react"),{className:"_3-90",onClick:this.$ReactComposerFunFactTaggerComponent6})))};f.exports=m}),null);
__d("XProfileFunFactsTypeaheadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/funfacts/typeahead/",{pinned_prompt:{type:"FBID"}})}),null);
__d("ReactComposerFunFactTaggerContainer.react",["Arbiter","ProfileFunFactsReactComposerTypedLogger","React","ReactComposerAttachmentStore","ReactComposerEvents","ReactComposerFormattedTextActions","ReactComposerFormattedTextStore","ReactComposerFunFactTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerContainerStateMixin","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","ProfileFunFactsComposerEvents","ProfileFunFactsEntryPoints","WebAsyncSearchSource","XProfileFunFactsTypeaheadController","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=-1,i=0,j=c("React").createClass({displayName:"ReactComposerFunFactTaggerContainer",mixins:[c("ReactComposerTaggerContainerStateMixin")(c("ReactComposerAttachmentStore"))],statics:{taggerID:c("ReactComposerTaggerType").FUN_FACT},_prompts:null,componentWillMount:function k(){var l=this._showPinnedPrompt()?this.props.funFactPromptID:null;this._prompts=new(c("WebAsyncSearchSource"))({auxiliaryFields:{isCrowdsourced:"isCrowdsourced",ownerName:"ownerName",profilePic:"profilePic"},bootstrapRequests:[{uri:c("XProfileFunFactsTypeaheadController").getURIBuilder().setFBID("pinned_prompt",l).getURI()}],getAllForEmptyQuery:true});this.setState({exited:true})},componentDidMount:function k(){c("Arbiter").inform("ReactFeedComposerXBootloader/funfactsloaded/"+this.context.composerID)},_onSelect:function k(l){__p&&__p();if(l&&l.prompt)l.promptID=l.prompt.getUniqueID();var m=c("ReactComposerFormattedTextStore").getSelectedIndex(this.context.composerID);if(m===h&&!c("ReactComposerTaggerStore").isDisabled(this.context.composerID,c("ReactComposerTaggerType").FORMATTED_TEXT))c("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,i);c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,l);this.setState({exited:false});new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPT_SELECT).setFunFactPromptID(l.promptID).log();c("setImmediate")(function(){c("Arbiter").inform(c("ReactComposerEvents").ACTIVATE_ATTACHMENT+this.context.composerID)}.bind(this))},_onClose:function k(){var l=c("ReactComposerTaggerStore").getTaggerData(this.context.composerID,c("ReactComposerTaggerType").FUN_FACT);new(c("ProfileFunFactsReactComposerTypedLogger"))().setEvent(c("ProfileFunFactsComposerEvents").PROMPTS_CANCEL).setFunFactPromptID(l&&l.promptID).log();c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,null);if(c("ReactComposerTaggerStore").getSelectedTagger(this.context.composerID)===c("ReactComposerTaggerType").FUN_FACT)c("ReactComposerTaggerActions").selectTagger(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT);this.setState({exited:true})},_onBlur:function k(l){if(!l)this._onClose()},_showPinnedPrompt:function k(){return this.props.entryPoint===c("ProfileFunFactsEntryPoints").NF_CTA||this.props.entryPoint===c("ProfileFunFactsEntryPoints").ASK_FRIEND_NOTIF||this.props.entryPoint===c("ProfileFunFactsEntryPoints").COLLECTION},render:function k(){var l=c("ReactComposerTaggerStore").isDisabled(this.context.composerID,c("ReactComposerTaggerType").FUN_FACT);if(!this.state.isSelected&&this.state.exited||l)return null;return c("React").createElement("div",{"data-testid":"fun-fact-tagger-component"},c("React").createElement(c("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,c("React").createElement(c("ReactComposerFunFactTaggerComponent.react"),{composerID:this.props.composerID,entryPoint:this.props.entryPoint?this.props.entryPoint:c("ProfileFunFactsEntryPoints").NF_COMPOSER,onBlur:this._onBlur,onClose:this._onClose,onSelect:this._onSelect,searchSource:this._prompts,taggerData:this.state.taggerData})))}});f.exports=j}),null);